---
title: äº‹ä»¶å’Œè½¬æ¢
---

**è½¬æ¢**æ˜¯ä»ä¸€ä¸ªæœ‰é™çŠ¶æ€åˆ°å¦ä¸€ä¸ªæœ‰é™çŠ¶æ€çš„å˜åŒ–ï¼Œç”±äº‹ä»¶è§¦å‘ã€‚

**äº‹ä»¶**æ˜¯ä¸€ä¸ªä¿¡å·ã€è§¦å‘å™¨æˆ–æ¶ˆæ¯ï¼Œä¼šå¯¼è‡´è½¬æ¢ã€‚å½“ä¸€ä¸ª actor æ¥æ”¶åˆ°ä¸€ä¸ªäº‹ä»¶æ—¶ï¼Œå®ƒçš„çŠ¶æ€æœºå°†ç¡®å®šå½“å‰çŠ¶æ€ä¸‹æ˜¯å¦æœ‰ä»»ä½•å¯ç”¨çš„è½¬æ¢ã€‚å¦‚æœå­˜åœ¨å¯ç”¨çš„è½¬æ¢ï¼ŒçŠ¶æ€æœºå°†æ‰§è¡Œè¿™äº›è½¬æ¢å¹¶æ‰§è¡Œå…¶åŠ¨ä½œã€‚

:::studio

æ‚¨å¯ä»¥åœ¨æˆ‘ä»¬çš„æ‹–æ”¾å¼ Stately ç¼–è¾‘å™¨ä¸­å¯è§†åŒ–æ‚¨çš„çŠ¶æ€æœºå¹¶è½»æ¾æ·»åŠ è½¬æ¢ã€‚ [é˜…è¯»æ›´å¤šå…³äº Stately ç¼–è¾‘å™¨ä¸­çš„è½¬æ¢](/docs/editor-states-and-transitions/#transitions-and-events)ã€‚

:::

<EmbedMachine
  name="Video player"
  embedURL="https://stately.ai/registry/editor/embed/e13bef2b-bb13-4465-96ac-0bc25340688e?machineId=9630e3b7-9f8e-4dc9-8b55-661f854d28b7&mode=Simulate"
/>

è½¬æ¢æ˜¯â€œç¡®å®šæ€§çš„â€ï¼›æ¯ç§çŠ¶æ€å’Œäº‹ä»¶çš„ç»„åˆæ€»æ˜¯æŒ‡å‘ç›¸åŒçš„ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚å½“çŠ¶æ€æœºæ¥æ”¶åˆ°ä¸€ä¸ªäº‹ä»¶æ—¶ï¼Œåªä¼šæ£€æŸ¥æ´»åŠ¨çš„æœ‰é™çŠ¶æ€ï¼Œçœ‹çœ‹å®ƒä»¬æ˜¯å¦æœ‰è¯¥äº‹ä»¶çš„è½¬æ¢ã€‚è¿™äº›è½¬æ¢ç§°ä¸º**å¯ç”¨è½¬æ¢**ã€‚å¦‚æœå­˜åœ¨å¯ç”¨çš„è½¬æ¢ï¼ŒçŠ¶æ€æœºå°†æ‰§è¡Œè½¬æ¢çš„åŠ¨ä½œï¼Œç„¶åè½¬æ¢åˆ°ç›®æ ‡çŠ¶æ€ã€‚

è½¬æ¢ç”±çŠ¶æ€ä¸­çš„ `on:` è¡¨ç¤ºï¼š

```ts
import { createMachine } from 'xstate';
const feedbackMachine = createMachine({
  id: 'feedback',
  initial: 'question',
  states: {
    question: {
      on: {
        'feedback.good': {
          target: 'thanks'
        }
      }
    },
    thanks: {}
  },
});
```

## äº‹ä»¶å¯¹è±¡

åœ¨ XState ä¸­ï¼Œäº‹ä»¶ç”±å…·æœ‰ `type` å±æ€§å’Œå¯é€‰è´Ÿè½½çš„äº‹ä»¶å¯¹è±¡è¡¨ç¤ºï¼š

- `type` å±æ€§æ˜¯ä¸€ä¸ªè¡¨ç¤ºäº‹ä»¶ç±»å‹çš„å­—ç¬¦ä¸²ã€‚
- è´Ÿè½½æ˜¯ä¸€ä¸ªåŒ…å«æœ‰å…³äº‹ä»¶çš„é™„åŠ æ•°æ®çš„å¯¹è±¡ã€‚

```ts
feedbackActor.send({
  // äº‹ä»¶ç±»å‹
  type: 'feedback.update',
  // é™„åŠ è´Ÿè½½
  feedback: 'This is great!',
  rating: 5,
});
```

## é€‰æ‹©è½¬æ¢

è½¬æ¢æ˜¯é€šè¿‡é¦–å…ˆæ£€æŸ¥æœ€æ·±çš„å­çŠ¶æ€æ¥é€‰æ‹©çš„ã€‚å¦‚æœè½¬æ¢è¢«å¯ç”¨ï¼ˆå³å…¶å®ˆå«é€šè¿‡ï¼‰ï¼Œå®ƒå°†è¢«æ‰§è¡Œã€‚å¦‚æœæ²¡æœ‰ï¼Œçˆ¶çŠ¶æ€å°†è¢«æ£€æŸ¥ï¼Œä¾æ­¤ç±»æ¨ã€‚

1. ä»æœ€æ·±çš„æ´»åŠ¨çŠ¶æ€èŠ‚ç‚¹ï¼ˆå³åŸå­çŠ¶æ€èŠ‚ç‚¹ï¼‰å¼€å§‹
2. å¦‚æœè½¬æ¢è¢«å¯ç”¨ï¼ˆæ²¡æœ‰ `guard` æˆ–å…¶ `guard` è¯„ä¼°ä¸º `true`ï¼‰ï¼Œåˆ™é€‰æ‹©å®ƒã€‚
3. å¦‚æœæ²¡æœ‰è½¬æ¢è¢«å¯ç”¨ï¼Œåˆ™ä¸Šå‡åˆ°çˆ¶çŠ¶æ€èŠ‚ç‚¹å¹¶é‡å¤ç¬¬1æ­¥ã€‚
4. æœ€åï¼Œå¦‚æœæ²¡æœ‰è½¬æ¢è¢«å¯ç”¨ï¼Œåˆ™ä¸ä¼šè¿›è¡Œä»»ä½•è½¬æ¢ï¼ŒçŠ¶æ€ä¹Ÿä¸ä¼šæ”¹å˜ã€‚

## è‡ªè½¬æ¢ {#self-transitions}

ä¸€ä¸ªçŠ¶æ€å¯ä»¥è½¬æ¢åˆ°è‡ªèº«ã€‚è¿™è¢«ç§°ä¸º**è‡ªè½¬æ¢**ï¼Œå¯¹äºåœ¨ä¸æ”¹å˜æœ‰é™çŠ¶æ€çš„æƒ…å†µä¸‹æ›´æ”¹ä¸Šä¸‹æ–‡å’Œ/æˆ–æ‰§è¡Œæ“ä½œéå¸¸æœ‰ç”¨ã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨è‡ªè½¬æ¢æ¥é‡æ–°å¯åŠ¨ä¸€ä¸ªçŠ¶æ€ã€‚

**æ ¹è‡ªè½¬æ¢ï¼š**

```ts
import { createMachine, assign } from 'xstate';

const machine = createMachine({
  context: { count: 0 },
  // highlight-start
  on: {
    someEvent: {
      // æ²¡æœ‰ç›®æ ‡
      actions: assign({
        count: ({context}) => context.count + 1,
      })
    }
  }
  // highlight-end
});
```

<EmbedMachine embedURL="https://stately.ai/registry/editor/embed/c447d996-cef1-421d-a422-8be695668764?mode=design&machineId=91da1d57-b146-48fd-82ce-a9dd28b7261a" title="Root self-transition"/>

**çŠ¶æ€ä¸Šçš„è‡ªè½¬æ¢ï¼š**

```ts
import { createMachine, assign } from 'xstate';

const machine = createMachine({
  context: { count: 0 },
  initial: 'inactive',
  states: {
    inactive: {
      on: { activate: { target: 'active' } }
    },
    active: {
      // highlight-start
      on: {
        someEvent: {
          // No target
          actions: assign({
            count: ({context}) => context.count + 1,
          })
        }
      }
      // highlight-end
    }
  }
});
```

<EmbedMachine embedURL="https://stately.ai/registry/editor/embed/c447d996-cef1-421d-a422-8be695668764?mode=design&machineId=8763e570-3535-42b3-a2a2-8edd82d1207a" title="Self-transition on state"/>

:::studio

æ‚¨å¯ä»¥åœ¨ Stately ç¼–è¾‘å™¨ä¸­è½»æ¾å¯è§†åŒ–è‡ªè½¬æ¢ã€‚ [é˜…è¯»æ›´å¤šå…³äº Stately ç¼–è¾‘å™¨ä¸­çš„è‡ªè½¬æ¢](/docs/editor-states-and-transitions/#self-transitions)ã€‚

:::

## çŠ¶æ€ä¹‹é—´çš„è½¬æ¢

é€šå¸¸ï¼Œè½¬æ¢å‘ç”Ÿåœ¨ä¸¤ä¸ªå…„å¼ŸçŠ¶æ€ä¹‹é—´ã€‚è¿™äº›è½¬æ¢é€šè¿‡å°† `target` è®¾ç½®ä¸ºå…„å¼ŸçŠ¶æ€çš„é”®æ¥å®šä¹‰ã€‚

```ts
const feedbackMachine = createMachine({
  // ...
  states: {
    form: {
      on: {
        submit: {
          // highlight-start
            // ç›®æ ‡æ˜¯å…„å¼ŸçŠ¶æ€çš„é”®
          target: 'submitting',
          // highlight-end
        },
      },
    },
    // highlight-next-line
    submitting: {
      // ...
    },
  },
});
```

## çˆ¶çŠ¶æ€åˆ°å­çŠ¶æ€çš„è½¬æ¢

å½“çŠ¶æ€æœº actor æ¥æ”¶åˆ°ä¸€ä¸ªäº‹ä»¶æ—¶ï¼Œå®ƒå°†é¦–å…ˆæ£€æŸ¥æœ€æ·±çš„ï¼ˆ[åŸå­](state-machines-and-statecharts.mdx#atomic-states)ï¼‰çŠ¶æ€æ˜¯å¦æœ‰ä»»ä½•å¯ç”¨çš„è½¬æ¢ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™æ£€æŸ¥çˆ¶çŠ¶æ€ï¼Œä¾æ­¤ç±»æ¨ï¼Œç›´åˆ°çŠ¶æ€æœºåˆ°è¾¾æ ¹çŠ¶æ€ã€‚

å½“æ‚¨å¸Œæœ›äº‹ä»¶è½¬æ¢åˆ°æŸä¸ªçŠ¶æ€ï¼Œè€Œä¸ç®¡å“ªä¸ªå…„å¼ŸçŠ¶æ€å¤„äºæ´»åŠ¨çŠ¶æ€æ—¶ï¼Œä¸€ä¸ªæœ‰ç”¨çš„æ¨¡å¼æ˜¯ä»çˆ¶çŠ¶æ€è½¬æ¢åˆ°å­çŠ¶æ€ã€‚

ä¾‹å¦‚ï¼Œä¸‹é¢çš„çŠ¶æ€æœºå°†åœ¨ `mode.reset` äº‹ä»¶ä¸Šè½¬æ¢åˆ° `colorMode.system` çŠ¶æ€ï¼Œè€Œä¸ç®¡å®ƒå½“å‰å¤„äºå“ªä¸ªçŠ¶æ€ã€‚

```ts
import { createMachine } from 'xstate';

const machine = createMachine({
  id: 'colorMode',
  initial: 'system',
  states: {
    system: {},
    auto: {},
    light: {
      on: {
        'mode.toggle': { target: 'dark' }
      }
    },
    dark: {
      on: {
        'mode.toggle': { target: 'light' }
      }
    }
  },
  on: {
    'mode.reset': {
      // highlight-next-line
      target: '.system'
    }
  }
});
```

## é‡æ–°è¿›å…¥

é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“çŠ¶æ€æœºä»æŸä¸ªçŠ¶æ€è½¬æ¢åˆ°ç›¸åŒçŠ¶æ€æˆ–ä»çˆ¶çŠ¶æ€è½¬æ¢åˆ°è¯¥çˆ¶çŠ¶æ€çš„å­çŠ¶æ€ï¼ˆå­ã€å­™ç­‰ï¼‰æ—¶ï¼Œå®ƒä¸ä¼šé‡æ–°è¿›å…¥è¯¥çŠ¶æ€ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä¸ä¼šæ‰§è¡Œçˆ¶çŠ¶æ€çš„[`exit`å’Œ`entry`åŠ¨ä½œ](actions.mdx)ã€‚å®ƒä¸ä¼šåœæ­¢ç°æœ‰çš„è¢«è°ƒç”¨çš„ actorï¼Œä¹Ÿä¸ä¼šå¯åŠ¨æ–°çš„è¢«è°ƒç”¨çš„ actorã€‚

è¿™å¯ä»¥é€šè¿‡è½¬æ¢çš„`reenter`å±æ€§æ¥æ›´æ”¹ï¼šå¦‚æœæ‚¨å¸Œæœ›çˆ¶çŠ¶æ€é‡æ–°è¿›å…¥ï¼Œå¯ä»¥è®¾ç½®`reenter: true`ã€‚è¿™å°†å¯¼è‡´çŠ¶æ€åœ¨è½¬æ¢åˆ°è‡ªèº«æˆ–å­çŠ¶æ€æ—¶é‡æ–°è¿›å…¥ï¼Œæ‰§è¡ŒçŠ¶æ€çš„`exit`å’Œ`entry`åŠ¨ä½œã€‚å®ƒå°†åœæ­¢ç°æœ‰çš„è¢«è°ƒç”¨çš„ actorï¼Œå¹¶å¯åŠ¨æ–°çš„è¢«è°ƒç”¨çš„ actorã€‚

:::tip

åœ¨ XState v4 ä¸­ï¼Œé‡æ–°è¿›å…¥çš„è½¬æ¢è¢«ç§°ä¸º**å¤–éƒ¨è½¬æ¢**ï¼Œé»˜è®¤çš„è½¬æ¢è¢«ç§°ä¸º**å†…éƒ¨è½¬æ¢**ã€‚

:::

**ä½¿ç”¨`reenter: true`çš„è‡ªè½¬æ¢ï¼š**

```ts
import { createMachine } from 'xstate';

const machine = createMachine({
  initial: 'someState',
  states: {
    someState: {
      entry: () => console.log('someState entered'),
      exit: () => console.log('someState exited'),
      on: {
        'event.normal': {
          target: 'someState', // æˆ–æ²¡æœ‰ç›®æ ‡
        },
        'event.thatReenters': {
          target: 'someState', // æˆ–æ²¡æœ‰ç›®æ ‡
          reenter: true,
        }
      }
    }
  }
});

const actor = createActor(machine);
actor.start();

actor.send({ type: 'event.normal' });
// ä¸ä¼šè®°å½•ä»»ä½•å†…å®¹

actor.send({ type: 'event.thatReenters' });
// è®°å½•:
// "someState exited"
// "someState entered"
```

**çˆ¶å­ï¼ˆæˆ–åä»£ï¼‰è½¬æ¢ä¸ `reenter: true`ï¼š**

```ts
const machine = createMachine({
  initial: 'parentState',
  states: {
    parentState: {
      entry: () => console.log('parentState entered'),
      exit: () => console.log('parentState exited'),
      on: {
        'event.normal': {
          target: '.someChildState'
        },
        'event.thatReenters': {
          target: '.otherChildState',
          reenter: true
        }
      },
      initial: 'someChildState',
      states: {
        someChildState: {
          entry: () => console.log('someChildState entered'),
          exit: () => console.log('someChildState exited')
        },
        otherChildState: {
          entry: () => console.log('otherChildState entered'),
          exit: () => console.log('otherChildState exited')
        }
      }
    }
  }
});

const actor1 = createActor(machine);
actor1.start();
actor1.send({ type: 'event.normal' });
// Logs:
// "someChildState exited"
// "someChildState entered"

const actor2 = createActor(machine);
actor2.start();
console.log('---');
actor2.send({ type: 'event.thatReenters' });
// Logs:
// "someChildState exited"
// "parentState exited"
// "parentState entered"
// "otherChildState entered"
```

## è½¬æ¢åˆ°ä»»ä½•çŠ¶æ€

å…„å¼Ÿåä»£çŠ¶æ€ï¼š`{ target: 'sibling.child.grandchild' }`

çˆ¶çŠ¶æ€åˆ°åä»£çŠ¶æ€ï¼š`{ target: '.child.grandchild' }`

çŠ¶æ€åˆ°ä»»ä½•çŠ¶æ€ï¼š`{ target: '#specificState' }`

## ç¦æ­¢è½¬æ¢

- `{ on: { forbidden: {} } }`
- ä¸çœç•¥è½¬æ¢ä¸åŒï¼›è½¬æ¢é€‰æ‹©ç®—æ³•å°†åœæ­¢æŸ¥æ‰¾
- ç­‰åŒäº `{ on: { forbidden: { target: undefined } } }`

## é€šé…ç¬¦è½¬æ¢

é€šé…ç¬¦è½¬æ¢æ˜¯ä¸€ç§å°†åŒ¹é…ä»»ä½•äº‹ä»¶çš„è½¬æ¢ã€‚äº‹ä»¶æè¿°ç¬¦ï¼ˆ`on: {...}` å¯¹è±¡çš„é”®ï¼‰ä½¿ç”¨ `*` é€šé…ç¬¦å­—ç¬¦ä½œä¸ºäº‹ä»¶ç±»å‹å®šä¹‰ï¼š

```ts
import { createMachine } from 'xstate';

const feedbackMachine = createMachine({
  initial: 'asleep',
  states: {
    asleep: {
      on: {
        // highlight-start
        // æ­¤è½¬æ¢å°†åŒ¹é…ä»»ä½•äº‹ä»¶
        '*': { target: 'awake' },
        // highlight-end
      },
    },
    awake: {},
  },
});
```
é€šé…ç¬¦è½¬æ¢éå¸¸æœ‰ç”¨ï¼š

- å¤„ç†æœªè¢«ä»»ä½•å…¶ä»–è½¬æ¢å¤„ç†çš„äº‹ä»¶ã€‚
- ä½œä¸ºå¤„ç†çŠ¶æ€ä¸­ä»»ä½•äº‹ä»¶çš„â€œæ•è·æ‰€æœ‰â€è½¬æ¢ã€‚

é€šé…ç¬¦è½¬æ¢çš„ä¼˜å…ˆçº§æœ€ä½ï¼›å®ƒåªæœ‰åœ¨æ²¡æœ‰å…¶ä»–è½¬æ¢è¢«å¯ç”¨æ—¶æ‰ä¼šè¢«æ‰§è¡Œã€‚

## éƒ¨åˆ†é€šé…ç¬¦è½¬æ¢

éƒ¨åˆ†é€šé…ç¬¦è½¬æ¢æ˜¯ä¸€ç§åŒ¹é…ä»»ä½•ä»¥ç‰¹å®šå‰ç¼€å¼€å¤´çš„äº‹ä»¶çš„è½¬æ¢ã€‚äº‹ä»¶æè¿°ç¬¦é€šè¿‡åœ¨äº‹ä»¶ç±»å‹åä½¿ç”¨ç‚¹ï¼ˆ`.`ï¼‰å’Œé€šé…ç¬¦å­—ç¬¦ï¼ˆ`*`ï¼‰æ¥å®šä¹‰ï¼š

```ts
import { createMachine } from 'xstate';

const feedbackMachine = createMachine({
  initial: 'prompt',
  states: {
    prompt: {
      on: {
        // highlight-start
        // è¿™å°†åŒ¹é… 'feedback' äº‹ä»¶ä»¥åŠ
        // ä»»ä½•ä»¥ 'feedback.' å¼€å¤´çš„äº‹ä»¶ï¼Œä¾‹å¦‚ï¼š
        // 'feedback.good', 'feedback.bad' ç­‰ã€‚
        'feedback.*': { target: 'form' },
        // highlight-end
      },
    },
    form: {},
    // ...
  },
});
```

é€šé…ç¬¦å­—ç¬¦ (`*`) åªèƒ½åœ¨äº‹ä»¶æè¿°ç¬¦çš„åç¼€ä¸­ä½¿ç”¨ï¼Œç´§è·Ÿåœ¨ç‚¹ (`.`) ä¹‹åï¼š

### æœ‰æ•ˆçš„é€šé…ç¬¦ç¤ºä¾‹

- âœ… `mouse.*`: åŒ¹é… `mouse`, `mouse.click`, `mouse.move` ç­‰ã€‚
- âœ… `mouse.click.*`: åŒ¹é… `mouse.click`, `mouse.click.left`, `mouse.click.right` ç­‰ã€‚

### æ— æ•ˆçš„é€šé…ç¬¦

- ğŸš« ~~`mouse*`~~: æ— æ•ˆï¼›ä¸åŒ¹é…ä»»ä½•äº‹ä»¶ã€‚
- ğŸš« ~~`mouse.*.click`~~: æ— æ•ˆï¼›`*` ä¸èƒ½åœ¨äº‹ä»¶æè¿°ç¬¦çš„ä¸­é—´ä½¿ç”¨ã€‚
- ğŸš« ~~`*.click`~~: æ— æ•ˆï¼›`*` ä¸èƒ½åœ¨äº‹ä»¶æè¿°ç¬¦çš„å‰ç¼€ä¸­ä½¿ç”¨ã€‚
- ğŸš« ~~`mouse.click*`~~: æ— æ•ˆï¼›ä¸åŒ¹é…ä»»ä½•äº‹ä»¶ã€‚
- ğŸš« ~~`mouse.*.*`~~: æ— æ•ˆï¼›`*` ä¸èƒ½åœ¨äº‹ä»¶æè¿°ç¬¦çš„ä¸­é—´ä½¿ç”¨ã€‚

## å¹¶è¡ŒçŠ¶æ€ä¸­çš„å¤šä¸ªè½¬æ¢

ç”±äºå¹¶è¡ŒçŠ¶æ€å…·æœ‰å¤šä¸ªå¯ä»¥åŒæ—¶å¤„äºæ´»åŠ¨çŠ¶æ€çš„åŒºåŸŸï¼Œå› æ­¤å¯èƒ½ä¼šåŒæ—¶å¯ç”¨å¤šä¸ªè½¬æ¢ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†æ‰§è¡Œæ‰€æœ‰å¯ç”¨çš„è½¬æ¢ã€‚

å¤šä¸ªç›®æ ‡è¢«æŒ‡å®šä¸ºå­—ç¬¦ä¸²æ•°ç»„ï¼š

å³å°†æ¨å‡ºâ€¦ ç¤ºä¾‹ã€‚

## å…¶ä»–è½¬æ¢

- [**æ— äº‹ä»¶ï¼ˆalwaysï¼‰è½¬æ¢**](eventless-transitions.mdx) æ˜¯æ²¡æœ‰äº‹ä»¶çš„è½¬æ¢ã€‚è¿™äº›è½¬æ¢åœ¨å…¶çŠ¶æ€ä¸­çš„ä»»ä½•è½¬æ¢å¯ç”¨å*æ€»æ˜¯*è¢«æ‰§è¡Œã€‚
- [**å»¶è¿Ÿï¼ˆafterï¼‰è½¬æ¢**](delayed-transitions.mdx) æ˜¯åœ¨æŒ‡å®šæŒç»­æ—¶é—´åå¯ç”¨çš„è½¬æ¢ã€‚

## è½¬æ¢æè¿°

æ‚¨å¯ä»¥å‘è½¬æ¢æ·»åŠ  `.description` å­—ç¬¦ä¸²ä»¥æè¿°è½¬æ¢ã€‚è¿™å¯¹äºåœ¨å¯è§†åŒ–çŠ¶æ€æœºä¸­è§£é‡Šè½¬æ¢çš„ç›®çš„éå¸¸æœ‰ç”¨ã€‚

```ts
import { createMachine } from 'xstate';

const feedbackMachine = createMachine({
  // ...
  on: {
    exit: {
      // highlight-next-line
      description: 'Closes the feedback form',
      target: '.closed',
    },
  },
});
```

## ç®€å†™

å¦‚æœè½¬æ¢åªæŒ‡å®šäº†ä¸€ä¸ª `target`ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²ç›®æ ‡ä½œä¸ºç®€å†™ï¼Œè€Œä¸æ˜¯æ•´ä¸ªè½¬æ¢å¯¹è±¡ï¼š

```ts
import { createMachine } from 'xstate';

const feedbackMachine = createMachine({
  initial: 'prompt',
  states: {
    prompt: {
      on: {
        // highlight-start
        // è¿™æ˜¯ä»¥ä¸‹å†…å®¹çš„ç®€å†™ï¼š
        // 'feedback': { target: 'form' }
        'feedback.good': 'thanks',
        // highlight-end
      },
    },
    thanks: {},
    // ...
  },
});
```

ä½¿ç”¨å­—ç¬¦ä¸²ç›®æ ‡ç®€å†™å¯¹äºå¿«é€ŸåŸå‹è®¾è®¡çŠ¶æ€æœºéå¸¸æœ‰ç”¨ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨å®Œæ•´çš„è½¬æ¢å¯¹è±¡è¯­æ³•ï¼Œå› ä¸ºå®ƒå°†ä¸æ‰€æœ‰å…¶ä»–è½¬æ¢å¯¹è±¡ä¿æŒä¸€è‡´ï¼Œå¹¶ä¸”å°†æ¥æ›´å®¹æ˜“å‘è½¬æ¢æ·»åŠ åŠ¨ä½œã€å®ˆå«å’Œå…¶ä»–å±æ€§ã€‚

## TypeScript

:::typescript

**XState v5 éœ€è¦ TypeScript ç‰ˆæœ¬ 5.0 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚**

ä¸ºäº†è·å¾—æœ€ä½³æ•ˆæœï¼Œè¯·ä½¿ç”¨æœ€æ–°çš„ TypeScript ç‰ˆæœ¬ã€‚[é˜…è¯»æ›´å¤šå…³äº XState å’Œ TypeScript çš„ä¿¡æ¯](typescript.mdx)

:::

è½¬æ¢ä¸»è¦ä½¿ç”¨å®ƒä»¬å¯ç”¨çš„äº‹ä»¶ç±»å‹ã€‚

```ts
import { setup } from 'xstate';

const machine = setup({
  types: {
    // highlight-start
    events: {} as
      | { type: 'greet'; message: string }
      | { type: 'submit' }
    // highlight-end
  }
}).createMachine({
  // ...
  on: {
    greet: {
      actions: ({ event }) => {
        event.type; // 'greet'
        event.message; // string
      },
    },
  },
});
```

## å¸¸è§é—®é¢˜ {#faqs}

<details>
<summary>
å¦‚ä½•ç›‘å¬å‘é€ç»™ actor çš„äº‹ä»¶ï¼Ÿ
</summary>

æ‚¨å¯ä»¥ä½¿ç”¨ [inspection API](./inspection.mdx) æ¥ç›‘å¬ actor ç³»ç»Ÿä¸­çš„æ‰€æœ‰æ£€æŸ¥äº‹ä»¶ã€‚`@xstate.event` æ£€æŸ¥äº‹ä»¶åŒ…å«ä»ä¸€ä¸ª actor å‘é€åˆ°å¦ä¸€ä¸ª actorï¼ˆæˆ–è‡ªèº«ï¼‰çš„äº‹ä»¶ä¿¡æ¯ï¼š

```ts
import { createActor } from 'xstate';
import { someMachine } from './someMachine';

const actor = createActor(someMachine, {
  inspect: (inspectionEvent) => {
    if (inspectionEvent.type === '@xstate.event') {
      // highlight-start
      // ä»ä¸€ä¸ª actor å‘é€åˆ°å¦ä¸€ä¸ª actor çš„äº‹ä»¶å¯¹è±¡
      console.log(inspectionEvent.event);
      // highlight-end
    }
  }
});
```

</details>

## è½¬æ¢é€ŸæŸ¥è¡¨

ä½¿ç”¨ä¸‹é¢çš„ XState äº‹ä»¶å’Œè½¬æ¢é€ŸæŸ¥è¡¨å¿«é€Ÿå…¥é—¨ã€‚

### é€ŸæŸ¥è¡¨ï¼šäº‹ä»¶å¯¹è±¡

```ts
feedbackActor.send({
  // äº‹ä»¶ç±»å‹
  type: 'feedback.update',
  // äº‹ä»¶è´Ÿè½½
  feedback: 'A+ would use state machines again',
  rating: 5,
});
```

### é€ŸæŸ¥è¡¨ï¼šè½¬æ¢ç›®æ ‡

```ts
const machine = createMachine({
  initial: 'a',
  states: {
    a: {
      on: {
        // å…„å¼ŸçŠ¶æ€ç›®æ ‡
        event: {
          target: 'b',
        },
        // å…„å¼Ÿå­çŠ¶æ€ç›®æ ‡
        otherEvent: {
          target: 'b.c',
        },
      },
    },
    b: {
      on: {
        // IDç›®æ ‡
        event: {
          target: '#c',
        },
      },
    },
    c: {
      id: 'c',
      on: {
        // å­çŠ¶æ€ç›®æ ‡
        event: {
          target: '.child',
        },
      },
      initial: 'child',
      states: {
        child: {},
      },
    },
  },
  on: {
    // å­çŠ¶æ€ç›®æ ‡
    someEvent: {
      target: '.b',
    },
  },
});
```

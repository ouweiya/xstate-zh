"use strict";(self.webpackChunkstately_docs=self.webpackChunkstately_docs||[]).push([[1826],{59340:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});var s=a(85893),n=a(11151);const o={title:"Koordinates x Stately: geospatial data management case study",description:"Making geographic information systems accessible and collaborative. A Stately and Koordinates case study.",authors:["gavin"],tags:["case study","study","koordinates","stately","state machines","machines","gis","geospatial"],date:new Date("2023-11-28T00:00:00.000Z"),slug:"2023-11-28-koordinates-and-stately-case-study",image:"/blog/2023-11-28-koordinates-and-stately-case-study.png"},i=void 0,r={permalink:"/xstate-zh/blog/2023-11-28-koordinates-and-stately-case-study",editUrl:"https://github.com/statelyai/docs/edit/main/blog/2023-11-28-koordinates-and-stately-case-study/index.mdx",source:"@site/blog/2023-11-28-koordinates-and-stately-case-study/index.mdx",title:"Koordinates x Stately: geospatial data management case study",description:"Making geographic information systems accessible and collaborative. A Stately and Koordinates case study.",date:"2023-11-28T00:00:00.000Z",formattedDate:"November 28, 2023",tags:[{label:"case study",permalink:"/xstate-zh/blog/tags/case-study"},{label:"study",permalink:"/xstate-zh/blog/tags/study"},{label:"koordinates",permalink:"/xstate-zh/blog/tags/koordinates"},{label:"stately",permalink:"/xstate-zh/blog/tags/stately"},{label:"state machines",permalink:"/xstate-zh/blog/tags/state-machines"},{label:"machines",permalink:"/xstate-zh/blog/tags/machines"},{label:"gis",permalink:"/xstate-zh/blog/tags/gis"},{label:"geospatial",permalink:"/xstate-zh/blog/tags/geospatial"}],readingTime:5.375,hasTruncateMarker:!0,authors:[{name:"Gavin Bauman",title:"Stately Team",url:"https://github.com/gavination",imageURL:"https://ascelcgzufjyvdzuplwo.supabase.co/storage/v1/object/public/avatars/gavin.png",key:"gavin"}],frontMatter:{title:"Koordinates x Stately: geospatial data management case study",description:"Making geographic information systems accessible and collaborative. A Stately and Koordinates case study.",authors:["gavin"],tags:["case study","study","koordinates","stately","state machines","machines","gis","geospatial"],date:"2023-11-28T00:00:00.000Z",slug:"2023-11-28-koordinates-and-stately-case-study",image:"/blog/2023-11-28-koordinates-and-stately-case-study.png"},unlisted:!1,prevItem:{title:"XState v5 \u53d1\u5e03\u4e86",permalink:"/xstate-zh/blog/2023-12-01-xstate-v5"},nextItem:{title:"Changelog for our biggest release yet",permalink:"/xstate-zh/blog/2023-11-23-stately-studio-2-0-changelog"}},l={authorsImageUrls:[void 0]},d=[{value:"UI state management",id:"ui-state-management",level:2},{value:"Repository state management",id:"repository-state-management",level:2},{value:"Breaking complex UI\u2019s into manageable components",id:"breaking-complex-uis-into-manageable-components",level:2},{value:"Handling complex, long-running tasks and edge cases",id:"handling-complex-long-running-tasks-and-edge-cases",level:2},{value:"Moving forward with Stately",id:"moving-forward-with-stately",level:2}];function c(e){const t={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...(0,n.a)(),...e.components},{EmbedMachine:a,ThemedImage:o}=t;return a||m("EmbedMachine",!0),o||m("ThemedImage",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"When it came to navigating the complexities of business context and application state, Koordinates found their solution in Stately's tools, reshaping their coding practices and ensuring a seamless user experience."}),"\n","\n",(0,s.jsxs)(t.p,{children:["For more than 15 years, the team at ",(0,s.jsx)(t.a,{href:"https://koordinates.com/",children:"Koordinates"})," has been hard at work reimagining and building streamlined and equitable ways for customers to manage geospatial data. Koordinates have built a massively scaled GIS (Geographic Information Systems) platform for users to upload their own data, query over 18,000 open datasets, and securely merge openly available data with proprietary information.\nUnlike competing products that require vendor lock-in and lack compatibility across the entire GIS stack, Koordinates\u2019 offerings are modular: users may use as much or as little of the tooling as they like, and the tooling is interoperable with existing GIS environments."]}),"\n",(0,s.jsx)("p",{children:(0,s.jsx)(o,{alt:"Koordinates logo",sources:{light:"/blog/2023-11-28-koordinates-and-stately-case-study/koordinates_logo_black.png",dark:"/blog/2023-11-28-koordinates-and-stately-case-study/koordinates_logo_white.png"}})}),"\n",(0,s.jsx)(t.h2,{id:"ui-state-management",children:"UI state management"}),"\n",(0,s.jsx)(t.p,{children:"Koordinates provide their users with both a web app, named Koordinates Cloud, as well as an Electron-based desktop app. In order to filter through and query such large datasets, the team naturally needed to expose a lot of controls for end-user functionality. The frontends for the apps allow end users to accomplish complex tasks, like:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"searching"})," for the right data via the Browser"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"visualizing"})," relevant geospatial information in the Map Viewer"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"automating"})," data management with workflows in the Data Manager"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Managing context and application state was a core concern for the team, and for determining the best framework to manage complex state, they turned to XState."}),"\n",(0,s.jsx)(t.h2,{id:"repository-state-management",children:"Repository state management"}),"\n",(0,s.jsxs)(t.p,{children:["The desktop app Koordinates provides also ships with ",(0,s.jsxs)(t.strong,{children:[(0,s.jsx)(t.a,{href:"https://github.com/koordinates/kart",children:"Kart"}),","]})," an open source version control platform built specifically for large geospatial datasets. Being built on top of Git, Kart provides a familiar user experience for developers used to the version control system. Specifically, Kart allows users to:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"clone"})," geospatial data to users\u2019 local machines"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"manage"})," branches for their datasets - creating, merging, and deleting them"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"roll back"})," branches to previous commits, preserving changes made over time"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"In the case of Kart, many of these operations can be long-running and have several edge cases, making Stately\u2019s tooling to visualize, understand, and execute logic from stateful diagrams a massive benefit."}),"\n",(0,s.jsx)(t.h2,{id:"breaking-complex-uis-into-manageable-components",children:"Breaking complex UI\u2019s into manageable components"}),"\n",(0,s.jsx)(t.p,{children:"In the case of both their products, Koordinates was able to use Stately\u2019s tooling to break their \u201cbig\u201d problems down into several, distinct smaller ones. Taylor Lodge, an engineer on the core team, explained that with Sta tely\u2019s visual editor and simulation tooling, they were able to break their application logic into several small, testable state machines. For example, the UI for Koordinates Cloud has several components, but the logic for loading elements in their list view is represented rather succinctly in this state machine:"}),"\n",(0,s.jsx)(a,{name:"Koordinates List View Machine",embedURL:"https://stately.ai/registry/editor/embed/1b48bbf1-6f7a-4847-b1e0-47ee5c283371?machineId=68b835cc-49fc-4b9c-972e-a63c01465c1f"}),"\n",(0,s.jsxs)(t.p,{children:["There are several potential events that ",(0,s.jsx)(t.em,{children:"can"})," happen, but the core states are relatively few to model this behavior. Instead of representing their entire app state in a monolith, the team decided to go with a more modular approach, making use of the ",(0,s.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Actor_model",children:"actor model"}),". This makes maintaining and testing individual components much easier, and it allows for extensibility down the line as project complexity grows."]}),"\n",(0,s.jsxs)(t.p,{children:["Handling several logical components does come with some considerations, however. Taylor noted that now that the team had several small components, they needed a way to orchestrate and communicate between them in a cohesive manner. Thankfully, the ",(0,s.jsx)(t.a,{href:"https://github.com/statelyai/xstate",children:"XState"})," framework for composing machines is open source, and the team used it as their base for ",(0,s.jsxs)(t.a,{href:"https://github.com/koordinates/xstate-tree",children:[(0,s.jsx)(t.code,{children:"xstate-tree"}),", an open source framework"]})," for modeling complex UIs as a tree of XState machines. ",(0,s.jsx)(t.code,{children:"xstate-tree"})," couples React views with state machines and composes them as actors in \u201cslots\u201d, allowing them to be exposed to their respective React views. Learn more about all the features ",(0,s.jsx)(t.code,{children:"xstate-tree"})," provides in their ",(0,s.jsx)(t.a,{href:"https://github.com/koordinates/xstate-tree",children:"well-documented GitHub repo"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"While there are other state management platforms for developers, the team at Koordinates also wanted the ability to co-locate their implementation logic alongside their machines\u2019 definitions, or \u201cblueprints\u201d. This reduces the surface area developers when revisions need to made to their machines. From Taylor:"}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:["\u201cI love the first class support in XState for side effects. That the side effects can be co-located with my code that triggers it and uses it, instead of having to put them ",(0,s.jsx)(t.em,{children:"somewhere else"})," like with Redux\u201d"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"handling-complex-long-running-tasks-and-edge-cases",children:"Handling complex, long-running tasks and edge cases"}),"\n",(0,s.jsx)(t.p,{children:"Being a source control solution for complex datasets, Kart has a naturally complex set of problems to solve as well. Merging, cloning, and loading data all have plenty of considerations, edge cases, and possible failure scenarios, so the team had to take care to address all of them. The ability to map this logic using the Stately Editor proved to be extremely useful."}),"\n",(0,s.jsx)(a,{name:"Koordinates List View Machine",embedURL:"https://stately.ai/registry/editor/embed/1b48bbf1-6f7a-4847-b1e0-47ee5c283371?machineId=afa23e5f-11c7-460d-bd98-ff7de694a41d"}),"\n",(0,s.jsx)(t.p,{children:"Stately tooling isn\u2019t just for managing UI state. In fact, the logic representing Kart repos is all managed using an XState actor. That actor then watches the filesystem to execute Kart-specific commands and update its own in-memory state."}),"\n",(0,s.jsx)(t.p,{children:"Taylor and the team love Stately\u2019s visual editor. Even without domain knowledge of their core product, the logic is still human readable and understandable. Questions like \u201cwhat happens when a user cancels a clone operation?\u201d and \u201cwhen is the data model for branches updated?\u201d are easily answered by reading the diagram. Diagramming logic in this way ensured the team was able to build Kart\u2019s functionality in a way that is inherently less prone to bugs and plan for potential errors where possible without wasting time over-engineering for cases that could never occur."}),"\n",(0,s.jsx)(t.h2,{id:"moving-forward-with-stately",children:"Moving forward with Stately"}),"\n",(0,s.jsxs)(t.p,{children:["By building with Stately\u2019s tooling, the Koordinates team not only simplified their UI and repository state management, but they in turn gave back to the technical community with ",(0,s.jsx)(t.code,{children:"xstate-tree"}),", allowing React developers to better wrangle hosts of machines. Koordinates and Stately are aligned on many core goals: enhancing productivity for their users, strongly committing to open source, and facilitating team collaboration. Naturally, the Stately team was eager for feedback and have committed to the development of features that enhance collaboration without compromise. This includes GitHub synchronization to maintain the repo as the authoritative source and system-wide statechart visualization to facilitate deeper interdisciplinary communication and understanding."]}),"\n",(0,s.jsxs)(t.p,{children:["Koordinates saw a significant leap in efficiency and team collaboration with Stately's tools. ",(0,s.jsx)(t.a,{href:"https://calendly.com/d/yc8-3hq-rpc/request-a-demo",children:"Book a demo with us today"})," to learn how Stately can empower your team to build better software, faster."]})]})}function h(e={}){const{wrapper:t}={...(0,n.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}function m(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},11151:(e,t,a)=>{a.d(t,{Z:()=>r,a:()=>i});var s=a(67294);const n={},o=s.createContext(n);function i(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);
"use strict";(self.webpackChunkstately_docs=self.webpackChunkstately_docs||[]).push([[2714],{92101:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>i,contentTitle:()=>c,default:()=>l,frontMatter:()=>r,metadata:()=>a,toc:()=>p});var o=n(85893),s=n(11151);const r={title:"Output"},c=void 0,a={id:"output",title:"Output",description:"\u8f93\u51fa\u662f\u6307actor\u751f\u6210\u7684\u6700\u7ec8\u6570\u636e\u3002\u5f53\u4e00\u4e2aactor\u8d1f\u8d23\u6267\u884c\u67d0\u4e9b\u4efb\u52a1\uff08\u4f8b\u5982\u8fdb\u884c\u7f51\u7edc\u8bf7\u6c42\u6216\u8fd0\u884c\u590d\u6742\u8ba1\u7b97\uff09\u65f6\uff0c\u5b83\u5c06\u5728\u5b8c\u6210\u4efb\u52a1\u540e\u8fd4\u56de\u8f93\u51fa\u3002\u8f93\u51fa\u4ee3\u8868actor\u5de5\u4f5c\u7684\u7ed3\u679c\u3002actor\u53ea\u6709\u5728\u5176\u72b6\u6001\u4e3a\u201cdone\u201d\u65f6\u624d\u4f1a\u751f\u6210\u8f93\u51fa\uff1b\u5373\u5f53\u5b83\u4eec\u5904\u4e8e\u6700\u7ec8\u72b6\u6001\u65f6\u3002",source:"@site/docs/output.mdx",sourceDirName:".",slug:"/output",permalink:"/xstate-zh/docs/output",draft:!1,unlisted:!1,editUrl:"https://github.com/statelyai/docs/tree/main/docs/output.mdx",tags:[],version:"current",frontMatter:{title:"Output"},sidebar:"tutorialSidebar",previous:{title:"Input",permalink:"/xstate-zh/docs/input"},next:{title:"\u4e8b\u4ef6\u548c\u8f6c\u6362",permalink:"/xstate-zh/docs/transitions"}},i={},p=[{value:"\u673a\u5668actor\u4e2d\u7684\u8f93\u51fa",id:"\u673a\u5668actor\u4e2d\u7684\u8f93\u51fa",level:2},{value:"Promise actor\u4e2d\u7684\u8f93\u51fa",id:"promise-actor\u4e2d\u7684\u8f93\u51fa",level:2},{value:"\u8f93\u51fa\u4e0eTypeScript",id:"\u8f93\u51fa\u4e0etypescript",level:2}];function u(t){const e={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,s.a)(),...t.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(e.p,{children:["\u8f93\u51fa\u662f\u6307",(0,o.jsx)(e.a,{href:"/xstate-zh/docs/actors",children:"actor"}),"\u751f\u6210\u7684\u6700\u7ec8\u6570\u636e\u3002\u5f53\u4e00\u4e2aactor\u8d1f\u8d23\u6267\u884c\u67d0\u4e9b\u4efb\u52a1\uff08\u4f8b\u5982\u8fdb\u884c\u7f51\u7edc\u8bf7\u6c42\u6216\u8fd0\u884c\u590d\u6742\u8ba1\u7b97\uff09\u65f6\uff0c\u5b83\u5c06\u5728\u5b8c\u6210\u4efb\u52a1\u540e\u8fd4\u56de\u8f93\u51fa\u3002\u8f93\u51fa\u4ee3\u8868actor\u5de5\u4f5c\u7684\u7ed3\u679c\u3002actor\u53ea\u6709\u5728\u5176\u72b6\u6001\u4e3a\u201cdone\u201d\u65f6\u624d\u4f1a\u751f\u6210\u8f93\u51fa\uff1b\u5373\u5f53\u5b83\u4eec\u5904\u4e8e",(0,o.jsx)(e.a,{href:"/xstate-zh/docs/final-states",children:"\u6700\u7ec8\u72b6\u6001"}),"\u65f6\u3002"]}),"\n",(0,o.jsx)(e.p,{children:"\u67d0\u4e9bactor\u53ef\u80fd\u4f1a\u65e0\u9650\u671f\u8fd0\u884c\uff0c\u4e0d\u4f1a\u751f\u6210\u4efb\u4f55\u8f93\u51fa\u3002"}),"\n",(0,o.jsx)(e.h2,{id:"\u673a\u5668actor\u4e2d\u7684\u8f93\u51fa",children:"\u673a\u5668actor\u4e2d\u7684\u8f93\u51fa"}),"\n",(0,o.jsxs)(e.p,{children:["\u9605\u8bfb",(0,o.jsx)(e.a,{href:"/xstate-zh/docs/final-states",children:"\u6700\u7ec8\u72b6\u6001"}),"\u4ee5\u83b7\u53d6\u6709\u5173\u5982\u4f55\u5728\u673a\u5668actor\u4e2d\u6307\u5b9a\u8f93\u51fa\u7684\u66f4\u591a\u4fe1\u606f\u3002"]}),"\n",(0,o.jsx)(e.h2,{id:"promise-actor\u4e2d\u7684\u8f93\u51fa",children:"Promise actor\u4e2d\u7684\u8f93\u51fa"}),"\n",(0,o.jsxs)(e.p,{children:["\u5f53\u4e00\u4e2apromise actor\u89e3\u6790\u65f6\uff0c\u5b83\u53ef\u4ee5\u751f\u6210\u8f93\u51fa\u6570\u636e\u3002\u60a8\u53ef\u4ee5\u5728\u673a\u5668\u7684",(0,o.jsx)(e.code,{children:".output"}),"\u5c5e\u6027\u4e2d\u6307\u5b9a\u8fd9\u4e9b\u8f93\u51fa\u6570\u636e\u3002"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-ts",children:"import { fromPromise, createActor } from 'xstate';\n\nconst promiseLogic = fromPromise(async () => {\n  const response = await fetch('https://example.com');\n\n  return response.json() as { message: string };\n});\n\nconst actor = createActor(promiseLogic);\n\nactor.subscribe(snapshot => {\n  if (snapshot.status === 'done') {\n    console.log(snapshot.output.message);\n  }\n});\n\nactor.start();\n"})}),"\n",(0,o.jsx)(e.h2,{id:"\u8f93\u51fa\u4e0etypescript",children:"\u8f93\u51fa\u4e0eTypeScript"}),"\n",(0,o.jsxs)(e.admonition,{type:"typescript",children:[(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"XState v5 \u9700\u8981 TypeScript \u7248\u672c 5.0 \u6216\u66f4\u9ad8\u7248\u672c\u3002"})}),(0,o.jsxs)(e.p,{children:["\u4e3a\u4e86\u83b7\u5f97\u6700\u4f73\u6548\u679c\uff0c\u8bf7\u4f7f\u7528\u6700\u65b0\u7684 TypeScript \u7248\u672c\u3002",(0,o.jsx)(e.a,{href:"/xstate-zh/docs/typescript",children:"\u9605\u8bfb\u66f4\u591a\u5173\u4e8e XState \u548c TypeScript \u7684\u4fe1\u606f"})]})]}),"\n",(0,o.jsxs)(e.p,{children:["\u53ef\u4ee5\u5728\u673a\u5668\u8bbe\u7f6e\u7684 ",(0,o.jsx)(e.code,{children:".types"})," \u5c5e\u6027\u4e2d\u4e3a ",(0,o.jsx)(e.code,{children:"output"})," \u5c5e\u6027\u6307\u5b9a\u7c7b\u578b\uff1a"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-ts",children:"import { setup, createActor } from 'xstate';\n\nconst machine = setup({\n  // highlight-start\n  types: {\n    output: {} as { total: number }\n  }\n  // highlight-end\n}).createMachine({\n  // ...\n  output: ({ context }) => ({\n    total: context.items.reduce((total, item) => total + item.price, 0),\n  })\n});\n\nconst actor = createActor(machine);\n\nactor.subscribe(snapshot => {\n  if (snapshot.status === 'done') {\n    console.log(snapshot.output.total);\n  }\n});\n"})}),"\n",(0,o.jsxs)(e.p,{children:["\u60a8\u53ef\u4ee5\u4f7f\u7528 ",(0,o.jsx)(e.code,{children:"OutputFrom<typeof actor>"})," \u4ece\u4efb\u4f55 actor \u4e2d\u8bfb\u53d6\u8f93\u51fa\u7c7b\u578b\uff1a"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-ts",children:"import type { OutputFrom } from 'xstate';\nimport { machine } from './machine';\n\nconst actor = createActor(machine);\n\nfunction acceptOutput<T>(output: OutputFrom<typeof actor>) {\n  console.log(output.total);\n}\n"})})]})}function l(t={}){const{wrapper:e}={...(0,s.a)(),...t.components};return e?(0,o.jsx)(e,{...t,children:(0,o.jsx)(u,{...t})}):u(t)}},11151:(t,e,n)=>{n.d(e,{Z:()=>a,a:()=>c});var o=n(67294);const s={},r=o.createContext(s);function c(t){const e=o.useContext(r);return o.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function a(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(s):t.components||s:c(t.components),o.createElement(r.Provider,{value:e},t.children)}}}]);
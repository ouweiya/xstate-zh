"use strict";(self.webpackChunkstately_docs=self.webpackChunkstately_docs||[]).push([[6422],{49022:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>p,frontMatter:()=>c,metadata:()=>a,toc:()=>d});var s=t(85893),r=t(11151);const c={title:"\u5c06\u72b6\u6001\u673a\u8fc1\u79fb\u5230 XState v5",description:"\u8fc1\u79fb\u73b0\u6709 XState v4 \u72b6\u6001\u673a\u5230 XState v5 \u7684\u6307\u5357",tags:["stately","studio","\u91cd\u5927\u53d8\u5316","\u8fc1\u79fb","XState v5","\u72b6\u6001\u673a","xstate"],authors:["kevin"],date:new Date("2024-02-02T00:00:00.000Z"),slug:"2024-02-02-migrating-machines-to-xstate-v5",image:"/blog/2024-02-02-migrating-machines-to-xstate-v5.png"},i=void 0,a={permalink:"/xstate-zh/blog/2024-02-02-migrating-machines-to-xstate-v5",editUrl:"https://github.com/statelyai/docs/edit/main/blog/2024-02-02-migrating-machines-to-xstate-v5/index.mdx",source:"@site/blog/2024-02-02-migrating-machines-to-xstate-v5/index.mdx",title:"\u5c06\u72b6\u6001\u673a\u8fc1\u79fb\u5230 XState v5",description:"\u8fc1\u79fb\u73b0\u6709 XState v4 \u72b6\u6001\u673a\u5230 XState v5 \u7684\u6307\u5357",date:"2024-02-02T00:00:00.000Z",formattedDate:"February 2, 2024",tags:[{label:"stately",permalink:"/xstate-zh/blog/tags/stately"},{label:"studio",permalink:"/xstate-zh/blog/tags/studio"},{label:"\u91cd\u5927\u53d8\u5316",permalink:"/xstate-zh/blog/tags/\u91cd\u5927\u53d8\u5316"},{label:"\u8fc1\u79fb",permalink:"/xstate-zh/blog/tags/\u8fc1\u79fb"},{label:"XState v5",permalink:"/xstate-zh/blog/tags/x-state-v-5"},{label:"\u72b6\u6001\u673a",permalink:"/xstate-zh/blog/tags/\u72b6\u6001\u673a"},{label:"xstate",permalink:"/xstate-zh/blog/tags/xstate"}],readingTime:22.12,hasTruncateMarker:!0,authors:[{name:"Kevin Maes",title:"Stately Team",url:"https://github.com/kevinmaes",imageURL:"https://ascelcgzufjyvdzuplwo.supabase.co/storage/v1/object/public/avatars/kevin.png",key:"kevin"}],frontMatter:{title:"\u5c06\u72b6\u6001\u673a\u8fc1\u79fb\u5230 XState v5",description:"\u8fc1\u79fb\u73b0\u6709 XState v4 \u72b6\u6001\u673a\u5230 XState v5 \u7684\u6307\u5357",tags:["stately","studio","\u91cd\u5927\u53d8\u5316","\u8fc1\u79fb","XState v5","\u72b6\u6001\u673a","xstate"],authors:["kevin"],date:"2024-02-02T00:00:00.000Z",slug:"2024-02-02-migrating-machines-to-xstate-v5",image:"/blog/2024-02-02-migrating-machines-to-xstate-v5.png"},unlisted:!1,prevItem:{title:"Edit a state machine from GitHub without touching any code",permalink:"/xstate-zh/blog/2024-02-07-single-file-pr"},nextItem:{title:"Changelog Week 5 2024",permalink:"/xstate-zh/blog/2024-01-30-changelog"}},o={authorsImageUrls:[void 0]},d=[{value:"1. \u5b89\u88c5 XState v5 \u548c\u4f9d\u8d56\u9879",id:"1-\u5b89\u88c5-xstate-v5-\u548c\u4f9d\u8d56\u9879",level:2},{value:"\u540c\u65f6\u5b89\u88c5 XState v4 \u548c v5",id:"\u540c\u65f6\u5b89\u88c5-xstate-v4-\u548c-v5",level:3},{value:"\u4ece\u7248\u672c\u5316\u5305\u4e2d\u5bfc\u5165",id:"\u4ece\u7248\u672c\u5316\u5305\u4e2d\u5bfc\u5165",level:3},{value:"2. \u5c06\u7c7b\u578b\u79fb\u81f3 <code>setup()</code> \u5e76\u79fb\u9664 typegen",id:"2-\u5c06\u7c7b\u578b\u79fb\u81f3-setup-\u5e76\u79fb\u9664-typegen",level:2},{value:"\u79fb\u9664 typegen",id:"\u79fb\u9664-typegen",level:3},{value:"3. \u5c06\u52a8\u4f5c\u548c\u5b88\u536b\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u53c2\u6570\u5316\u5bf9\u8c61",id:"3-\u5c06\u52a8\u4f5c\u548c\u5b88\u536b\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u53c2\u6570\u5316\u5bf9\u8c61",level:2},{value:"4. \u5728 <code>setup()</code> \u4e2d\u5305\u542b\u5b9e\u73b0\u6216\u5b58\u6839",id:"4-\u5728-setup-\u4e2d\u5305\u542b\u5b9e\u73b0\u6216\u5b58\u6839",level:2},{value:"\u5b58\u6839\u52a8\u4f5c",id:"\u5b58\u6839\u52a8\u4f5c",level:3},{value:"\u5b58\u6839\u5b88\u536b",id:"\u5b58\u6839\u5b88\u536b",level:3},{value:"\u5b58\u6839\u6f14\u5458",id:"\u5b58\u6839\u6f14\u5458",level:3},{value:"\u51cf\u5c11\u5916\u90e8\u4f9d\u8d56",id:"\u51cf\u5c11\u5916\u90e8\u4f9d\u8d56",level:3},{value:"\u4f7f\u7528 <code>input</code> \u6ce8\u5165\u5916\u90e8\u4f9d\u8d56",id:"\u4f7f\u7528-input-\u6ce8\u5165\u5916\u90e8\u4f9d\u8d56",level:4},{value:"\u901a\u8fc7\u53d1\u9001\u4e8b\u4ef6\u6ce8\u5165\u5916\u90e8\u4f9d\u8d56",id:"\u901a\u8fc7\u53d1\u9001\u4e8b\u4ef6\u6ce8\u5165\u5916\u90e8\u4f9d\u8d56",level:4},{value:"5. \u63d0\u4f9b\u5177\u4f53\u5b9e\u73b0",id:"5-\u63d0\u4f9b\u5177\u4f53\u5b9e\u73b0",level:2},{value:"\u63d0\u4f9b\u6f14\u5458\u5b9e\u73b0",id:"\u63d0\u4f9b\u6f14\u5458\u5b9e\u73b0",level:3},{value:"\u5728\u4e3b\u673a\u5668\u914d\u7f6e\u4e2d\u7684\u72b6\u6001\u5185\u6ce8\u518c <code>invoke</code>",id:"\u5728\u4e3b\u673a\u5668\u914d\u7f6e\u4e2d\u7684\u72b6\u6001\u5185\u6ce8\u518c-invoke",level:4},{value:"\u5982\u679c\u5c1a\u672a\u4f20\u9012\u7ed9 <code>setup()</code>\uff0c\u5219\u4e3a\u6f14\u5458\u63d0\u4f9b\u5177\u4f53\u5b9e\u73b0",id:"\u5982\u679c\u5c1a\u672a\u4f20\u9012\u7ed9-setup\u5219\u4e3a\u6f14\u5458\u63d0\u4f9b\u5177\u4f53\u5b9e\u73b0",level:4},{value:"\u6e05\u7406\u548c\u6545\u969c\u6392\u9664",id:"\u6e05\u7406\u548c\u6545\u969c\u6392\u9664",level:2},{value:"\u79fb\u9664 <code>preserveActionOrder</code> \u548c <code>predictableActionArguments</code>",id:"\u79fb\u9664-preserveactionorder-\u548c-predictableactionarguments",level:3},{value:"\u6392\u67e5 TypeScript \u9519\u8bef",id:"\u6392\u67e5-typescript-\u9519\u8bef",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components},{TabItem:c,Tabs:i,YouTube:a}=n;return c||h("TabItem",!0),i||h("Tabs",!0),a||h("YouTube",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["\u6211\u4eec\u6700\u8fd1",(0,s.jsx)(n.a,{href:"/blog/2023-12-01-xstate-v5",children:"\u5ba3\u5e03\u53d1\u5e03 XState v5"}),"! \u5728\u5176\u6d4b\u8bd5\u9636\u6bb5\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a",(0,s.jsx)(n.a,{href:"/docs/migration",children:"\u8fc1\u79fb\u6307\u5357"}),"\uff0c\u4e13\u95e8\u6307\u51fa\u91cd\u5927\u53d8\u5316\uff0c\u5e76\u4e3a\u5f00\u53d1\u4eba\u5458\u63d0\u4f9b\u6709\u5173 API \u66f4\u6539\u7684\u6301\u7eed\u66f4\u65b0\u3002\u672c\u7bc7\u6587\u7ae0\u662f\u4ece v4 \u8fc1\u79fb\u5230 v5 \u7684\u73b0\u6709 XState \u72b6\u6001\u673a\u7684\u6307\u5357\uff0c\u65e8\u5728\u4f5c\u4e3a\u8fc1\u79fb\u6307\u5357\u7684\u9010\u6b65\u4f34\u4fa3\u3002\u5b83\u8fd8\u4fa7\u91cd\u4e8e\u8fc1\u79fb",(0,s.jsx)(n.a,{href:"/docs/typescript",children:"\u4f7f\u7528 TypeScript \u7684 XState \u72b6\u6001\u673a"}),"\u3002"]}),"\n","\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsxs)(n.p,{children:["\u9605\u8bfb",(0,s.jsx)(n.a,{href:"/blog/2023-12-01-xstate-v5",children:"David \u5173\u4e8e XState v5 \u53d1\u5e03\u7684\u535a\u5ba2\u6587\u7ae0"}),"\u3002"]}),(0,s.jsxs)(n.p,{children:["\u559c\u6b22\u89c6\u9891\uff1f",(0,s.jsx)(n.a,{href:"https://www.youtube.com/live/TRVjeil-y74",children:"\u89c2\u770b\u6211\u4eec\u5728 YouTube \u4e0a\u7684 XState v5 \u7f51\u7edc\u7814\u8ba8\u4f1a"}),":"]}),(0,s.jsx)(a,{id:"TRVjeil-y74"})]}),"\n",(0,s.jsxs)(n.p,{children:["\u6211\u4eec\u5728 Stately \u7684 ",(0,s.jsx)(n.a,{href:"https://stately.ai/studio",children:"Stately Studio"})," \u4ee3\u7801\u5e93\u4e2d\u6709\u6570\u5341\u4e2a XState \u72b6\u6001\u673a\uff0c\u5e76\u4e14\u4e5f\u5728\u5c06\u5b83\u4eec\u8fc1\u79fb\u5230 XState v5\u3002\u5728\u54a8\u8be2\u4e86\u6211\u7684\u4e13\u5bb6\u961f\u53cb Mateusz \u540e\uff0c\u6211\u5b66\u5230\u4e86\u5f88\u591a\u5173\u4e8e\u8fc1\u79fb\u8fc7\u7a0b\u7684\u77e5\u8bc6\uff0c\u5e76\u5e0c\u671b\u5206\u4eab\u4e00\u4e9b\u7ecf\u9a8c\uff0c\u4ee5\u4f7f\u60a8\u7684\u8fc1\u79fb\u8fc7\u7a0b\u66f4\u52a0\u987a\u5229\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"\u4ee5\u4e0b\u662f\u60a8\u53ef\u4ee5\u9075\u5faa\u7684\u4e00\u7cfb\u5217\u6b65\u9aa4\uff0c\u4ee5\u5c06\u73b0\u6709\u7684 XState v4 \u72b6\u6001\u673a\u8fc1\u79fb\u5230 XState v5\u3002\u987a\u5e8f\u4ec5\u662f\u5efa\u8bae\uff0c\u800c\u4e0d\u662f\u8981\u6c42\u3002"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#1-install-xstate-v5-and-dependencies",children:"\u5b89\u88c5 XState v5 \u548c\u4f9d\u8d56\u9879"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsxs)(n.a,{href:"#2-move-types-to-setup-and-remove-typegen",children:["\u5c06\u7c7b\u578b\u79fb\u81f3 ",(0,s.jsx)(n.code,{children:"setup()"})," \u5e76\u79fb\u9664 typegen"]})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#3-convert-action-and-guard-strings-to-parameterized-objects",children:"\u5c06\u52a8\u4f5c\u548c\u5b88\u536b\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u53c2\u6570\u5316\u5bf9\u8c61"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsxs)(n.a,{href:"#4-include-implementations-or-stubs-in-setup",children:["\u5728 ",(0,s.jsx)(n.code,{children:"setup()"})," \u4e2d\u5305\u542b\u5b9e\u73b0\u6216\u5b58\u6839"]})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#5-provide-concrete-implementations",children:"\u63d0\u4f9b\u5177\u4f53\u5b9e\u73b0"})}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:"\u5bf9\u4e8e\u6b65\u9aa4 2-5\uff0c\u60a8\u53ef\u80fd\u4f1a\u53d1\u73b0\u66f4\u5bb9\u6613\u5904\u7406\u73b0\u6709\u72b6\u6001\u673a\u7684\u4e00\u5c0f\u90e8\u5206\uff0c\u4f8b\u5982\u4e00\u4e2a\u5355\u4e00\u7684\u4e8b\u4ef6\u6216\u52a8\u4f5c\uff0c\u5e76\u5728\u6b65\u9aa4 2-5 \u4e2d\u5b8c\u5168\u8fc1\u79fb\u5b83\uff0c\u4ee5\u4fbf\u5728\u8fc7\u7a0b\u4e2d\u9694\u79bb TypeScript \u9519\u8bef\u7684\u539f\u56e0\u548c\u4fee\u590d\u3002"})}),"\n",(0,s.jsx)(n.h2,{id:"1-\u5b89\u88c5-xstate-v5-\u548c\u4f9d\u8d56\u9879",children:"1. \u5b89\u88c5 XState v5 \u548c\u4f9d\u8d56\u9879"}),"\n",(0,s.jsxs)(n.p,{children:["\u7b2c\u4e00\u6b65\u662f",(0,s.jsx)(n.a,{href:"/docs/xstate#installation",children:"\u5b89\u88c5 XState v5"}),"\u3002\u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f\u6846\u67b6\u6216\u5e93\uff0c\u60a8\u8fd8\u53ef\u4ee5\u5b89\u88c5\u5176\u4e2d\u4e00\u4e2a\u96c6\u6210\u5305\uff1a"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/xstate-react",children:"React"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/xstate-vue",children:"Vue"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/xstate-svelte",children:"Svelte"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u540c\u65f6\u5b89\u88c5-xstate-v4-\u548c-v5",children:"\u540c\u65f6\u5b89\u88c5 XState v4 \u548c v5"}),"\n",(0,s.jsxs)(n.p,{children:["\u5982\u679c\u60a8\u6709\u8bb8\u591a\u72b6\u6001\u673a\uff0c\u5e76\u5e0c\u671b\u9010\u6b65\u5c06\u5b83\u4eec\u8fc1\u79fb\u5230 v5\uff0c\u60a8\u53ef\u4ee5\u6309\u7167",(0,s.jsx)(n.a,{href:"/docs/migration#how-can-i-use-both-xstate-v4-and-v5",children:"\u8fd9\u91cc\u5217\u51fa\u7684\u8fc1\u79fb\u6b65\u9aa4"}),"\u540c\u65f6\u5b89\u88c5 v4 \u548c v5\u3002\u5b8c\u6210\u8fd9\u4e9b\u6b65\u9aa4\u540e\uff0c\u60a8\u5c06\u5728 ",(0,s.jsx)(n.code,{children:"package.json"})," \u4e2d\u540c\u65f6\u62e5\u6709\u8fd9\u4e24\u4e2a\u4f9d\u8d56\u9879\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u4e3a\u4e86\u5b89\u88c5\u96c6\u6210\u5305\uff0c\u60a8\u9700\u8981",(0,s.jsx)(n.a,{href:"/docs/migration#how-can-i-use-both-xstate-v4-and-v5",children:"\u8fd0\u884c\u4e00\u4e2a\u811a\u672c"}),"\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u5e93\u56fa\u5b9a\u5728\u64b0\u5199\u672c\u6587\u65f6\u7684\u6700\u65b0\u7248\u672c\uff0c\u4f46\u5982\u679c\u60a8\u613f\u610f\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"npm:xstate@latest"}),"\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json5",children:"// \u5b8c\u6210\u8fc1\u79fb\u6307\u5357\u4e2d\u7684\u6b65\u9aa4\u540e\u7684 package.json\n{\n  dependencies: {\n    xstate: '4.38.2',\n    xstate5: 'npm:xstate@5.6.0',\n    '@xstate/react': '3.2.2',\n    '@xstate/react5': 'npm:@xstate/react@4.0.3',\n  },\n}\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["\u6216\u8005\uff0c\u60a8\u4e5f\u53ef\u4ee5\u5c06 ",(0,s.jsx)(n.code,{children:"xstate"})," \u9ed8\u8ba4\u8bbe\u7f6e\u4e3a v5\uff0c\u5e76\u5c06 v4 \u7528\u4e8e ",(0,s.jsx)(n.code,{children:"xstate4"}),"\u3002"]})}),"\n",(0,s.jsx)(n.h3,{id:"\u4ece\u7248\u672c\u5316\u5305\u4e2d\u5bfc\u5165",children:"\u4ece\u7248\u672c\u5316\u5305\u4e2d\u5bfc\u5165"}),"\n",(0,s.jsxs)(n.p,{children:["\u5982\u679c\u540c\u65f6\u4f7f\u7528\u53cc\u91cd\u5b89\u88c5\uff08v4 \u548c v5\uff09\uff0c\u6216\u8005\u5373\u4f7f\u4ec5\u4f7f\u7528 v5\uff0c\u60a8\u90fd\u9700\u8981\u786e\u4fdd\u4ece v5 \u5305\u4e2d\u5bfc\u5165 XState \u51fd\u6570\u3002\u5728\u6587\u4ef6\u7684\u9876\u90e8\uff0c\u4ece ",(0,s.jsx)(n.code,{children:"xstatev5"})," \u5305\u4e2d\u5bfc\u5165 ",(0,s.jsx)(n.code,{children:"setup"}),"\u3001",(0,s.jsx)(n.code,{children:"assign"})," \u548c\u5176\u4ed6\u52a8\u4f5c\u521b\u5efa\u5668\u7b49\u51fd\u6570\u3002"]}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:["\u907f\u514d\u4e0d\u5339\u914d\uff01\u4ece XState v5 \u8c03\u7528 ",(0,s.jsx)(n.code,{children:"createMachine({})"}),"\uff0c\u4f46\u4ece v4 \u5bfc\u5165\u7684 XState \u51fd\u6570\uff08\u5982 ",(0,s.jsx)(n.code,{children:"assign"}),"\uff09\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7c7b\u578b\u9519\u8bef\u3002"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// \u5728 v5 \u673a\u5668\u4e2d...\nconst machine = setup().createMachine({\n  context: {\n    prop: 'defaultValue',\n  },\n  on: {\n    next: {\n      // \u786e\u4fdd\u4ece v5 \u5305\u4e2d\u5bfc\u5165 assign\n      // \u800c\u4e0d\u662f\u4ece v4\uff01\n      actions: assign({ prop: 'value' }),\n    },\n  },\n});\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"2-\u5c06\u7c7b\u578b\u79fb\u81f3-setup-\u5e76\u79fb\u9664-typegen",children:["2. \u5c06\u7c7b\u578b\u79fb\u81f3 ",(0,s.jsx)(n.code,{children:"setup()"})," \u5e76\u79fb\u9664 typegen"]}),"\n",(0,s.jsxs)(n.p,{children:["\u57fa\u4e8e\u91cd\u5927\u53d8\u5316\u7684\u7b2c\u4e00\u4e2a\u8fc1\u79fb\u6b65\u9aa4\u4e4b\u4e00\u662f\u4ece v4 \u7684\u673a\u5668\u914d\u7f6e\u7684 ",(0,s.jsx)(n.code,{children:"schema"})," \u5c5e\u6027\u4e2d\u79fb\u9664\u4efb\u4f55 TypeScript \u7c7b\u578b\u3002\u8fd9\u4e9b\u7c7b\u578b\u73b0\u5728\u5e94\u8be5\u5305\u542b\u5728\u4f20\u9012\u7ed9\u65b0\u7684 ",(0,s.jsx)(n.code,{children:"setup({})"})," \u51fd\u6570\u7684\u5bf9\u8c61\u4e2d\u7684\u65b0 ",(0,s.jsx)(n.code,{children:"types"})," \u5c5e\u6027\u4e0b\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u5728 v5 \u4e2d\u4ecd\u7136\u652f\u6301\u5c06\u7c7b\u578b\u4f20\u9012\u7ed9 ",(0,s.jsx)(n.code,{children:"createMachine({ schema: {} })"}),"\uff0c\u7136\u800c\uff0c\u4f20\u9012\u5b83\u4eec\u7ed9 ",(0,s.jsx)(n.code,{children:"setup({})"})," \u662f\u9996\u9009\uff0c\u56e0\u4e3a\u5b83\u81ea\u52a8\u5c06\u5b9e\u73b0\uff08\u4ee5\u53ca\u66f4\u591a\uff09\u7c7b\u578b\u5316\u3002"]}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)(c,{value:"v4",label:"XState v4",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { createMachine } from 'xstate';\n\nconst machine = createMachine({\n  ...\n  tsTypes: {} as import('./myMachine.typegen').Typegen0,\n  schema: {\n    context: {} as {\n      prop1: string;\n      prop2: number;\n    },\n    events: {} as\n    | {\n        type: 'next';\n        value: number;\n    } | {\n        type: 'back';\n        value: number;\n      };\n    },\n    services: {} as {\n      fetchUserDetails: {\n        data: { email: string, name: string };\n      };\n    },\n  }\n});\n"})})}),(0,s.jsx)(c,{value:"v5",label:"XState v5",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { setup } from 'xstate';\n\nconst machine = setup({\n  types: {} as {\n    context: {\n      prop1: string;\n      prop2: number;\n    };\n    events:\n      | {\n          type: 'next';\n          value: number;\n        }\n      | {\n          type: 'back';\n          value: number;\n        };\n  },\n  /* \u5b9e\u73b0 */\n  actions: {},\n  guards: {},\n  // Actor \u8f93\u5165\u548c\u8f93\u51fa\u7c7b\u578b\u5c06\u5305\u542b\u5728\u8fd9\u91cc\n  actors: {},\n}).createMachine({\n  /* \u673a\u5668\u914d\u7f6e */\n});\n"})})})]}),"\n",(0,s.jsxs)(n.p,{children:["\u5b9a\u4e49\u7c7b\u578b\u65f6\uff0c\u60a8\u53ef\u80fd\u5df2\u7ecf\u5728\u4e4b\u524d\u7684\u793a\u4f8b\u4e2d\u6ce8\u610f\u5230\uff0c\u901a\u5e38\u4f1a\u5c06\u4e00\u4e2a\u7a7a\u5bf9\u8c61\u5f3a\u5236\u8f6c\u6362\u4e3a\u60a8\u5e0c\u671b\u7684\u6bcf\u4e2a\u5c5e\u6027\u7684\u7c7b\u578b\uff0c\u4f8b\u5982 ",(0,s.jsx)(n.code,{children:"events"})," \u548c ",(0,s.jsx)(n.code,{children:"actions"}),"\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const machine = setup({\n  types: {\n    context: {} as {\n      prop1: string;\n      prop2: number;\n    };\n    events: {} as { type: 'next' } | { type: 'next' };\n  },\n})\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u8fd9\u4ecd\u7136\u6709\u6548\uff0c\u4f46\u66f4\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u5c06\u6574\u4e2a\u7c7b\u578b\u5bf9\u8c61\u4e00\u6b21\u6027\u5f3a\u5236\u8f6c\u6362\u4e3a ",(0,s.jsx)(n.code,{children:"types: {} as {}"}),"\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const machine = setup({\n  types: {} as {\n    context: {\n      prop1: string;\n      prop2: number;\n    };\n    events: { type: 'next' } | { type: 'next' };\n  },\n});\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:["\u5728 v5 \u4e2d\u94fe\u63a5 ",(0,s.jsx)(n.code,{children:"setup({ types: {} }).createMachine({})"})," \u65f6\uff0c\u6211\u4eec\u53ea\u80fd\u5728\u4f20\u9012\u7ed9 ",(0,s.jsx)(n.code,{children:"setup"})," \u7684\u5bf9\u8c61\u4e0a\u5b9a\u4e49\u7c7b\u578b\uff0c\u800c\u4e0d\u80fd\u5728\u4f20\u9012\u7ed9 ",(0,s.jsx)(n.code,{children:"createMachine"})," \u7684\u914d\u7f6e\u5bf9\u8c61\u4e0a\u5b9a\u4e49\u7c7b\u578b\u3002"]})}),"\n",(0,s.jsx)(n.h3,{id:"\u79fb\u9664-typegen",children:"\u79fb\u9664 typegen"}),"\n",(0,s.jsxs)(n.p,{children:["Typegen \u5728 XState v5 \u4e2d\u4e0d\u518d\u652f\u6301\uff0c\u56e0\u6b64\u60a8\u53ef\u4ee5\u4ece\u673a\u5668\u914d\u7f6e\u4e2d\u79fb\u9664 ",(0,s.jsx)(n.code,{children:"tsTypes"}),"\u3002\u6ca1\u6709 typegen \u7684\u60c5\u51b5\u4e0b\uff0c\u5728\u52a8\u4f5c\u548c\u5b88\u536b\u4e2d\u952e\u5165\u4e8b\u4ef6\u5fc5\u987b\u901a\u8fc7\u5728\u5b9e\u73b0\u51fd\u6570\u4e2d\u624b\u52a8\u8fdb\u884c\u7c7b\u578b\u7f29\u5c0f\u6765\u5b8c\u6210\u3002\u7136\u800c\uff0c\u4ee5\u4e0b\u90e8\u5206\u5c06\u5411\u60a8\u5c55\u793a\u5982\u4f55\u952e\u5165\u4f20\u9012\u7ed9\u8fd9\u4e9b\u5b9e\u73b0\u7684\u65b0 ",(0,s.jsx)(n.code,{children:"params"})," \u53c2\u6570\uff0c\u5e76\u8df3\u8fc7\u624b\u52a8\u7c7b\u578b\u7f29\u5c0f\u3002"]}),"\n",(0,s.jsx)(n.h2,{id:"3-\u5c06\u52a8\u4f5c\u548c\u5b88\u536b\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u53c2\u6570\u5316\u5bf9\u8c61",children:"3. \u5c06\u52a8\u4f5c\u548c\u5b88\u536b\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u53c2\u6570\u5316\u5bf9\u8c61"}),"\n",(0,s.jsxs)(n.p,{children:["\u6211\u4eec\u53ef\u4ee5\u5c06\u673a\u5668\u914d\u7f6e\u4e2d\u7684\u52a8\u4f5c\u548c\u5b88\u536b\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u53c2\u6570\u5316\u5bf9\u8c61\u3002\u5982\u679c\u5b83\u4eec\u9700\u8981\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"event"})," \u5c5e\u6027\uff0c\u8fd9\u5bf9\u4e8e\u8f6c\u6362\u4e0a\u7684\u52a8\u4f5c\u548c\u5b88\u536b\u7279\u522b\u6709\u5e2e\u52a9\u3002\u8fd9\u5141\u8bb8\u60a8\u663e\u5f0f\u5730\u5c06 ",(0,s.jsx)(n.code,{children:"event"})," \u5c5e\u6027\u6620\u5c04\u5230\u5b9e\u73b0\u51fd\u6570\u7684 ",(0,s.jsx)(n.code,{children:"params"})," \u5bf9\u8c61\uff0c\u4ee5\u4fbf\u5b83\u4eec\u81ea\u52a8\u952e\u5165\uff0c\u5e76\u4e14\u4e0d\u9700\u8981\u989d\u5916\u7684",(0,s.jsx)(n.a,{href:"https://www.typescriptlang.org/docs/handbook/2/narrowing.html",children:"\u7c7b\u578b\u7f29\u5c0f"}),"\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u53e6\u4e00\u65b9\u9762\uff0c\u5982\u679c\u5b83\u4eec\u4ec5\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"context"})," \u503c\uff08\u5df2\u952e\u5165\uff09\uff0c\u60a8\u53ef\u4ee5\u7ee7\u7eed\u4f7f\u7528\u5f15\u7528\u5b57\u7b26\u4e32\u547d\u540d\u7684 ",(0,s.jsx)(n.code,{children:"entry"})," \u548c ",(0,s.jsx)(n.code,{children:"exit"})," \u52a8\u4f5c\u6216\u5b88\u536b\u3002\u751a\u81f3\u53ef\u4ee5\u5728\u914d\u7f6e\u4e2d\u4f7f\u7528\u5185\u8054\u51fd\u6570\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"\u4f8b\u5982\uff0c\u8fd9\u4e9b\u4e8b\u4ef6\u5728 XState v5 \u4e2d\u4ecd\u7136\u5b8c\u5168\u53ef\u4ee5\u50cf\u5728 v4 \u4e2d\u4e00\u6837\u4f7f\u7528\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { setup } from 'xstate';\n\nconst machine = setup({\n  types: {} as {\n    context: {\n      prop1: string;\n    };\n  }\n} })\n.createMachine({\n  states: {\n    first: {\n      entry: 'track',\n      exit: ({ context }) => {\n        console.log(context.prop1, 'is already typed');\n      },\n    },\n  },\n});\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5bf9\u4e8e\u8f6c\u6362\u4e8b\u4ef6\u548c\u5b88\u536b\uff0c\u6211\u4eec\u53ef\u4ee5",(0,s.jsx)(n.a,{href:"/docs/migration#use-params-to-pass-params-to-actions--guards",children:"\u5c06\u547d\u540d\u7684\u52a8\u4f5c\u6216\u5b88\u536b\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u52a8\u4f5c\u5bf9\u8c61"}),"\uff0c\u8fd9\u5141\u8bb8\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u663e\u5f0f\u7684 ",(0,s.jsx)(n.code,{children:"params"})," \u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u5c06\u5728\u8fd0\u884c\u65f6\u7531\u6211\u4eec\u7684\u5b9e\u73b0\u51fd\u6570\u63a5\u6536\u3002\u6709\u4e24\u79cd\u65b9\u6cd5\u53ef\u4ee5\u505a\u5230\u8fd9\u4e00\u70b9\uff1a"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\u6211\u4eec\u53ef\u4ee5\u5c06 ",(0,s.jsx)(n.code,{children:"params"})," \u5b9a\u4e49\u4e3a",(0,s.jsx)(n.a,{href:"/docs/actions#action-objects",children:"\u9759\u6001\u503c"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u4f7f\u7528",(0,s.jsx)(n.a,{href:"/docs/actions#dynamic-action-parameters",children:"\u52a8\u6001\u52a8\u4f5c\u53c2\u6570"}),"\uff0c\u8fd9\u662f\u4e00\u4e2a\u63a5\u6536 ",(0,s.jsx)(n.code,{children:"context"})," \u548c/\u6216 ",(0,s.jsx)(n.code,{children:"event"})," \u7684\u51fd\u6570\uff0c\u5141\u8bb8\u60a8\u5c06\u8fd9\u4e9b\u503c\u6620\u5c04\u5230 ",(0,s.jsx)(n.code,{children:"params"})," \u5bf9\u8c61\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)(c,{value:"v4",label:"XState v4",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { createMachine } from 'xstate';\n\nconst machine = createMachine({\n  on: {\n    next: {\n      actions: ['track'],\n    },\n    back: {\n      actions: ['track'],\n    },\n  },\n});\n"})})}),(0,s.jsx)(c,{value:"v5",label:"XState v5",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { createMachine } from 'xstate';\n\nconst machine = createMachine({\n  on: {\n    next: {\n      actions: [\n        {\n          type: 'track',\n            // \u9759\u6001\u5b9a\u4e49\u7684\u53c2\u6570\n            params: { response: 'good' },\n          },\n          ],\n        },\n        back: {\n          actions: [\n          {\n            type: 'track',\n            // \u52a8\u6001\u5b9a\u4e49\u7684\u53c2\u6570\n          params: ({ event }) => ({\n            rating: event.rating,\n          }),\n        },\n      ],\n    },\n  },\n});\n"})})})]}),"\n",(0,s.jsxs)(n.p,{children:["\u8fd9\u5728 v5 \u4e2d\u53ef\u80fd\u663e\u5f97\u6709\u4e9b\u5197\u957f\uff0c\u4f46\u5b83\u5c06\u5141\u8bb8\u6211\u4eec\u5728\u5b9e\u73b0\u51fd\u6570\u4e2d\u8df3\u8fc7\u624b\u52a8\u7c7b\u578b\u7f29\u5c0f\u3002",(0,s.jsx)(n.code,{children:"params"})," \u5bf9\u8c61\u5c06\u6839\u636e\u6211\u4eec\u6620\u5c04\u5230\u5b83\u7684 ",(0,s.jsx)(n.code,{children:"event"})," \u5c5e\u6027\u81ea\u52a8\u952e\u5165\u3002"]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["\u5728\u6620\u5c04 ",(0,s.jsx)(n.code,{children:"event"})," \u5c5e\u6027\u65f6\uff0c\u60a8\u5b9a\u4e49\u7684\u52a8\u4f5c\u6216\u5b88\u536b ",(0,s.jsx)(n.code,{children:"params"})," \u6280\u672f\u4e0a\u53ef\u4ee5\u662f\u4efb\u4f55\u503c\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u5bf9\u8c61\u3002\u4f46\u5efa\u8bae\u4f7f\u7528\u5bf9\u8c61\u4ee5\u4fdd\u6301\u4e00\u81f4\u6027\uff0c\u5e76\u660e\u786e\u5b9e\u73b0\u51fd\u6570\u5c06\u63a5\u6536\u4ec0\u4e48\u3002"]})}),"\n",(0,s.jsx)(n.p,{children:"\u4ee5\u4e0b\u662f\u5c06\u52a8\u4f5c\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u53c2\u6570\u5316\u52a8\u4f5c\u7684\u66f4\u5b8c\u6574\u793a\u4f8b\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { setup } from 'xstate';\n\nconst machine = setup({\n  types: {} as {\n    events: {\n      type: 'next';\n      prop1: string;\n      prop2: number;\n      prop3: boolean;\n    };\n  },\n  /* \u66f4\u591a\u8bbe\u7f6e */\n}).createMachine({\n  on: {\n    next: {\n      target: 'first',\n      actions: [\n        {\n          guard: {\n            type: 'is this ready',\n            params: ({ event }) => ({ ready: event.ready }),\n          },\n            type: 'doThis',\n            // \u7a0d\u540e\uff0c\u52a8\u4f5c\u5b9e\u73b0\u51fd\u6570\u5c06\u5728\u7b2c\u4e8c\u4e2a\u53c2\u6570 params \u4e2d\u63a5\u6536\u8fd9\u4e2a\u5b57\u7b26\u4e32\u503c\u3002\n            params: ({ event }) => ({ prop1: event.prop1 }),\n          },\n          {\n            type: 'doThat',\n            // \u7a0d\u540e\uff0c\u52a8\u4f5c\u5b9e\u73b0\u51fd\u6570\u5c06\u5728\u7b2c\u4e8c\u4e2a\u53c2\u6570 params \u4e2d\u63a5\u6536\u8fd9\u4e2a\u6570\u503c\u3002\n            params: ({ event }) => ({ prop2: event.prop2 }),\n          },\n          ],\n        },\n        },\n        states: {\n        first: {\n          entry: {\n          type: 'whenEntering',\n          // \u7a0d\u540e\uff0c\u52a8\u4f5c\u5b9e\u73b0\u51fd\u6570\u5c06\u5728\u7b2c\u4e8c\u4e2a\u53c2\u6570 params \u4e2d\u4ec5\u63a5\u6536\u8fd9\u4e24\u4e2a\u503c\u3002\n          params: ({ event }) => ({\n            prop1: event.prop1,\n            prop2: event.prop2,\n          }),\n          },\n          exit: {\n          type: 'whenExiting',\n          // \u7a0d\u540e\uff0c\u52a8\u4f5c\u5b9e\u73b0\u51fd\u6570\u5c06\u5728\u7b2c\u4e8c\u4e2a\u53c2\u6570 params \u4e2d\u4ec5\u63a5\u6536\u8fd9\u4e24\u4e2a\u503c\u3002\n        params: ({ event }) => ({\n          prop2: event.prop2,\n          prop3: event.prop3,\n        }),\n      },\n    },\n  },\n});\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"4-\u5728-setup-\u4e2d\u5305\u542b\u5b9e\u73b0\u6216\u5b58\u6839",children:["4. \u5728 ",(0,s.jsx)(n.code,{children:"setup()"})," \u4e2d\u5305\u542b\u5b9e\u73b0\u6216\u5b58\u6839"]}),"\n",(0,s.jsxs)(n.p,{children:["\u6211\u4eec\u5fc5\u987b\u5728\u4f20\u9012\u7ed9 ",(0,s.jsx)(n.code,{children:"setup()"})," \u7684\u5bf9\u8c61\u4e2d",(0,s.jsx)(n.a,{href:"/docs/machines#providing-implementations",children:"\u63d0\u4f9b\u52a8\u4f5c\u3001\u5b88\u536b\u548c\u6f14\u5458\u7684\u5b9e\u73b0"}),"\u3002\u5982\u679c\u72b6\u6001\u673a\u62e5\u6709\u6267\u884c\u8fd9\u4e9b\u5b9e\u73b0\u6240\u9700\u7684\u4e00\u5207\uff0c\u90a3\u4e48\u8fd9\u4e9b\u5c06\u662f\u5b9e\u9645\u7684\u5b9e\u73b0\u3002\u7136\u800c\uff0c\u5982\u679c\u72b6\u6001\u673a\u9700\u8981\u5f15\u7528\u5916\u90e8\u4e16\u754c\u7684\u4f9d\u8d56\u9879\uff0c\u90a3\u4e48\u8fd9\u4e9b\u5c06\u4f5c\u4e3a\u7a0d\u540e\u88ab\u8986\u76d6\u7684\u5b58\u6839\u3002\u5c06\u5b58\u6839\u548c\u5177\u4f53\u5b9e\u73b0\u7684\u7ec4\u5408\u4f20\u9012\u7ed9 ",(0,s.jsx)(n.code,{children:"setup()"})," \u662f\u5b8c\u5168\u53ef\u4ee5\u7684\u3002"]}),"\n",(0,s.jsxs)(n.admonition,{type:"warning",children:[(0,s.jsxs)(n.p,{children:["\u5728 XState v5 \u4e2d\uff0c\u5b9e\u73b0\u51fd\u6570\u7684\u65b9\u6cd5\u7b7e\u540d\u5df2\u66f4\u6539\u3002\u7b2c\u4e00\u4e2a\u53c2\u6570\u73b0\u5728\u662f\u4e00\u4e2a\u5305\u542b ",(0,s.jsx)(n.code,{children:"context"})," \u548c ",(0,s.jsx)(n.code,{children:"event"})," \u5c5e\u6027\u7684\u5bf9\u8c61\u3002\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f ",(0,s.jsx)(n.code,{children:"params"})," \u5bf9\u8c61\u3002"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"({ context, event }, params: YourParamsType) => {\n  // \u5b9e\u73b0\n};\n"})}),(0,s.jsxs)(n.p,{children:["\u4f7f\u7528 TypeScript \u65f6\uff0c\u6709\u5fc5\u8981\u5bf9\u4f20\u9012\u7ed9\u6bcf\u4e2a\u5b9e\u73b0\u51fd\u6570\u7684\u7b2c\u4e8c\u4e2a ",(0,s.jsx)(n.code,{children:"params"})," \u53c2\u6570\u8fdb\u884c\u7c7b\u578b\u5b9a\u4e49\u3002"]})]}),"\n",(0,s.jsx)(n.h3,{id:"\u5b58\u6839\u52a8\u4f5c",children:"\u5b58\u6839\u52a8\u4f5c"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"setup({\n  actions: {\n    \u6267\u884c\u6b64\u64cd\u4f5c: (_, params: { prop: string }) => {\n      // \u60a8\u53ef\u4ee5\u5728\u6b64\u5904\u5305\u542b\u5177\u4f53\u5b9e\u73b0\n      console.log(params.prop);\n    },\n    // \u5b58\u6839\u5b9e\u73b0\n    \u6267\u884c\u90a3\u64cd\u4f5c: (_, params: { prop: number }) => {},\n    \u8fdb\u5165\u65f6: (_, params: { prop1: string; prop2: number }) => {\n      // \u60a8\u53ef\u4ee5\u5728\u6b64\u5904\u5305\u542b\u5177\u4f53\u5b9e\u73b0\n      console.log(prop1, prop2);\n    },\n    // \u5b58\u6839\u5b9e\u73b0\n    whenExiting: (_, params: { prop2: number; prop3: boolean }) => {},\n  },\n});\n"})}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsxs)(n.p,{children:["\u5b58\u6839\u52a8\u4f5c\u5e94\u5b9a\u4e49\u4e3a\u7a7a\u51fd\u6570\u4f53 ",(0,s.jsx)(n.code,{children:"() => {}"}),"\uff0c\u6216\u8005\u53ef\u4ee5\u5b9a\u4e49\u4e3a\u629b\u51fa\u9519\u8bef\uff0c\u4ee5\u5f3a\u5236\u5b83\u4eec\u7a0d\u540e\u88ab\u8986\u76d6\u3002"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"actionName: (_, params: { prop: string }) => {\n  throw new Error('Not implemented');\n},\n"})})]}),"\n",(0,s.jsxs)(n.p,{children:["\u4efb\u4f55\u4f20\u9012\u7ed9 ",(0,s.jsx)(n.code,{children:"setup()"})," \u7684 ",(0,s.jsx)(n.code,{children:"assign"})," \u52a8\u4f5c\u90fd\u4e0d\u5e94\u9700\u8981\u673a\u5668\u914d\u7f6e\u4e4b\u5916\u7684\u4efb\u4f55\u5185\u5bb9\uff0c\u56e0\u4e3a\u5b83\u4eec\u57fa\u4e8e\u4e0a\u4e0b\u6587\u6216\u7c7b\u578b\u5316\u7684 ",(0,s.jsx)(n.code,{children:"params"})," \u8bbe\u7f6e\u503c\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5b58\u6839\u5b88\u536b",children:"\u5b58\u6839\u5b88\u536b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"setup({\n  guards: {\n    'is this ready': (_, params: { ready: boolean }) => {\n      // \u5177\u4f53\u5b9e\u73b0\n      return ready;\n    },\n    // \u5b58\u6839\u5b9e\u73b0\n    'are we there yet': (_, params: { distance: number }) => false,\n  },\n});\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["\u5b58\u6839\u5b88\u536b\u5fc5\u987b\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u5373 ",(0,s.jsx)(n.code,{children:"true"})," \u6216 ",(0,s.jsx)(n.code,{children:"false"}),"\u3002"]})}),"\n",(0,s.jsx)(n.h3,{id:"\u5b58\u6839\u6f14\u5458",children:"\u5b58\u6839\u6f14\u5458"}),"\n",(0,s.jsxs)(n.p,{children:["\u53ef\u4ee5\u4f7f\u7528\u5b9e\u9645\u7684\u6f14\u5458\u521b\u5efa\u8f85\u52a9\u51fd\u6570\u6765\u5b58\u6839\u8c03\u7528\u7684\u6f14\u5458\uff0c\u8fd9\u5c06\u5728\u5b9e\u9645\u5b9e\u73b0\u4e2d\u4f7f\u7528\u3002\u8fd9\u91cc\u7684\u4e3b\u8981\u76ee\u7684\u662f\u952e\u5165\u6f14\u5458\u7684 ",(0,s.jsx)(n.code,{children:"input"})," \u548c ",(0,s.jsx)(n.code,{children:"output"}),"\u3002\u6709\u4e24\u79cd\u65b9\u6cd5\u53ef\u4ee5\u505a\u5230\u8fd9\u4e00\u70b9\uff1a"]}),"\n",(0,s.jsx)(n.p,{children:"\u7b2c\u4e00\u79cd\u65b9\u6cd5\u66f4\u9002\u7528\u4e8e\u5176\u4ed6\u7c7b\u578b\u7684\u903b\u8f91\u521b\u5efa\u8005\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"setup({\n  actors: {\n    doSomethingAsync: fromPromise(\n      async (_: {\n        input: {\n          inputProp1: string;\n          inputProp2: number;\n        };\n      }): Promise<Item[]> => {\n        throw new Error('Not implemented');\n      },\n    ),\n  },\n});\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"\u5b58\u6839\u7684\u6f14\u5458\u5fc5\u987b\u629b\u51fa\u9519\u8bef\uff0c\u4ee5\u5f3a\u5236\u5b83\u4eec\u7a0d\u540e\u88ab\u8986\u76d6\u3002"})}),"\n",(0,s.jsxs)(n.p,{children:["\u7b2c\u4e8c\u79cd\u65b9\u6cd5\u66f4\u77ed\u4e14\u66f4\u9002\u7528\u4e8e ",(0,s.jsx)(n.code,{children:"fromPromise"}),"\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"setup({\n  actors: {\n    doSomethingAsync: fromPromise<\n      // Promise-wrapped output\n      Item[],\n      // input\n      {\n        inputProp1: string;\n        inputProp2: number;\n      }\n    >(async () => {\n      throw new Error('Not implemented');\n    }),\n  },\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u51cf\u5c11\u5916\u90e8\u4f9d\u8d56",children:"\u51cf\u5c11\u5916\u90e8\u4f9d\u8d56"}),"\n",(0,s.jsx)(n.p,{children:"\u5373\u4f7f\u662f\u72b6\u6001\u673a\u5916\u90e8\u7684\u4f9d\u8d56\u9879\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u65b9\u6cd5\u4e4b\u4e00\u4f7f\u5176\u5728\u72b6\u6001\u673a\u4e2d\u53ef\u7528\uff1a"}),"\n",(0,s.jsxs)(n.h4,{id:"\u4f7f\u7528-input-\u6ce8\u5165\u5916\u90e8\u4f9d\u8d56",children:["\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"input"})," \u6ce8\u5165\u5916\u90e8\u4f9d\u8d56"]}),"\n",(0,s.jsxs)(n.p,{children:["\u5982\u679c\u4f9d\u8d56\u9879\u5728\u72b6\u6001\u673a\u7684\u751f\u547d\u5468\u671f\u5185\u4e0d\u4f1a\u53d1\u751f\u53d8\u5316\uff0c\u90a3\u4e48\u60a8\u53ef\u4ee5\u5c06\u5b83\u4eec\u4f5c\u4e3a ",(0,s.jsx)(n.code,{children:"input"})," \u4f20\u9012\u7ed9 ",(0,s.jsx)(n.code,{children:"setup()"}),"\uff0c\u5b83\u4eec\u5c06\u5728\u72b6\u6001\u673a\u5185\u90e8\u53ef\u7528\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"setup({\n  input: {\n    externalDependency1: someRef,\n    externalDependency2: anotherRef,\n  },\n});\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u901a\u8fc7\u53d1\u9001\u4e8b\u4ef6\u6ce8\u5165\u5916\u90e8\u4f9d\u8d56",children:"\u901a\u8fc7\u53d1\u9001\u4e8b\u4ef6\u6ce8\u5165\u5916\u90e8\u4f9d\u8d56"}),"\n",(0,s.jsxs)(n.p,{children:["\u5982\u679c\u4f9d\u8d56\u9879\u9884\u8ba1\u4f1a\u968f\u7740\u65f6\u95f4\u53d8\u5316\uff0c\u90a3\u4e48\u60a8\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u66f4\u65b0\u4f5c\u4e3a\u4e8b\u4ef6\u53d1\u9001\u5230\u72b6\u6001\u673a\u3002\u4f8b\u5982\uff0c\u5305\u542b\u4f9d\u8d56\u9879\u5f15\u7528\u7684\u4e8b\u4ef6\u53ef\u4ee5\u5b58\u50a8\u5728 ",(0,s.jsx)(n.code,{children:"context"})," \u4e2d\uff0c\u4ee5\u4f9b\u72b6\u6001\u673a\u4f7f\u7528\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"send({\n  type: 'refs.inject',\n  externalDependency,\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u7136\u800c\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6ce8\u5165\u4f9d\u8d56\u9879\u5e76\u4e0d\u53ef\u884c\u6216\u65b9\u4fbf\u3002\u53ef\u80fd\u6709\u592a\u591a\u7684\u4f9d\u8d56\u9879\uff0c\u6216\u8005\u60a8\u53ef\u80fd\u5e0c\u671b\u907f\u514d\u5c06\u5b83\u4eec\u4e0e\u72b6\u6001\u673a\u7d27\u5bc6\u8026\u5408\u3002\u4e0b\u4e00\u8282\u63cf\u8ff0\u4e86\u5982\u4f55\u5728\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u4e2d\u6309\u9700\u63d0\u4f9b\u5177\u4f53\u5b9e\u73b0\uff0c\u4ee5\u8986\u76d6\u5b58\u6839\u5b9e\u73b0\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"5-\u63d0\u4f9b\u5177\u4f53\u5b9e\u73b0",children:"5. \u63d0\u4f9b\u5177\u4f53\u5b9e\u73b0"}),"\n",(0,s.jsxs)(n.p,{children:["Stately Studio \u662f\u4e00\u4e2a NextJS \u5e94\u7528\u7a0b\u5e8f\uff0c\u56e0\u6b64\u6211\u4eec\u5728 React \u7ec4\u4ef6\u4e2d\u4f7f\u7528 ",(0,s.jsx)(n.a,{href:"/docs/xstate-react",children:"@xstate/react"})," \u5305\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"useActorRef()"})," \u94a9\u5b50\u4e3a\u6211\u4eec\u7684\u5b58\u6839\u63d0\u4f9b\u5177\u4f53\u5b9e\u73b0\u3002\u6b64\u94a9\u5b50\u5141\u8bb8\u6211\u4eec\u4f20\u5165\u4e00\u4e2a\u72b6\u6001\u673a\u5e76\u63a5\u6536\u4e00\u4e2a actor \u5f15\u7528\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8be5\u5f15\u7528\u5411\u72b6\u6001\u673a\u53d1\u9001\u4e8b\u4ef6\u3002\u6211\u4eec\u53ef\u4ee5\u5411\u72b6\u6001\u673a\u63d0\u4f9b\u4f9d\u8d56\u9879\uff0c\u4f8b\u5982\u6211\u4eec\u7684\u5177\u4f53\u5b9e\u73b0\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { useActorRef } from '@xstate/react';\n\nconst actorRef = useActorRef(\n  machine.provide({\n    actions: {\n      \u6267\u884c\u90a3\u64cd\u4f5c: (_, prop2) => {\n        // \u5177\u4f53\u5b9e\u73b0\n        console.log(prop2);\n      },\n      whenExiting: (_, params) => {\n        // \u5177\u4f53\u5b9e\u73b0\n        console.log(params.prop2, params.prop3);\n      },\n    },\n  }),\n);\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["\u8c03\u7528 ",(0,s.jsx)(n.code,{children:"machine.provide()"})," \u8fd4\u56de\u76f8\u540c\u7684 ",(0,s.jsx)(n.code,{children:"machine"}),"\uff0c\u4f46\u5e26\u6709\u63d0\u4f9b\u7684\u5b9e\u73b0\u3002\u5982\u679c\u60a8\u5e0c\u671b\u5728\u5e94\u7528\u7a0b\u5e8f\u7684\u591a\u4e2a\u5730\u65b9\u4e3a\u540c\u4e00\u4e2a\u673a\u5668\u7684\u4e0d\u540c\u5b9e\u4f8b\u63d0\u4f9b\u4e0d\u540c\u7684\u5b9e\u73b0\uff0c\u8fd9\u5c06\u975e\u5e38\u6709\u7528\u3002"]})}),"\n",(0,s.jsxs)(n.p,{children:["\u5728\u5176\u4ed6\u7ec4\u4ef6\u4e2d\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u4f7f\u7528\u4e0a\u4e0b\u6587\u63d0\u4f9b\u8005\u5728\u7ec4\u4ef6\u6811\u7684\u5404\u4e2a\u5c42\u6b21\u63d0\u4f9b\u5bf9 ",(0,s.jsx)(n.code,{children:"actorRef"})," \u7684\u8bbf\u95ee\u3002\u53ef\u4ee5\u4f7f\u7528\u673a\u5668\u521b\u5efa\u4e00\u4e2a\u673a\u5668\u4e0a\u4e0b\u6587\u63d0\u4f9b\u8005\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { createMachine } from './machine';\nimport { createActorContext } from '@xstate/react';\n\nconst machine = setup({\n  /* \u8bbe\u7f6e\u914d\u7f6e */\n}).createMachine({\n  /* \u673a\u5668\u914d\u7f6e */\n});\n\nexport const MachineContext = createActorContext(machine);\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u7136\u540e\u53ef\u4ee5\u5728\u7ec4\u4ef6\u6811\u4e2d\u5bfc\u5165\u5e76\u4f7f\u7528\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { MachineContext } from './machine';\n\nfunction App() {\n  return (\n    <MachineContext.Provider\n      logic={machine.provide({\n        actions: {\n            \u6267\u884c\u90a3\u64cd\u4f5c: (_, prop2) => {\n            // \u5177\u4f53\u5b9e\u73b0\n            console.log(prop2);\n            },\n            whenExiting: (_, params) => {\n            // \u5177\u4f53\u5b9e\u73b0\n            console.log(params.prop2, params.prop3);\n          },\n        },\n      })}\n    >\n      {children}\n    </MachineContext.Provider>\n  );\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c",(0,s.jsxs)(n.a,{href:"/docs/xstate-react#createactorcontextlogic",children:["provider \u88ab\u4f20\u9012\u4e86\u4e00\u4e2a ",(0,s.jsx)(n.code,{children:"logic"})," prop"]}),"\uff0c\u5176\u503c\u662f\u5177\u6709\u63d0\u4f9b\u7684\u5b9e\u73b0\u7684\u673a\u5668\u3002\u5728\u7ec4\u4ef6\u6811\u7684\u6700\u5e95\u5c42\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 ",(0,s.jsxs)(n.a,{href:"/docs/xstate-react#useactorrefmachine-options",children:[(0,s.jsx)(n.code,{children:"useActorRef()"})," \u94a9\u5b50"]})," \u6765\u8bbf\u95ee ",(0,s.jsx)(n.code,{children:"actorRef"})," \u5e76\u5411\u673a\u5668\u53d1\u9001\u4e8b\u4ef6\u3002"]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["\u8fd9\u4e9b\u5b9e\u73b0\u51fd\u6570\u4e0d\u9700\u8981\u5728\u8fd9\u91cc\u518d\u6b21\u663e\u5f0f\u952e\u5165\uff0c\u56e0\u4e3a\u4f20\u9012\u7ed9\u5b83\u4eec\u7684 ",(0,s.jsx)(n.code,{children:"params"})," \u53c2\u6570\u5df2\u7ecf\u901a\u8fc7",(0,s.jsxs)(n.a,{href:"#4-include-implementations-or-stubs-in-setup",children:["\u5728\u4e0a\u4e00\u6b65\u4e2d\u4f20\u9012\u7ed9 ",(0,s.jsx)(n.code,{children:"setup()"})," \u51fd\u6570\u7684\u5b9e\u73b0"]}),"\u8fdb\u884c\u4e86\u952e\u5165\u3002"]})}),"\n",(0,s.jsx)(n.h3,{id:"\u63d0\u4f9b\u6f14\u5458\u5b9e\u73b0",children:"\u63d0\u4f9b\u6f14\u5458\u5b9e\u73b0"}),"\n",(0,s.jsx)(n.p,{children:"\u5fc5\u987b\u5b9a\u4e49\u4ee5\u4e0b\u4e09\u4ef6\u4e8b\uff1a"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\u5728 ",(0,s.jsx)(n.code,{children:"setup()"})," \u4e2d\u63d0\u4f9b",(0,s.jsx)(n.a,{href:"#stubbing-actors",children:"\u6f14\u5458\u521b\u5efa\u51fd\u6570\u7684\u5177\u4f53\u5b9e\u73b0\u6216\u5b58\u6839"}),"\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:["\u5728\u4e3b\u673a\u5668\u914d\u7f6e\u4e2d\u7684\u72b6\u6001\u5185\u6ce8\u518c ",(0,s.jsx)(n.code,{children:"invoke"}),"\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:["\u5982\u679c\u5c1a\u672a\u4f20\u9012\u7ed9 ",(0,s.jsx)(n.code,{children:"setup()"}),"\uff0c\u5219\u4e3a\u6f14\u5458\u63d0\u4f9b\u5177\u4f53\u5b9e\u73b0\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"\u5728\u4e3b\u673a\u5668\u914d\u7f6e\u4e2d\u7684\u72b6\u6001\u5185\u6ce8\u518c-invoke",children:["\u5728\u4e3b\u673a\u5668\u914d\u7f6e\u4e2d\u7684\u72b6\u6001\u5185\u6ce8\u518c ",(0,s.jsx)(n.code,{children:"invoke"})]}),"\n",(0,s.jsxs)(n.p,{children:["\u8fd9\u7c7b\u4f3c\u4e8e\u5728 v4 \u4e2d\u6ce8\u518c\u8c03\u7528\u7684\u6f14\u5458\u3002\u4e3b\u8981\u533a\u522b\u5728\u4e8e\u6211\u4eec\u8fd8\u5728\u8fd9\u91cc\u5b9a\u4e49\u4e86 ",(0,s.jsx)(n.code,{children:"input"}),"\uff0c\u5c06\u4e8b\u4ef6\u503c\u6620\u5c04\u5230\u8f93\u5165\u503c\u3002\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"onDone"})," \u548c ",(0,s.jsx)(n.code,{children:"onError"})," \u6ce8\u518c\u7684\u52a8\u4f5c\u4e5f\u88ab\u5b9a\u4e49\u4e3a\u5e26\u6709 ",(0,s.jsx)(n.code,{children:"params"})," \u7684\u5bf9\u8c61\uff0c\u5c31\u50cf",(0,s.jsx)(n.a,{href:"#3-convert-action-and-guard-strings-to-parameterized-objects",children:"\u6211\u4eec\u4e4b\u524d\u5728\u8f6c\u6362\u52a8\u4f5c\u548c\u8fdb\u5165/\u9000\u51fa\u52a8\u4f5c\u4e2d\u770b\u5230\u7684\u90a3\u6837"}),"\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { createMachine } from 'xstate';\n\ncreateMachine({\n  /* \u673a\u5668\u914d\u7f6e */\n  states: {\n    /* \u5176\u4ed6\u72b6\u6001 */\n    someState: {\n      invoke: {\n        src: 'doSomethingAsync', // \u5fc5\u9700\n        id: 'doSomethingAsync', // \u53ef\u9009\n        input: ({ event }) => ({\n          inputProp1: event.prop1,\n          inputProp2: event.prop2,\n        }),\n        onDone: {\n          target: 'Idle',\n          actions: [\n            {\n              type: 'showSuccessToast',\n            },\n            {\n              type: 'handleOutputOnSuccess',\n              params: ({ event }) => event.output,\n            },\n          ],\n        },\n        onError: {\n          target: 'Idle',\n          actions: [{ type: 'showErrorToast' }],\n        },\n      },\n    },\n  },\n});\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"\u5982\u679c\u5c1a\u672a\u4f20\u9012\u7ed9-setup\u5219\u4e3a\u6f14\u5458\u63d0\u4f9b\u5177\u4f53\u5b9e\u73b0",children:["\u5982\u679c\u5c1a\u672a\u4f20\u9012\u7ed9 ",(0,s.jsx)(n.code,{children:"setup()"}),"\uff0c\u5219\u4e3a\u6f14\u5458\u63d0\u4f9b\u5177\u4f53\u5b9e\u73b0"]}),"\n",(0,s.jsxs)(n.p,{children:["\u5982\u679c\u6211\u4eec\u4ec5\u5728 ",(0,s.jsx)(n.code,{children:"setup()"})," \u4e2d\u5b9a\u4e49\u4e86\u6f14\u5458\u521b\u5efa\u51fd\u6570\u7684\u5b58\u6839\uff0c\u90a3\u4e48\u6211\u4eec\u5fc5\u987b\u4e0e\u5176\u4ed6\u5177\u4f53\u5b9e\u73b0\u4e00\u8d77\u4e3a\u6f14\u5458\u63d0\u4f9b\u5177\u4f53\u5b9e\u73b0\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { useActorRef } from '@xstate/react';\n\nconst actorRef = useActorRef(\n  machine.provide({\n    actors: {\n      doSomethingAsync: fromPromise(\n        ({\n          input,\n        }: {\n          input: {\n            inputProp1: string;\n            inputProp2: number;\n          };\n        }) => {\n          return trpcProxyClient.stuff.asyncstuff.mutate(input);\n        },\n      ),\n    },\n  }),\n);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u6e05\u7406\u548c\u6545\u969c\u6392\u9664",children:"\u6e05\u7406\u548c\u6545\u969c\u6392\u9664"}),"\n",(0,s.jsxs)(n.h3,{id:"\u79fb\u9664-preserveactionorder-\u548c-predictableactionarguments",children:["\u79fb\u9664 ",(0,s.jsx)(n.code,{children:"preserveActionOrder"})," \u548c ",(0,s.jsx)(n.code,{children:"predictableActionArguments"})]}),"\n",(0,s.jsxs)(n.p,{children:["\u60a8\u73b0\u5728\u53ef\u4ee5\u4ece\u673a\u5668\u914d\u7f6e\u4e2d\u79fb\u9664 ",(0,s.jsxs)(n.a,{href:"/docs/migration#actions-ordered-by-default-predictableactionarguments-no-longer-needed",children:[(0,s.jsx)(n.code,{children:"preserveActionOrder"})," \u548c ",(0,s.jsx)(n.code,{children:"predictableActionArguments"})]}),"\uff0c\u56e0\u4e3a\u5728 XState v5 \u4e2d\u5b83\u4eec\u4e0d\u518d\u9700\u8981\u3002\u52a8\u4f5c\u73b0\u5728\u9ed8\u8ba4\u6309\u987a\u5e8f\u6267\u884c\uff0c\u5e76\u4e14 ",(0,s.jsxs)(n.a,{href:"/docs/actions#assign-action",children:[(0,s.jsx)(n.code,{children:"assign"})," \u52a8\u4f5c"]})," \u5c06\u59cb\u7ec8\u6309\u5b9a\u4e49\u7684\u987a\u5e8f\u8fd0\u884c\u3002"]}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)(c,{value:"v4",label:"XState v4",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// \u274c \u5df2\u5f03\u7528\nimport { createMachine } from 'xstate';\n\nconst machine = createMachine({\n  preserveActionOrder: true,\n  predictableActionArguments: true,\n  ...\n});\n"})})}),(0,s.jsx)(c,{value:"v5",label:"XState v5",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { setup } from 'xstate';\n\n// preserveActionOrder \u548c\n// predictableActionArguments \u5df2\u88ab\u79fb\u9664\nconst machine = setup({\n  ...\n}).createMachine({\n  ...\n});\n"})})})]}),"\n",(0,s.jsx)(n.h3,{id:"\u6392\u67e5-typescript-\u9519\u8bef",children:"\u6392\u67e5 TypeScript \u9519\u8bef"}),"\n",(0,s.jsxs)(n.p,{children:["\u5728\u8fc1\u79fb\u8fc7\u7a0b\u4e2d\uff0c\u60a8\u53ef\u80fd\u4f1a\u9047\u5230\u8bb8\u591a TypeScript \u9519\u8bef\uff0c\u4e0d\u8981\u6c14\u9981\u3002\u4f8b\u5982\uff0c\u4e3a\u4e86\u5b8c\u5168\u8fc1\u79fb\u673a\u5668\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a ",(0,s.jsx)(n.code,{children:"action"}),"\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u5c06\u5176\u8f6c\u6362\u4e3a\u673a\u5668\u914d\u7f6e\u4e2d\u7684\u53c2\u6570\u5316\u5bf9\u8c61\uff0c\u5e76\u5728 ",(0,s.jsx)(n.code,{children:"setup()"})," \u4e2d\u63d0\u4f9b\u7c7b\u578b\u5316\u7684\u5b9e\u73b0\uff0c\u4ee5\u4fee\u590d TypeScript \u9519\u8bef\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u6b64\u5916\uff0cTypeScript \u53ef\u80fd\u4f1a\u7ee7\u7eed\u5bf9\u4f20\u9012\u7ed9 ",(0,s.jsx)(n.code,{children:"setup()"})," \u7684 ",(0,s.jsx)(n.code,{children:"actions"})," \u5b9e\u73b0\u8fdb\u884c\u62b1\u6028\uff0c\u76f4\u5230\u6700\u540e\u4e00\u4e2a\u52a8\u4f5c\u88ab\u6b63\u786e\u5305\u542b\u548c\u7c7b\u578b\u5316\u3002\u8fd9\u662f\u56e0\u4e3a TypeScript \u4f1a\u4e00\u6b21\u6027\u68c0\u67e5\u6574\u4e2a\u673a\u5668\u914d\u7f6e\u53ca\u5176\u6240\u6709\u5b9e\u73b0\u3002"]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["\u5982\u679c\u60a8\u5728\u673a\u5668\u914d\u7f6e\u4e2d\u7684\u67d0\u4e2a\u72b6\u6001\u540d\u79f0\u4e0b\u770b\u5230 TypeScript \u9519\u8bef\uff0c\u5f88\u53ef\u80fd\u662f\u8be5\u72b6\u6001\u5185\u7684 ",(0,s.jsx)(n.code,{children:"action"})," \u6216 ",(0,s.jsx)(n.code,{children:"guard"})," \u5b58\u5728\u7c7b\u578b\u9519\u8bef\u3002"]})}),"\n",(0,s.jsx)(n.p,{children:"TypeScript \u53ef\u80fd\u96be\u4ee5\u51c6\u786e\u5b9a\u4f4d\u673a\u5668\u914d\u7f6e\u4e2d\u7684\u9519\u8bef\u4f4d\u7f6e\uff0c\u56e0\u6b64\u5b83\u901a\u5e38\u4f1a\u7a81\u51fa\u663e\u793a\u72b6\u6001\u540d\u79f0\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"\u8bef\u5bfc\u6027\u7684 TypeScript \u9519\u8bef\uff0c\u7a81\u51fa\u663e\u793a\u72b6\u6001\uff0c\u800c\u5176\u5185\u90e8\u52a8\u4f5c\u7c7b\u578b\u662f\u95ee\u9898\u6240\u5728",src:t(14860).Z+"",width:"1000",height:"178"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u9519\u8bef\u7684\u771f\u6b63\u6765\u6e90\u662f ",(0,s.jsx)(n.code,{children:"trackUpgradeModalLearnMoreClick"})," \u52a8\u4f5c\u5c1a\u672a\u8f6c\u6362\u4e3a\u52a8\u4f5c\u5bf9\u8c61\u3002\u4fee\u590d\u8be5\u95ee\u9898\u540e\uff0c\u201c\u70b9\u51fb\u4e86\u89e3\u66f4\u591a\u201d\u72b6\u6001\u540d\u79f0\u4e0b\u7684\u9519\u8bef\u5c31\u4f1a\u6d88\u5931\u3002"]}),"\n",(0,s.jsx)(n.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,s.jsx)(n.p,{children:"\u901a\u8fc7\u9075\u5faa\u4e0a\u8ff0\u6b65\u9aa4\uff0c\u60a8\u5e94\u8be5\u80fd\u591f\u5c06\u73b0\u6709\u7684 XState v4 \u673a\u5668\u8fc1\u79fb\u5230 XState v5\uff0c\u5e76\u4f7f\u6240\u6709\u7c7b\u578b\u6b63\u5e38\u5de5\u4f5c\uff0c\u800c\u65e0\u9700\u901a\u8fc7\u65ad\u8a00\u6216\u7c7b\u578b\u5b88\u536b\u8fdb\u884c\u7c7b\u578b\u7f29\u5c0f\u3002"}),"\n",(0,s.jsxs)(n.p,{children:["\u5e0c\u671b\u672c\u6307\u5357\u5bf9\u60a8\u5c06\u73b0\u6709\u7684 XState v4 \u673a\u5668\u8fc1\u79fb\u5230 XState v5 \u6709\u6240\u5e2e\u52a9\u3002\u5982\u679c\u60a8\u6709\u4efb\u4f55\u95ee\u9898\u6216\u53cd\u9988\uff0c\u8bf7",(0,s.jsx)(n.a,{href:"https://discord.gg/xstate",children:"\u5728\u6211\u4eec\u7684 Discord \u4e0a\u8054\u7cfb\u6211\u4eec"}),"\u3002"]})]})}function p(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}function h(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},14860:(e,n,t)=>{t.d(n,{Z:()=>s});const s=t.p+"assets/images/misleading-typescript-error-38a2f69b394c27778aa3d1e3c9898be2.png"},11151:(e,n,t)=>{t.d(n,{Z:()=>a,a:()=>i});var s=t(67294);const r={},c=s.createContext(r);function i(e){const n=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);
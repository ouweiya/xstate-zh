"use strict";(self.webpackChunkstately_docs=self.webpackChunkstately_docs||[]).push([[3983],{4079:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>d});var c=n(85893),s=n(11151);const i={title:"State machine actors(\u72b6\u6001\u673a\u6267\u884c\u8005)"},r=void 0,a={id:"state-machine-actors",title:"State machine actors(\u72b6\u6001\u673a\u6267\u884c\u8005)",description:"\u72b6\u6001\u673a\u6f14\u5458\u662f\u5176\u903b\u8f91\u7531\u6709\u9650\u72b6\u6001\u673a\u6216\u72b6\u6001\u56fe\u8868\u793a\u7684\u6f14\u5458\u3002",source:"@site/docs/state-machine-actors.mdx",sourceDirName:".",slug:"/state-machine-actors",permalink:"/xstate-zh/docs/state-machine-actors",draft:!1,unlisted:!1,editUrl:"https://github.com/ouweiya/xstate-zh/tree/main/docs/state-machine-actors.mdx",tags:[],version:"current",frontMatter:{title:"State machine actors(\u72b6\u6001\u673a\u6267\u884c\u8005)"},sidebar:"tutorialSidebar",previous:{title:"Actors(\u6267\u884c\u8005)",permalink:"/xstate-zh/docs/actors"},next:{title:"Promise actors(Promise\u6267\u884c\u8005)",permalink:"/xstate-zh/docs/promise-actors"}},o={},d=[{value:"\u72b6\u6001\u673a\u6f14\u5458\u529f\u80fd",id:"\u72b6\u6001\u673a\u6f14\u5458\u529f\u80fd",level:2},{value:"\u72b6\u6001\u673a\u6f14\u5458\u903b\u8f91",id:"\u72b6\u6001\u673a\u6f14\u5458\u903b\u8f91",level:2},{value:"\u72b6\u6001\u673a\u6f14\u5458\u8f93\u5165",id:"\u72b6\u6001\u673a\u6f14\u5458\u8f93\u5165",level:2},{value:"\u72b6\u6001\u673a\u6f14\u5458\u8f93\u51fa",id:"\u72b6\u6001\u673a\u6f14\u5458\u8f93\u51fa",level:2}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",span:"span",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.a)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(t.p,{children:"\u72b6\u6001\u673a\u6f14\u5458\u662f\u5176\u903b\u8f91\u7531\u6709\u9650\u72b6\u6001\u673a\u6216\u72b6\u6001\u56fe\u8868\u793a\u7684\u6f14\u5458\u3002"}),"\n",(0,c.jsx)(t.admonition,{type:"xstate",children:(0,c.jsxs)(t.p,{children:["\u672c\u9875\u9762\u53ea\u662f\u5173\u4e8e\u4f7f\u7528\u72b6\u6001\u673a\u8868\u793a\u6f14\u5458\u903b\u8f91\u7684\u6982\u8ff0\u3002\u9605\u8bfb",(0,c.jsx)(t.a,{href:"/xstate-zh/docs/machines",children:"\u72b6\u6001\u673a"}),"\u7684\u6587\u6863\u4ee5\u6df1\u5165\u4e86\u89e3\u72b6\u6001\u673a\u3002"]})}),"\n",(0,c.jsx)(t.h2,{id:"\u72b6\u6001\u673a\u6f14\u5458\u529f\u80fd",children:"\u72b6\u6001\u673a\u6f14\u5458\u529f\u80fd"}),"\n",(0,c.jsxs)(t.table,{children:[(0,c.jsx)(t.thead,{children:(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.th,{}),(0,c.jsx)(t.th,{children:"\u529f\u80fd"}),(0,c.jsx)(t.th,{children:"\u5907\u6ce8"})]})}),(0,c.jsxs)(t.tbody,{children:[(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.td,{children:(0,c.jsx)(t.span,{role:"img","aria-label":"check mark button",children:"\u2705"})}),(0,c.jsx)(t.td,{children:"\u63a5\u6536\u4e8b\u4ef6"}),(0,c.jsxs)(t.td,{children:["\u72b6\u6001\u673a\u6f14\u5458\u53ef\u4ee5\u76f4\u63a5\u63a5\u6536\u4e8b\u4ef6 (",(0,c.jsx)(t.code,{children:"actor.send(event)"}),") \u6216\u4ece\u5176\u4ed6\u6f14\u5458\u63a5\u6536\u4e8b\u4ef6\u3002"]})]}),(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.td,{children:(0,c.jsx)(t.span,{role:"img","aria-label":"check mark button",children:"\u2705"})}),(0,c.jsx)(t.td,{children:"\u53d1\u9001\u4e8b\u4ef6"}),(0,c.jsx)(t.td,{children:"\u72b6\u6001\u673a\u6f14\u5458\u53ef\u4ee5\u5411\u5176\u5f15\u7528\u7684\u5176\u4ed6\u6f14\u5458\u53d1\u9001\u4e8b\u4ef6\u3002"})]}),(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.td,{children:(0,c.jsx)(t.span,{role:"img","aria-label":"check mark button",children:"\u2705"})}),(0,c.jsx)(t.td,{children:"\u751f\u6210\u6f14\u5458"}),(0,c.jsx)(t.td,{children:"\u72b6\u6001\u673a\u6f14\u5458\u53ef\u4ee5\u751f\u6210/\u8c03\u7528\u6f14\u5458\u5e76\u62e5\u6709\u5b50\u6f14\u5458\u3002"})]}),(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.td,{children:(0,c.jsx)(t.span,{role:"img","aria-label":"check mark button",children:"\u2705"})}),(0,c.jsx)(t.td,{children:"\u8f93\u5165"}),(0,c.jsxs)(t.td,{children:["\u4f60\u53ef\u4ee5\u5411\u72b6\u6001\u673a\u6f14\u5458\u63d0\u4f9b",(0,c.jsx)(t.code,{children:"\u8f93\u5165"}),"\u3002"]})]}),(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.td,{children:(0,c.jsx)(t.span,{role:"img","aria-label":"check mark button",children:"\u2705"})}),(0,c.jsx)(t.td,{children:"\u8f93\u51fa"}),(0,c.jsxs)(t.td,{children:["\u72b6\u6001\u673a\u6f14\u5458\u53ef\u4ee5\u4ea7\u751f",(0,c.jsx)(t.code,{children:"\u8f93\u51fa"}),"\u3002"]})]})]})]}),"\n",(0,c.jsx)(t.h2,{id:"\u72b6\u6001\u673a\u6f14\u5458\u903b\u8f91",children:"\u72b6\u6001\u673a\u6f14\u5458\u903b\u8f91"}),"\n",(0,c.jsxs)(t.p,{children:["\u4f60\u53ef\u4ee5\u4f7f\u7528",(0,c.jsx)(t.code,{children:"createMachine(...)"}),"\u6f14\u5458\u903b\u8f91\u521b\u5efa\u5668\u5b9a\u4e49\u72b6\u6001\u673a\u6f14\u5458\u903b\u8f91\uff0c\u8be5\u521b\u5efa\u5668\u4ec5\u63a5\u53d7\u4e00\u4e2a\u6709\u9650\u72b6\u6001\u673a\u6216\u72b6\u6001\u56fe\u914d\u7f6e\u5bf9\u8c61\u4f5c\u4e3a\u5176\u552f\u4e00\u53c2\u6570\u3002"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-ts",children:"import { createMachine, createActor } from 'xstate';\n\nconst toggleMachine = createMachine({\n  initial: 'inactive',\n  states: {\n    inactive: {\n      on: {\n        toggle: {\n          target: 'active'\n        }\n      }\n    },\n    active: {\n      on: {\n        toggle: {\n          target: 'inactive'\n        }\n      }\n    }\n  }\n});\n\nconst toggleActor = createActor(toggleMachine);\ntoggleActor.subscribe(snapshot => {\n  console.log(snapshot.value); // 'inactive' \u6216 'active'\n});\ntoggleActor.start();\n// \u8bb0\u5f55 'inactive'\n\ntoggleActor.send({ type: 'toggle' });\n// \u8bb0\u5f55 'active'\n\ntoggleActor.send({ type: 'toggle' });\n// \u8bb0\u5f55 'inactive'\n"})}),"\n",(0,c.jsx)(t.h2,{id:"\u72b6\u6001\u673a\u6f14\u5458\u8f93\u5165",children:"\u72b6\u6001\u673a\u6f14\u5458\u8f93\u5165"}),"\n",(0,c.jsxs)(t.p,{children:["\u4f60\u53ef\u4ee5\u901a\u8fc7\u5c06",(0,c.jsx)(t.code,{children:"input"}),"\u4f5c\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570\u7684",(0,c.jsx)(t.code,{children:"input"}),"\u5c5e\u6027\u4f20\u9012\u7ed9",(0,c.jsx)(t.code,{children:"createActor(...)"}),"\u51fd\u6570\u6765\u5411\u72b6\u6001\u673a\u6f14\u5458\u4f20\u9012",(0,c.jsx)(t.code,{children:"input"}),"\u3002\u5728\u72b6\u6001\u673a(",(0,c.jsx)(t.code,{children:"setupFiles(\u2026).createMachine(\u2026)"}),")\u4e2d\uff0c\u4f60\u53ef\u4ee5\u8bfb\u53d6\u4f20\u9012\u7ed9",(0,c.jsx)(t.code,{children:"context"}),"\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684",(0,c.jsx)(t.code,{children:"input"}),"\u5c5e\u6027\uff1a"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-ts",children:"import { setup, createActor } from 'xstate';\n\nconst feedbackMachine = setup({\n  // ...\n}).createMachine({\n  context: ({ input }) => ({\n    rating: input.defaultRating\n  }),\n  initial: 'question',\n  states: {\n    question: {/* ... */},\n    // ...\n  }\n});\n\nconst feedbackActor = createActor(feedbackMachine, {\n  // highlight-start\n  input: {\n    defaultRating: 3\n  }\n  // highlight-end\n});\n\nfeedbackActor.subscribe(snapshot => {\n  console.log(snapshot.context);\n});\n\nfeedbackActor.start();\n// logs { rating: 3 }\n"})}),"\n",(0,c.jsx)(t.h2,{id:"\u72b6\u6001\u673a\u6f14\u5458\u8f93\u51fa",children:"\u72b6\u6001\u673a\u6f14\u5458\u8f93\u51fa"}),"\n",(0,c.jsxs)(t.p,{children:["\u9605\u8bfb",(0,c.jsx)(t.a,{href:"/xstate-zh/docs/output",children:"\u72b6\u6001\u673a\u8f93\u51fa"}),"\u4ee5\u83b7\u53d6\u66f4\u591a\u4fe1\u606f\u3002"]})]})}function h(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,c.jsx)(t,{...e,children:(0,c.jsx)(l,{...e})}):l(e)}},11151:(e,t,n)=>{n.d(t,{Z:()=>a,a:()=>r});var c=n(67294);const s={},i=c.createContext(s);function r(e){const t=c.useContext(i);return c.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),c.createElement(i.Provider,{value:t},e.children)}}}]);
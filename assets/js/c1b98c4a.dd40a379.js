"use strict";(self.webpackChunkstately_docs=self.webpackChunkstately_docs||[]).push([[8051],{68163:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>o,frontMatter:()=>i,metadata:()=>d,toc:()=>l});var s=t(85893),r=t(11151);const i={title:"\u5b88\u536b"},a=void 0,d={id:"guards",title:"\u5b88\u536b",description:"\u5b88\u536b \u662f\u72b6\u6001\u673a\u5728\u5904\u7406\u4e8b\u4ef6\u65f6\u68c0\u67e5\u7684\u6761\u4ef6\u51fd\u6570\u3002\u5982\u679c\u6761\u4ef6\u4e3a true\uff0c\u72b6\u6001\u673a\u5c06\u6267\u884c\u5230\u4e0b\u4e00\u4e2a\u72b6\u6001\u7684\u8f6c\u6362\u3002\u5982\u679c\u6761\u4ef6\u4e3a false\uff0c\u72b6\u6001\u673a\u5c06\u7ee7\u7eed\u68c0\u67e5\u5176\u4ed6\u6761\u4ef6\u4ee5\u51b3\u5b9a\u4e0b\u4e00\u4e2a\u72b6\u6001\u3002",source:"@site/docs/guards.mdx",sourceDirName:".",slug:"/guards",permalink:"/xstate-zh/docs/guards",draft:!1,unlisted:!1,editUrl:"https://github.com/ouweiya/xstate-zh/tree/main/docs/guards.mdx",tags:[],version:"current",frontMatter:{title:"\u5b88\u536b"},sidebar:"tutorialSidebar",previous:{title:"Actions",permalink:"/xstate-zh/docs/actions"},next:{title:"\u521d\u59cb\u72b6\u6001",permalink:"/xstate-zh/docs/initial-states"}},c={},l=[{value:"\u591a\u4e2a\u53d7\u5b88\u536b\u4fdd\u62a4\u7684\u8f6c\u6362",id:"\u591a\u4e2a\u53d7\u5b88\u536b\u4fdd\u62a4\u7684\u8f6c\u6362",level:2},{value:"\u5185\u8054\u5b88\u536b",id:"\u5185\u8054\u5b88\u536b",level:2},{value:"\u5b88\u536b\u5bf9\u8c61",id:"\u5b88\u536b\u5bf9\u8c61",level:2},{value:"\u9ad8\u7ea7\u5b88\u536b",id:"\u9ad8\u7ea7\u5b88\u536b",level:2},{value:"\u72b6\u6001\u5185\u5b88\u536b",id:"\u72b6\u6001\u5185\u5b88\u536b",level:2},{value:"\u7b80\u5199",id:"\u7b80\u5199",level:2},{value:"\u5b88\u536b\u4e0e TypeScript",id:"\u5b88\u536b\u4e0e-typescript",level:2},{value:"\u5b88\u536b\u901f\u67e5\u8868",id:"\u5b88\u536b\u901f\u67e5\u8868",level:2},{value:"\u901f\u67e5\u8868\uff1a\u591a\u4e2a\u53d7\u5b88\u536b\u4fdd\u62a4\u7684\u8f6c\u6362",id:"\u901f\u67e5\u8868\u591a\u4e2a\u53d7\u5b88\u536b\u4fdd\u62a4\u7684\u8f6c\u6362",level:3},{value:"\u901f\u67e5\u8868\uff1a\u9ad8\u7ea7\u5b88\u536b",id:"\u901f\u67e5\u8868\u9ad8\u7ea7\u5b88\u536b",level:3},{value:"\u901f\u67e5\u8868\uff1a\u7ec4\u5408\u7684\u9ad8\u7ea7\u5b88\u536b",id:"\u901f\u67e5\u8868\u7ec4\u5408\u7684\u9ad8\u7ea7\u5b88\u536b",level:3}];function h(n){const e={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...n.components},{EmbedMachine:t}=e;return t||function(n,e){throw new Error("Expected "+(e?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}("EmbedMachine",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u5b88\u536b"})," \u662f\u72b6\u6001\u673a\u5728\u5904\u7406\u4e8b\u4ef6\u65f6\u68c0\u67e5\u7684\u6761\u4ef6\u51fd\u6570\u3002\u5982\u679c\u6761\u4ef6\u4e3a ",(0,s.jsx)(e.code,{children:"true"}),"\uff0c\u72b6\u6001\u673a\u5c06\u6267\u884c\u5230\u4e0b\u4e00\u4e2a\u72b6\u6001\u7684\u8f6c\u6362\u3002\u5982\u679c\u6761\u4ef6\u4e3a ",(0,s.jsx)(e.code,{children:"false"}),"\uff0c\u72b6\u6001\u673a\u5c06\u7ee7\u7eed\u68c0\u67e5\u5176\u4ed6\u6761\u4ef6\u4ee5\u51b3\u5b9a\u4e0b\u4e00\u4e2a\u72b6\u6001\u3002"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u53d7\u5b88\u536b\u4fdd\u62a4\u7684\u8f6c\u6362"})," \u662f\u4ec5\u5728\u5176 ",(0,s.jsx)(e.code,{children:"\u5b88\u536b"})," \u8bc4\u4f30\u4e3a ",(0,s.jsx)(e.code,{children:"true"})," \u65f6\u624d\u542f\u7528\u7684\u8f6c\u6362\u3002\u5b88\u536b\u51b3\u5b9a\u4e86\u8f6c\u6362\u662f\u5426\u53ef\u4ee5\u542f\u7528\u3002\u4efb\u4f55\u8f6c\u6362\u90fd\u53ef\u4ee5\u662f\u53d7\u5b88\u536b\u4fdd\u62a4\u7684\u8f6c\u6362\u3002"]}),"\n",(0,s.jsx)(e.admonition,{type:"studio",children:(0,s.jsxs)(e.p,{children:["\u4f60\u53ef\u4ee5\u5728 Stately \u7684\u7f16\u8f91\u5668\u4e2d\u8f7b\u677e\u53ef\u89c6\u5316\u548c\u6a21\u62df\u53d7\u5b88\u536b\u4fdd\u62a4\u7684\u8f6c\u6362\u3002",(0,s.jsx)(e.a,{href:"/docs/editor-states-and-transitions/#add-guards",children:"\u9605\u8bfb\u66f4\u591a\u5173\u4e8e Stately \u7f16\u8f91\u5668\u4e2d\u7684\u5b88\u536b"}),"\u3002"]})}),"\n",(0,s.jsxs)(e.p,{children:["\u5b88\u536b\u5e94\u8be5\u662f\u7eaf\u7684\u3001\u540c\u6b65\u7684\u51fd\u6570\uff0c\u8fd4\u56de ",(0,s.jsx)(e.code,{children:"true"})," \u6216 ",(0,s.jsx)(e.code,{children:"false"}),"\u3002"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"const feedbackMachine = createMachine(\n  {\n    // ...\n    states: {\n      form: {\n        on: {\n          'feedback.submit': {\n            // highlight-next-line\n            guard: 'isValid',\n            target: 'submitting',\n          },\n        },\n      },\n      submitting: {\n        // ...\n      },\n    },\n  },\n  {\n    // highlight-start\n    guards: {\n      isValid: ({ context }) => {\n        return context.feedback.length > 0;\n      },\n    },\n    // highlight-end\n  },\n);\n"})}),"\n",(0,s.jsx)(t,{embedURL:"https://stately.ai/registry/editor/embed/c447d996-cef1-421d-a422-8be695668764?mode=design&machineId=2e91a914-7f83-45fe-9216-e1b5c495a44a",title:"\u5e26\u6709\u5b88\u536b\u7684\u53cd\u9988\u8868\u5355"}),"\n",(0,s.jsx)(e.h2,{id:"\u591a\u4e2a\u53d7\u5b88\u536b\u4fdd\u62a4\u7684\u8f6c\u6362",children:"\u591a\u4e2a\u53d7\u5b88\u536b\u4fdd\u62a4\u7684\u8f6c\u6362"}),"\n",(0,s.jsxs)(e.p,{children:["\u5982\u679c\u4f60\u5e0c\u671b\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u5355\u4e2a\u4e8b\u4ef6\u8f6c\u6362\u5230\u4e0d\u540c\u7684\u72b6\u6001\uff0c\u4f60\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u53d7\u5b88\u536b\u4fdd\u62a4\u7684\u8f6c\u6362\u6570\u7ec4\u3002\u6bcf\u4e2a\u8f6c\u6362\u5c06\u6309\u987a\u5e8f\u8fdb\u884c\u6d4b\u8bd5\uff0c\u7b2c\u4e00\u4e2a ",(0,s.jsx)(e.code,{children:"\u5b88\u536b"})," \u8bc4\u4f30\u4e3a ",(0,s.jsx)(e.code,{children:"true"})," \u7684\u8f6c\u6362\u5c06\u88ab\u6267\u884c\u3002"]}),"\n",(0,s.jsxs)(e.p,{children:["\u4f60\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u9ed8\u8ba4\u8f6c\u6362\u4f5c\u4e3a\u6570\u7ec4\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u8f6c\u6362\u3002\u5982\u679c\u6ca1\u6709\u4e00\u4e2a\u5b88\u536b\u8bc4\u4f30\u4e3a ",(0,s.jsx)(e.code,{children:"true"}),"\uff0c\u5c06\u6267\u884c\u9ed8\u8ba4\u8f6c\u6362\u3002"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"const feedbackMachine = createMachine({\n  // ...\n  prompt: {\n    on: {\n      // highlight-start\n      'feedback.provide': [\n        // \u5982\u679c 'sentimentGood' \u5b88\u536b\u8bc4\u4f30\u4e3a `true`\uff0c\u5219\u6267\u884c\n        {\n          guard: 'sentimentGood',\n          target: 'thanks',\n        },\n        // \u5982\u679c\u4e0a\u8ff0\u53d7\u5b88\u536b\u4fdd\u62a4\u7684\u8f6c\u6362\u90fd\u672a\u6267\u884c\n        // \u4e14 'sentimentBad' \u5b88\u536b\u8bc4\u4f30\u4e3a `true`\uff0c\u5219\u6267\u884c\n        {\n          guard: 'sentimentBad',\n          target: 'form',\n        },\n        // \u9ed8\u8ba4\u8f6c\u6362\n        { target: 'form' },\n      ],\n      // highlight-end\n    },\n  },\n});\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u5185\u8054\u5b88\u536b",children:"\u5185\u8054\u5b88\u536b"}),"\n",(0,s.jsx)(e.p,{children:"\u4f60\u53ef\u4ee5\u5c06\u5b88\u536b\u5b9a\u4e49\u4e3a\u5185\u8054\u51fd\u6570\u3002\u8fd9\u5bf9\u4e8e\u5feb\u901f\u539f\u578b\u8bbe\u8ba1\u903b\u8f91\u975e\u5e38\u6709\u7528\uff0c\u4f46\u6211\u4eec\u901a\u5e38\u63a8\u8350\u4f7f\u7528\u5e8f\u5217\u5316\u7684\u5b88\u536b\uff08\u5b57\u7b26\u4e32\u6216\u5bf9\u8c61\uff09\u4ee5\u4fbf\u66f4\u597d\u5730\u91cd\u7528\u548c\u53ef\u89c6\u5316\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"on: {\n  event: {\n    guard: ({ context, event }) => true,\n    target: 'someState'\n  }\n}\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u5b88\u536b\u5bf9\u8c61",children:"\u5b88\u536b\u5bf9\u8c61"}),"\n",(0,s.jsxs)(e.p,{children:["\u5b88\u536b\u53ef\u4ee5\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u5e26\u6709 ",(0,s.jsx)(e.code,{children:"type"})," \u7684\u5bf9\u8c61\uff0c",(0,s.jsx)(e.code,{children:"type"})," \u662f\u5f15\u7528\u63d0\u4f9b\u7684\u5b88\u536b\u5b9e\u73b0\u7684\u7c7b\u578b\uff0c\u8fd8\u53ef\u4ee5\u6709\u53ef\u9009\u7684 ",(0,s.jsx)(e.code,{children:"params"}),"\uff0c\u8fd9\u4e9b\u53c2\u6570\u53ef\u4ee5\u88ab\u5b9e\u73b0\u7684\u5b88\u536b\u8bfb\u53d6\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"const feedbackMachine = createMachine(\n  {\n    // ...\n    states: {\n      // ...\n      form: {\n        on: {\n          submit: {\n            // highlight-next-line\n            guard: { type: 'isValid', params: { maxLength: 50 } },\n            target: 'submitting',\n          },\n        },\n      },\n      // ...\n    },\n  },\n  {\n    // highlight-start\n    guards: {\n      isValid: ({ context }, params) => {\n        return (\n          context.feedback.length > 0 &&\n          context.feedback.length <= params.maxLength\n        );\n      },\n    },\n    // highlight-end\n  },\n);\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u5b88\u536b\u53ef\u4ee5\u901a\u8fc7\u5728 ",(0,s.jsx)(e.code,{children:".provide()"})," \u65b9\u6cd5\u4e2d\u63d0\u4f9b\u81ea\u5b9a\u4e49\u5b88\u536b\u5b9e\u73b0\u6765\u63d0\u4f9b\u6216\u8986\u76d6\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"const feedbackActor = createActor(\n  // highlight-start\n  feedbackMachine.provide({\n    guards: {\n      isValid: ({ context }, params) => {\n        return (\n          context.feedback.length > 0 &&\n          context.feedback.length <= params.maxLength &&\n          isNotSpam(context.feedback)\n        );\n      },\n    },\n  }),\n  // highlight-end\n).start();\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u9ad8\u7ea7\u5b88\u536b",children:"\u9ad8\u7ea7\u5b88\u536b"}),"\n",(0,s.jsxs)(e.p,{children:["XState \u63d0\u4f9b\u4e86\u9ad8\u7ea7\u5b88\u536b\uff0c\u8fd9\u4e9b\u5b88\u536b\u662f\u7531\u5176\u4ed6\u5b88\u536b\u7ec4\u6210\u7684\u3002\u6709\u4e09\u79cd\u9ad8\u7ea7\u5b88\u536b\u2014\u2014",(0,s.jsx)(e.code,{children:"and"}),"\u3001",(0,s.jsx)(e.code,{children:"or"})," \u548c ",(0,s.jsx)(e.code,{children:"not"}),"\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"and([...])"})," - \u5982\u679c ",(0,s.jsx)(e.code,{children:"and([...guards])"})," \u4e2d\u7684\u6240\u6709\u5b88\u536b\u90fd\u8bc4\u4f30\u4e3a ",(0,s.jsx)(e.code,{children:"true"}),"\uff0c\u5219\u8bc4\u4f30\u4e3a ",(0,s.jsx)(e.code,{children:"true"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"or([...])"})," - \u5982\u679c ",(0,s.jsx)(e.code,{children:"or([...guards])"})," \u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u5b88\u536b\u8bc4\u4f30\u4e3a ",(0,s.jsx)(e.code,{children:"true"}),"\uff0c\u5219\u8bc4\u4f30\u4e3a ",(0,s.jsx)(e.code,{children:"true"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"not(...)"})," - \u5982\u679c ",(0,s.jsx)(e.code,{children:"not(guard)"})," \u4e2d\u7684\u5b88\u536b\u8bc4\u4f30\u4e3a ",(0,s.jsx)(e.code,{children:"false"}),"\uff0c\u5219\u8bc4\u4f30\u4e3a ",(0,s.jsx)(e.code,{children:"true"})]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"on: {\n  event: {\n    guard: and(['isValid', 'isAuthorized']);\n  }\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u9ad8\u7ea7\u5b88\u536b\u53ef\u4ee5\u7ec4\u5408\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"on: {\n  event: {\n    guard: and(['isValid', or(['isAuthorized', 'isGuest'])]);\n  }\n}\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u72b6\u6001\u5185\u5b88\u536b",children:"\u72b6\u6001\u5185\u5b88\u536b"}),"\n",(0,s.jsxs)(e.p,{children:["\u4f60\u53ef\u4ee5\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"stateIn(stateValue)"})," \u5b88\u536b\u6765\u68c0\u67e5\u5f53\u524d\u72b6\u6001\u662f\u5426\u5339\u914d\u63d0\u4f9b\u7684 ",(0,s.jsx)(e.code,{children:"stateValue"}),"\u3002\u8fd9\u5bf9\u4e8e",(0,s.jsx)(e.a,{href:"/xstate-zh/docs/parallel-states",children:"\u5e76\u884c\u72b6\u6001"}),"\u6700\u6709\u7528\u3002"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"on: {\n  event: {\n    guard: stateIn('#state1');\n  },\n  anotherEvent: {\n    guard: stateIn({ form: 'submitting' })\n  }\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u72b6\u6001\u5185\u5b88\u536b\u5339\u914d\u6574\u4e2a\u72b6\u6001\u673a\u7684\u72b6\u6001\uff0c\u800c\u4e0d\u662f\u72b6\u6001\u8282\u70b9\u3002\u901a\u5e38\u4e0d\u9700\u8981\u4e3a\u5e38\u89c4\u72b6\u6001\u4f7f\u7528\u72b6\u6001\u5185\u5b88\u536b\u3002\u9996\u5148\u5c1d\u8bd5\u5728\u72b6\u6001\u673a\u4e2d\u5efa\u6a21\u8f6c\u6362\uff0c\u4ee5\u907f\u514d\u4f7f\u7528\u72b6\u6001\u5185\u5b88\u536b\u3002"}),"\n",(0,s.jsx)(e.h2,{id:"\u7b80\u5199",children:"\u7b80\u5199"}),"\n",(0,s.jsxs)(e.p,{children:["\u5efa\u8bae\u5c06\u5b88\u536b\u5b9a\u4e49\u4e3a\u5b88\u536b\u5bf9\u8c61\uff0c\u4f8b\u5982 ",(0,s.jsx)(e.code,{children:"{ type: 'someGuard', params: { ... } }"}),"\u3002\u4f46\u662f\uff0c\u5982\u679c\u5b88\u536b\u6ca1\u6709\u53c2\u6570\uff0c\u4f60\u53ef\u4ee5\u5c06\u5176\u6307\u5b9a\u4e3a\u5b57\u7b26\u4e32\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"on: {\n  someEvent: {\n    // \u7b49\u6548\u4e8e\uff1a\n    // guard: { type: 'someGuard' }\n    // highlight-next-line\n    guard: 'someGuard';\n  }\n}\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u5b88\u536b\u4e0e-typescript",children:"\u5b88\u536b\u4e0e TypeScript"}),"\n",(0,s.jsxs)(e.admonition,{type:"typescript",children:[(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"XState v5 \u9700\u8981 TypeScript \u7248\u672c 5.0 \u6216\u66f4\u9ad8\u7248\u672c\u3002"})}),(0,s.jsxs)(e.p,{children:["\u4e3a\u4e86\u83b7\u5f97\u6700\u4f73\u6548\u679c\uff0c\u8bf7\u4f7f\u7528\u6700\u65b0\u7684 TypeScript \u7248\u672c\u3002",(0,s.jsx)(e.a,{href:"/xstate-zh/docs/typescript",children:"\u9605\u8bfb\u66f4\u591a\u5173\u4e8e XState \u548c TypeScript \u7684\u4fe1\u606f"})]})]}),"\n",(0,s.jsxs)(e.p,{children:["\u4f60\u53ef\u4ee5\u901a\u8fc7\u5728 ",(0,s.jsx)(e.code,{children:"setup({ guards: { \u2026 } })"})," \u4e2d\u8bbe\u7f6e\u5b88\u536b\u7684\u5b9e\u73b0\u6765\u5f3a\u7c7b\u578b\u5316\u4f60\u7684\u72b6\u6001\u673a\u7684 ",(0,s.jsx)(e.code,{children:"guards"}),"\u3002\u4f60\u53ef\u4ee5\u5728\u5b88\u536b\u51fd\u6570\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e2d\u63d0\u4f9b ",(0,s.jsx)(e.code,{children:"params"})," \u7c7b\u578b\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { setup } from 'xstate';\n\nconst machine = setup({\n  // highlight-start\n  guards: {\n    isGreaterThan: (_, params: { count: number; min: number; }) => {\n      return params.count > params.min;\n    }\n  }\n  // highlight-end\n}).createMachine({\n  // ...\n  on: {\n    someEvent: {\n      guard: {\n        type: 'isGreaterThan',\n        // \u5f3a\u7c7b\u578b\u5316\u7684\u53c2\u6570\n        params: ({ event }) => ({\n          count: event.count,\n          min: 10\n        })\n      },\n      // ...\n    },\n  },\n});\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u5b88\u536b\u901f\u67e5\u8868",children:"\u5b88\u536b\u901f\u67e5\u8868"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { createMachine } from 'xstate';\n\nconst feedbackMachine = createMachine(\n  {\n    // ...\n    states: {\n      form: {\n        on: {\n          'feedback.submit': {\n            // highlight-next-line\n            guard: 'isValid',\n            target: 'submitting',\n          },\n        },\n      },\n      submitting: {\n        // ...\n      },\n    },\n  },\n  {\n    // highlight-start\n    guards: {\n      isValid: ({ context }) => {\n        return context.feedback.length > 0;\n      },\n    },\n    // highlight-end\n  },\n);\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u901f\u67e5\u8868\u591a\u4e2a\u53d7\u5b88\u536b\u4fdd\u62a4\u7684\u8f6c\u6362",children:"\u901f\u67e5\u8868\uff1a\u591a\u4e2a\u53d7\u5b88\u536b\u4fdd\u62a4\u7684\u8f6c\u6362"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { createMachine } from 'xstate';\n\nconst feedbackMachine = createMachine({\n  // ...\n  prompt: {\n    on: {\n      // highlight-start\n      'feedback.provide': [\n        // \u5982\u679c 'sentimentGood' \u5b88\u536b\u8bc4\u4f30\u4e3a `true`\uff0c\u5219\u6267\u884c\n        {\n          guard: 'sentimentGood',\n          target: 'thanks',\n        },\n        // \u5982\u679c\u4e0a\u8ff0\u53d7\u5b88\u536b\u4fdd\u62a4\u7684\u8f6c\u6362\u90fd\u672a\u6267\u884c\n        // \u4e14 'sentimentBad' \u5b88\u536b\u8bc4\u4f30\u4e3a `true`\uff0c\u5219\u6267\u884c\n        {\n          guard: 'sentimentBad',\n          target: 'form',\n        },\n        // \u9ed8\u8ba4\u8f6c\u6362\n        { target: 'form' },\n      ],\n      // highlight-end\n    },\n  },\n});\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u901f\u67e5\u8868\u9ad8\u7ea7\u5b88\u536b",children:"\u901f\u67e5\u8868\uff1a\u9ad8\u7ea7\u5b88\u536b"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { createMachine } from 'xstate';\n\nconst loginMachine = createMachine({\n  on: {\n    event: {\n      guard: and(['isValid', 'isAuthorized']);\n    }\n  }\n});\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u901f\u67e5\u8868\u7ec4\u5408\u7684\u9ad8\u7ea7\u5b88\u536b",children:"\u901f\u67e5\u8868\uff1a\u7ec4\u5408\u7684\u9ad8\u7ea7\u5b88\u536b"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { createMachine } from 'xstate';\n\nconst loginMachine = createMachine({\n  on: {\n    event: {\n      guard: and(['isValid', or(['isAuthorized', 'isGuest'])]);\n    }\n  }\n});\n"})})]})}function o(n={}){const{wrapper:e}={...(0,r.a)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(h,{...n})}):h(n)}},11151:(n,e,t)=>{t.d(e,{Z:()=>d,a:()=>a});var s=t(67294);const r={},i=s.createContext(r);function a(n){const e=s.useContext(i);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:a(n.components),s.createElement(i.Provider,{value:e},n.children)}}}]);
"use strict";(self.webpackChunkstately_docs=self.webpackChunkstately_docs||[]).push([[2041],{37016:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>i,default:()=>h,frontMatter:()=>c,metadata:()=>l,toc:()=>o});var a=n(85893),s=n(11151);const c={title:"XState",slug:"/xstate"},i=void 0,l={id:"xstate",title:"XState",description:"XState \u662f\u4e00\u4e2a\u7528\u4e8e JavaScript \u548c TypeScript \u5e94\u7528\u7684\u72b6\u6001\u7ba1\u7406\u548c\u7f16\u6392\u89e3\u51b3\u65b9\u6848\u3002",source:"@site/docs/xstate.mdx",sourceDirName:".",slug:"/xstate",permalink:"/xstate-zh/docs/xstate",draft:!1,unlisted:!1,editUrl:"https://github.com/statelyai/docs/tree/main/docs/xstate.mdx",tags:[],version:"current",frontMatter:{title:"XState",slug:"/xstate"},sidebar:"tutorialSidebar",previous:{title:"Actor\u6a21\u578b",permalink:"/xstate-zh/docs/actor-model"},next:{title:"Stately Studio",permalink:"/xstate-zh/docs/category/studio"}},r={},o=[{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684\u72b6\u6001\u673a",id:"\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684\u72b6\u6001\u673a",level:2},{value:"\u521b\u5efa\u4e00\u4e2a\u66f4\u590d\u6742\u7684\u72b6\u6001\u673a",id:"\u521b\u5efa\u4e00\u4e2a\u66f4\u590d\u6742\u7684\u72b6\u6001\u673a",level:2},{value:"\u4e0b\u8f7d XState VS Code \u6269\u5c55",id:"\u4e0b\u8f7d-xstate-vs-code-\u6269\u5c55",level:2},{value:"\u5305",id:"\u5305",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",span:"span",ul:"ul",...(0,s.a)(),...e.components},{EmbedMachine:n,TabItem:c,Tabs:i}=t;return n||x("EmbedMachine",!0),c||x("TabItem",!0),i||x("Tabs",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"XState \u662f\u4e00\u4e2a\u7528\u4e8e JavaScript \u548c TypeScript \u5e94\u7528\u7684\u72b6\u6001\u7ba1\u7406\u548c\u7f16\u6392\u89e3\u51b3\u65b9\u6848\u3002"}),"\n",(0,a.jsxs)(t.p,{children:["\u5b83\u4f7f\u7528",(0,a.jsx)(t.a,{href:"/xstate-zh/docs/transitions",children:"\u4e8b\u4ef6\u9a71\u52a8"}),"\u7f16\u7a0b\u3001",(0,a.jsx)(t.a,{href:"/xstate-zh/docs/state-machines-and-statecharts",children:"\u72b6\u6001\u673a\u3001\u72b6\u6001\u56fe"}),"\u548c",(0,a.jsx)(t.a,{href:"/xstate-zh/docs/actor-model",children:"\u6f14\u5458\u6a21\u578b"}),"\u4ee5\u53ef\u9884\u6d4b\u3001\u7a33\u5065\u548c\u53ef\u89c6\u5316\u7684\u65b9\u5f0f\u5904\u7406\u590d\u6742\u903b\u8f91\u3002XState \u63d0\u4f9b\u4e86\u4e00\u79cd\u5f3a\u5927\u4e14\u7075\u6d3b\u7684\u65b9\u5f0f\u6765\u7ba1\u7406\u5e94\u7528\u7a0b\u5e8f\u548c\u5de5\u4f5c\u6d41\u72b6\u6001\uff0c\u5141\u8bb8\u5f00\u53d1\u4eba\u5458\u5c06\u903b\u8f91\u5efa\u6a21\u4e3a\u6f14\u5458\u548c\u72b6\u6001\u673a\u3002\u5b83\u4e0e React\u3001Vue\u3001Svelte \u548c\u5176\u4ed6\u6846\u67b6\u5f88\u597d\u5730\u96c6\u6210\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u524d\u7aef\u3001\u540e\u7aef\u6216\u4efb\u4f55 JavaScript \u8fd0\u884c\u7684\u5730\u65b9\u4f7f\u7528\u3002"]}),"\n",(0,a.jsx)(t.admonition,{type:"tip",children:(0,a.jsxs)(t.p,{children:["\u60f3\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u72b6\u6001\u673a\u7684\u4fe1\u606f\u5417\uff1f",(0,a.jsx)(t.a,{href:"/xstate-zh/docs/state-machines-and-statecharts",children:"\u9605\u8bfb\u6211\u4eec\u7684\u4ecb\u7ecd"}),"\u3002"]})}),"\n",(0,a.jsx)(t.h2,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,a.jsxs)(t.p,{children:["XState \u53ef\u4ee5\u5728 ",(0,a.jsx)(t.a,{href:"https://www.npmjs.com/package/xstate",children:"npm"})," \u4e0a\u83b7\u53d6\uff1a"]}),"\n",(0,a.jsxs)(i,{children:[(0,a.jsx)(c,{value:"npm",label:"npm",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"npm install xstate\n"})})}),(0,a.jsx)(c,{value:"pnpm",label:"pnpm",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"pnpm install xstate\n"})})}),(0,a.jsx)(c,{value:"yarn",label:"yarn",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"yarn add xstate\n"})})})]}),"\n",(0,a.jsx)(t.h2,{id:"\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684\u72b6\u6001\u673a",children:"\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684\u72b6\u6001\u673a"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",children:"import { createMachine, assign, createActor } from 'xstate';\n\nconst countMachine = createMachine({\n  context: {\n    count: 0,\n  },\n  on: {\n    INC: {\n      actions: assign({\n        count: ({ context }) => context.count + 1,\n      }),\n    },\n    DEC: {\n      actions: assign({\n        count: ({ context }) => context.count - 1,\n      }),\n    },\n    SET: {\n      actions: assign({\n        count: ({ event }) => event.value,\n      }),\n    },\n  },\n});\n\nconst countActor = createActor(countMachine).start();\n\ncountActor.subscribe((state) => {\n  console.log(state.context.count);\n});\n\ncountActor.send({ type: 'INC' });\n// logs 1\ncountActor.send({ type: 'DEC' });\n// logs 0\ncountActor.send({ type: 'SET', value: 10 });\n// logs 10\n"})}),"\n",(0,a.jsx)(n,{embedURL:"https://stately.ai/registry/editor/embed/c447d996-cef1-421d-a422-8be695668764?machineId=89e9d8f1-73d6-4dee-92bc-1796270e2f50&mode=design",title:"Simple machine"}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.a,{href:"/xstate-zh/docs/cheatsheet",children:"\u67e5\u770b\u66f4\u591a\u5907\u5fd8\u5355\u793a\u4f8b"}),"."]}),"\n",(0,a.jsx)(t.h2,{id:"\u521b\u5efa\u4e00\u4e2a\u66f4\u590d\u6742\u7684\u72b6\u6001\u673a",children:"\u521b\u5efa\u4e00\u4e2a\u66f4\u590d\u6742\u7684\u72b6\u6001\u673a"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",children:"import { createMachine, assign, createActor } from 'xstate';\n\nconst textMachine = createMachine({\n  context: {\n    committedValue: '',\n    value: '',\n  },\n  initial: 'reading',\n  states: {\n    reading: {\n      on: {\n        'text.edit': { target: 'editing' },\n      },\n    },\n    editing: {\n      on: {\n        'text.change': {\n          actions: assign({\n            value: ({ event }) => event.value,\n          }),\n        },\n        'text.commit': {\n          actions: assign({\n            committedValue: ({ context }) => context.value,\n          }),\n          target: 'reading',\n        },\n        'text.cancel': {\n          actions: assign({\n            value: ({ context }) => context.committedValue,\n          }),\n          target: 'reading',\n        },\n      },\n    },\n  },\n});\n\nconst textActor = createActor(textMachine).start();\n\ntextActor.subscribe((state) => {\n  console.log(state.context.value);\n});\n\ntextActor.send({ type: 'text.edit' });\n// logs ''\ntextActor.send({ type: 'text.change', value: 'Hello' });\n// logs 'Hello'\ntextActor.send({ type: 'text.commit' });\n// logs 'Hello'\ntextActor.send({ type: 'text.edit' });\n// logs 'Hello'\ntextActor.send({ type: 'text.change', value: 'Hello world' });\n// logs 'Hello world'\ntextActor.send({ type: 'text.cancel' });\n// logs 'Hello'\n"})}),"\n",(0,a.jsx)(n,{embedURL:"https://stately.ai/registry/editor/embed/c447d996-cef1-421d-a422-8be695668764?mode=design&machineId=fa84c2d4-7c42-4f67-8bde-66f972133703",title:"more complex machine"}),"\n",(0,a.jsx)(t.h2,{id:"\u4e0b\u8f7d-xstate-vs-code-\u6269\u5c55",children:"\u4e0b\u8f7d XState VS Code \u6269\u5c55"}),"\n",(0,a.jsx)(t.admonition,{type:"warningxstate",children:(0,a.jsx)(t.p,{children:"XState VS Code \u6269\u5c55\u5c1a\u672a\u5b8c\u5168\u652f\u6301 XState v5\u3002"})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"https://marketplace.visualstudio.com/items?itemName=statelyai.stately-vscode",children:"Visual Studio Marketplace"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"https://open-vsx.org/extension/statelyai/stately-vscode",children:"Open VSX Registry"})}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.a,{href:"/xstate-zh/docs/developer-tools",children:"\u9605\u8bfb\u66f4\u591a\u5173\u4e8e\u6211\u4eec\u7684\u5f00\u53d1\u8005\u5de5\u5177"}),"\u3002"]}),"\n",(0,a.jsx)(t.h2,{id:"\u5305",children:"\u5305"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.span,{role:"img","aria-label":"robot",children:"\ud83e\udd16"})," ",(0,a.jsx)(t.a,{href:"https://github.com/statelyai/xstate/",children:"xstate"}),": \u6838\u5fc3\u6709\u9650\u72b6\u6001\u673a\u548c\u72b6\u6001\u56fe\u5e93 + \u6f14\u5458"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.span,{role:"img","aria-label":"chart decreasing",children:"\ud83d\udcc9"})," ",(0,a.jsx)(t.a,{href:"https://github.com/statelyai/xstate/tree/main/packages/xstate-graph",children:"@xstate/graph"}),": XState \u7684\u56fe\u904d\u5386\u5de5\u5177"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.span,{role:"img","aria-label":"atom symbol",children:"\u269b\ufe0f"})," ",(0,a.jsx)(t.a,{href:"https://github.com/statelyai/xstate/tree/main/packages/xstate-react",children:"@xstate/react"}),": \u5728 React \u5e94\u7528\u4e2d\u4f7f\u7528 XState \u7684 React hooks \u548c\u5de5\u5177"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.span,{role:"img","aria-label":"green heart",children:"\ud83d\udc9a"})," ",(0,a.jsx)(t.a,{href:"https://github.com/statelyai/xstate/tree/main/packages/xstate-vue",children:"@xstate/vue"}),": \u5728 Vue \u5e94\u7528\u4e2d\u4f7f\u7528 XState \u7684 Vue \u7ec4\u5408\u51fd\u6570\u548c\u5de5\u5177"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.span,{role:"img","aria-label":"saxophone",children:"\ud83c\udfb7"})," ",(0,a.jsx)(t.a,{href:"https://github.com/statelyai/xstate/tree/main/packages/xstate-svelte",children:"@xstate/svelte"}),": \u5728 Svelte \u5e94\u7528\u4e2d\u4f7f\u7528 XState \u7684 Svelte \u5de5\u5177"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.span,{role:"img","aria-label":"check mark button",children:"\u2705"})," ",(0,a.jsx)(t.a,{href:"https://github.com/statelyai/xstate/tree/main/packages/xstate-test",children:"@xstate/test"}),": \u7528\u4e8e\u6d4b\u8bd5\u4efb\u4f55\u8f6f\u4ef6\u7684\u57fa\u4e8e\u6a21\u578b\u7684\u6d4b\u8bd5\u5de5\u5177\uff08\u4f7f\u7528 XState\uff09"]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}function x(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},11151:(e,t,n)=>{n.d(t,{Z:()=>l,a:()=>i});var a=n(67294);const s={},c=a.createContext(s);function i(e){const t=a.useContext(c);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(c.Provider,{value:t},e.children)}}}]);
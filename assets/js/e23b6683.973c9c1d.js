"use strict";(self.webpackChunkstately_docs=self.webpackChunkstately_docs||[]).push([[1842],{20569:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>i,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var n=a(85893),o=a(11151);const r={title:"\u4ec0\u4e48\u662fActor\u6a21\u578b\u4ee5\u53ca\u4f55\u65f6\u4f7f\u7528\u5b83\uff1f",description:"\u5728Stately\uff0cActor\u6a21\u578b\u662f\u6211\u4eec\u6700\u559c\u6b22\u7684\u7f16\u7a0b\u8303\u5f0f\u4e4b\u4e00\uff0c\u6211\u4eec\u8ba4\u4e3a\u8fd9\u662f\u6709\u5145\u5206\u7406\u7531\u7684\uff01",tags:["actor model","modeling","statechart","tutorials","state machine","typescript","blog"],authors:["gavin"],slug:"what-is-the-actor-model",image:"/blog/2023-5-30-what-is-the-actor-model-and-when-should-i-use-it.png",date:new Date("2023-05-30T00:00:00.000Z")},c=void 0,s={permalink:"/xstate-zh/blog/what-is-the-actor-model",editUrl:"https://github.com/statelyai/docs/edit/main/blog/2023-5-30-what-is-the-actor-model-and-when-should-i-use-it/index.mdx",source:"@site/blog/2023-5-30-what-is-the-actor-model-and-when-should-i-use-it/index.mdx",title:"\u4ec0\u4e48\u662fActor\u6a21\u578b\u4ee5\u53ca\u4f55\u65f6\u4f7f\u7528\u5b83\uff1f",description:"\u5728Stately\uff0cActor\u6a21\u578b\u662f\u6211\u4eec\u6700\u559c\u6b22\u7684\u7f16\u7a0b\u8303\u5f0f\u4e4b\u4e00\uff0c\u6211\u4eec\u8ba4\u4e3a\u8fd9\u662f\u6709\u5145\u5206\u7406\u7531\u7684\uff01",date:"2023-05-30T00:00:00.000Z",formattedDate:"May 30, 2023",tags:[{label:"actor model",permalink:"/xstate-zh/blog/tags/actor-model"},{label:"modeling",permalink:"/xstate-zh/blog/tags/modeling"},{label:"statechart",permalink:"/xstate-zh/blog/tags/statechart"},{label:"tutorials",permalink:"/xstate-zh/blog/tags/tutorials"},{label:"state machine",permalink:"/xstate-zh/blog/tags/state-machine"},{label:"typescript",permalink:"/xstate-zh/blog/tags/typescript"},{label:"blog",permalink:"/xstate-zh/blog/tags/blog"}],readingTime:6.505,hasTruncateMarker:!0,authors:[{name:"Gavin Bauman",title:"Stately Team",url:"https://github.com/gavination",imageURL:"https://ascelcgzufjyvdzuplwo.supabase.co/storage/v1/object/public/avatars/gavin.png",key:"gavin"}],frontMatter:{title:"\u4ec0\u4e48\u662fActor\u6a21\u578b\u4ee5\u53ca\u4f55\u65f6\u4f7f\u7528\u5b83\uff1f",description:"\u5728Stately\uff0cActor\u6a21\u578b\u662f\u6211\u4eec\u6700\u559c\u6b22\u7684\u7f16\u7a0b\u8303\u5f0f\u4e4b\u4e00\uff0c\u6211\u4eec\u8ba4\u4e3a\u8fd9\u662f\u6709\u5145\u5206\u7406\u7531\u7684\uff01",tags:["actor model","modeling","statechart","tutorials","state machine","typescript","blog"],authors:["gavin"],slug:"what-is-the-actor-model",image:"/blog/2023-5-30-what-is-the-actor-model-and-when-should-i-use-it.png",date:"2023-05-30T00:00:00.000Z"},unlisted:!1,prevItem:{title:"Generate test paths and create machines faster than ever before",permalink:"/xstate-zh/blog/2023-11-03-generate-test-paths-and-create-machines-faster"}},i={authorsImageUrls:[void 0]},l=[{value:"\u4ec0\u4e48\u662fActor\u6a21\u578b\uff1f",id:"\u4ec0\u4e48\u662factor\u6a21\u578b",level:2},{value:"\u4f55\u65f6\u4f7f\u7528\u5b83\uff1f",id:"\u4f55\u65f6\u4f7f\u7528\u5b83",level:2},{value:"\u4f55\u65f6\u4e0d\u4f7f\u7528\u5b83",id:"\u4f55\u65f6\u4e0d\u4f7f\u7528\u5b83",level:2},{value:"XState\u5982\u4f55\u4e0eActor\u6a21\u578b\u534f\u4f5c\uff1f",id:"xstate\u5982\u4f55\u4e0eactor\u6a21\u578b\u534f\u4f5c",level:2},{value:"\u751f\u6210Actors",id:"\u751f\u6210actors",level:3}];function d(t){const e={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.a)(),...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:["\u5728Stately\uff0c ",(0,n.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Actor_model",children:"Actor\u6a21\u578b"})," \u662f\u6211\u4eec\u6700\u559c\u6b22\u7684\u7f16\u7a0b\u8303\u5f0f\u4e4b\u4e00\uff0c\u6211\u4eec\u8ba4\u4e3a\u8fd9\u662f\u6709\u5145\u5206\u7406\u7531\u7684\uff01Actor\u6a21\u578b\u5141\u8bb8\u5f00\u53d1\u4eba\u5458\u901a\u8fc7\u4f7f\u7528_actors_\u8fdb\u884c\u901a\u4fe1\u6765\u6784\u5efa\u53ef\u9760\u7684\u57fa\u4e8e\u6d88\u606f\u7684\u7cfb\u7edf\u3002\u8fd9\u4e0e\u72b6\u6001\u673a\u548c\u72b6\u6001\u56fe\u975e\u5e38\u5951\u5408\uff0c\u5b83\u4eec\u4e5f\u53ef\u4ee5\u5efa\u6a21\u4e3aactors\u5e76\u4ee5\u76f8\u540c\u7684\u65b9\u5f0f\u8fdb\u884c\u901a\u4fe1\u3002\u7ee7\u7eed\u9605\u8bfb\u4ee5\u4e86\u89e3\u4ec0\u4e48\u662fActor\u6a21\u578b\uff0c\u5b83\u8bd5\u56fe\u89e3\u51b3\u7684\u95ee\u9898\uff0c\u4ee5\u53ca\u5982\u4f55\u5728\u9879\u76ee\u4e2d\u4f7f\u7528\u5b83\u6765\u53ef\u9760\u5730\u8de8\u4e0d\u540c\u5b9e\u4f53\u8fdb\u884c\u901a\u4fe1\u3002"]}),"\n",(0,n.jsx)(e.h2,{id:"\u4ec0\u4e48\u662factor\u6a21\u578b",children:"\u4ec0\u4e48\u662fActor\u6a21\u578b\uff1f"}),"\n",(0,n.jsxs)(e.p,{children:["Actor\u6a21\u578b\u5df2\u7ecf\u5b58\u5728\u4e86\u76f8\u5f53\u957f\u7684\u4e00\u6bb5\u65f6\u95f4\uff0c\u53ef\u4ee5\u8ffd\u6eaf\u52301970\u5e74\u4ee3\u3002\u5b83\u88ab\u7528\u4e8e\u50cf",(0,n.jsx)(e.a,{href:"https://akka.io/",children:"Akka"}),"\u8fd9\u6837\u7684\u6846\u67b6\uff0c\u5e76\u4e14\u5185\u7f6e\u4e8e\u50cf",(0,n.jsx)(e.a,{href:"https://www.erlang.org/",children:"Erlang"}),"\u8fd9\u6837\u7684\u8bed\u8a00\u4e2d\uff0c\u8fd9\u4e9b\u90fd\u8bc1\u660e\u4e86\u5b83\u7684\u5b9e\u7528\u6027\u3002\u5728\u7814\u7a76Actor\u6a21\u578b\u65f6\uff0c\u5e38\u5e38\u4f1a\u770b\u5230\u201c\u4e07\u7269\u7686\u4e3aactor\u201d\u8fd9\u53e5\u8bdd\uff0c\u56e0\u4e3a\u8fd9\u662fActor\u6a21\u578b\u54f2\u5b66\u7684\u6838\u5fc3\u539f\u5219\u3002\u8fd9\u4ec5\u4ec5\u610f\u5473\u7740\u5728\u7ed9\u5b9a\u7684\u7cfb\u7edf\u4e2d\uff0c_actor_\u662f\u6838\u5fc3\u7684\u6267\u884c\u5355\u5143\u3002\u7cfb\u7edf\u4e2d\u53d1\u751f\u7684\u6bcf\u4e00\u4e2a\u52a8\u4f5c\u90fd\u662f\u7531actor\u9a71\u52a8\u7684\u3002actor\u53ef\u4ee5\u901a\u8fc7\u6d88\u606f\u4e0e\u5176\u4ed6actors\u901a\u4fe1\uff0c\u5e76\u4e14\u5b83\u4eec\u4e5f\u53ef\u4ee5\u4e0e\u5916\u90e8\u7cfb\u7edf\u4ea4\u4e92\u3002\u5177\u4f53\u6765\u8bf4\uff0cactor\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u57fa\u672c\u4efb\u52a1\uff1a"]}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:"actor\u53ef\u4ee5\u7ba1\u7406\u81ea\u5df1\u7684\u5185\u90e8\u72b6\u6001"}),"\n",(0,n.jsx)(e.li,{children:"actor\u53ef\u4ee5\u751f\u6210\u5176\u4ed6actors"}),"\n",(0,n.jsx)(e.li,{children:"actor\u53ef\u4ee5\u5411\u5176\u4ed6actors\u53d1\u9001\u6d88\u606f"}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:"\u8fd9\u542c\u8d77\u6765\u5f88\u7b80\u5355\uff0c\u4f46\u8fd9\u79cd\u7f16\u7a0b\u6a21\u578b\u5141\u8bb8\u5f00\u53d1\u9ad8\u5ea6\u53ef\u6269\u5c55\u548c\u5e76\u53d1\u7684\u7cfb\u7edf\u3002\u4e0d\u8fc7\u4e5f\u6709\u4e00\u4e9b\u9650\u5236\uff0c\u5176\u4e2d\u6700\u91cd\u8981\u7684\u662factor_\u4e0d\u80fd_\u76f4\u63a5\u4fee\u6539\u53e6\u4e00\u4e2aactor\u7684\u5185\u90e8\u72b6\u6001\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u6d88\u606f\u9690\u5f0f\u5730\u5b8c\u6210\uff08\u5373actor\u5728\u54cd\u5e94\u6d88\u606f\u65f6\u66f4\u65b0\u5176\u72b6\u6001\uff09\uff0c\u4f46_\u7edd\u4e0d\u80fd\u76f4\u63a5_\u3002"}),"\n",(0,n.jsx)(e.h2,{id:"\u4f55\u65f6\u4f7f\u7528\u5b83",children:"\u4f55\u65f6\u4f7f\u7528\u5b83\uff1f"}),"\n",(0,n.jsxs)(e.p,{children:["Actor\u6a21\u578b\u5728\u5206\u89e3\u53ef\u4ee5\u5e76\u884c\u5904\u7406\u7684\u5de5\u4f5c\u65f6\u975e\u5e38\u6709\u7528\u3002\u5b83\u975e\u5e38\u9002\u5408",(0,n.jsx)(e.a,{href:"https://java-design-patterns.com/patterns/fanout-fanin/",children:"\u201cfan-out/fan-in\u201d"}),"\u573a\u666f\uff0c\u5728\u8fd9\u4e9b\u573a\u666f\u4e2d\uff0c\u591a\u4e2a\u51fd\u6570\u9700\u8981\u540c\u65f6\u8fd0\u884c\u5e76\u5728\u6700\u7ec8\u5904\u7406\u4e4b\u524d\u5408\u5e76\u5176\u7ed3\u679c\u3002\u5b83\u4e5f\u975e\u5e38\u9002\u5408\u6784\u5efa",(0,n.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern",children:"pub/sub"}),"\u7cfb\u7edf\uff0c\u5728\u8fd9\u4e9b\u7cfb\u7edf\u4e2d\uff0c\u591a\u4e2aactors\u53ef\u4ee5\u4f5c\u4e3a\u201c\u5de5\u4eba\u201d\uff0c\u7b49\u5f85\u6765\u81ea\u201c\u53d1\u5e03\u8005\u201d\u7684\u6d88\u606f\u3002\u6700\u540e\u4e00\u4e2a\u4f8b\u5b50\uff0c\u4f46\u7edd\u4e0d\u662f\u6700\u4e0d\u91cd\u8981\u7684\uff0c\u662f\u5728\u9700\u8981\u7ba1\u7406\u591a\u4e2a\u76f8\u4f3c\u5b9e\u4f53\u7684\u7cfb\u7edf\u4e2d\uff0c\u6bd4\u5982\u6bcf\u4e2a\u73a9\u5bb6\u90fd\u8868\u793a\u4e3a\u4e00\u4e2aactor\u7684\u591a\u4eba\u6e38\u620f\u3002\u5f53\u5206\u5e03\u548c\u5e76\u53d1\u662f\u6838\u5fc3\u9700\u6c42\u65f6\uff0c\u81f3\u5c11\u8003\u8651\u4e00\u4e0bActor\u6a21\u578b\u662f\u4e00\u4e2a\u597d\u7684\u7ecf\u9a8c\u6cd5\u5219\u3002"]}),"\n",(0,n.jsx)(e.h2,{id:"\u4f55\u65f6\u4e0d\u4f7f\u7528\u5b83",children:"\u4f55\u65f6\u4e0d\u4f7f\u7528\u5b83"}),"\n",(0,n.jsx)(e.p,{children:"\u4e0e\u4efb\u4f55\u6a21\u5f0f\u4e00\u6837\uff0c\u7406\u89e3\u5176\u5f31\u70b9\u4e0e\u7406\u89e3\u5176\u4f18\u70b9\u540c\u6837\u91cd\u8981\u3002\u901a\u5e38\uff0c\u5f53\u987a\u5e8f\u975e\u5e38\u91cd\u8981\u65f6\uff0c\u4f60\u53ef\u80fd\u4e0d\u60f3\u4f7f\u7528Actor\u6a21\u5f0f\u3002\u987a\u5e8f\u901a\u5e38\u5728Actor\u6a21\u5f0f\u4e2d\u4e0d\u88ab\u4fdd\u8bc1\uff0c\u5982\u679c\u5176\u4e2d\u4e00\u4e2aactor\u5931\u8d25\uff0c\u4f60\u5c06\u4e0d\u5f97\u4e0d\u5904\u7406\u56de\u6eda\u4e8b\u4ef6\u7684\u95ee\u9898\u3002\u5f53\u5904\u7406\u540c\u6b65\u95ee\u9898\u65f6\uff0cActor\u6a21\u578b\u901a\u5e38\u662f\u4e0d\u5fc5\u8981\u7684\uff0c\u5e76\u4e14\u53ef\u80fd\u589e\u52a0\u4e0d\u5fc5\u8981\u7684\u5f00\u9500\u3002\u6b64\u5916\uff0c\u9519\u8bef\u5904\u7406\u5728actors\u4e2d\u53ef\u80fd\u5f88\u68d8\u624b\u3002Erlang\u666e\u53ca\u4e86\u201c\u8ba9\u5b83\u5d29\u6e83\u201d\u7684\u54f2\u5b66\uff0c\u4f46\u8003\u8651\u5230\u95ee\u9898\uff0c\u8fd9\u53ef\u80fd\u5e76\u4e0d\u603b\u662f\u6700\u5408\u7406\u7684\u7b54\u6848\u3002"}),"\n",(0,n.jsx)(e.h2,{id:"xstate\u5982\u4f55\u4e0eactor\u6a21\u578b\u534f\u4f5c",children:"XState\u5982\u4f55\u4e0eActor\u6a21\u578b\u534f\u4f5c\uff1f"}),"\n",(0,n.jsxs)(e.p,{children:["\u5728XState\u4e2d\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u521b\u5efa\u673a\u5668\u5b9e\u4f8b\u4f5c\u4e3aactors\u7684\u80fd\u529b\uff01\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u5728\u5b9a\u4e49\u4e86\u6211\u4eec\u7684\u673a\u5668\u53ca\u5176\u5c5e\u6027\u4e4b\u540e\uff0c\u6211\u4eec\u53ea\u9700\u8981\u4f7f\u7528",(0,n.jsx)(e.code,{children:"interpret()"}),"\u6765\u5b9e\u4f8b\u5316\u4e00\u4e2aactor\uff08\u79f0\u4e3a",(0,n.jsx)(e.code,{children:"toggleActor"}),"\uff09\u5e76\u5411\u5176\u53d1\u9001\u6d88\u606f\u3002"]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-typescript",children:"import { createMachine, interpret } from 'xstate';\n\n// \u72b6\u6001\u673a\u5b9a\u4e49\nconst toggleMachine = createMachine({\n  id: 'toggle',\n  initial: 'inactive',\n  states: {\n    inactive: { on: { TOGGLE: 'active' } },\n    active: { on: { TOGGLE: 'inactive' } },\n  },\n});\n\n// \u5177\u6709\u5185\u90e8\u72b6\u6001\u7684\u673a\u5668\u5b9e\u4f8b\nconst toggleActor = interpret(toggleMachine);\ntoggleActor.subscribe((state) => {\n  console.log(state.value);\n});\ntoggleActor.start();\n// => \u8bb0\u5f55 'inactive'\n\ntoggleActor.send({ type: 'TOGGLE' });\n// => \u8bb0\u5f55 'active'\n\ntoggleActor.send({ type: 'TOGGLE' });\n// => \u8bb0\u5f55 'inactive'\n"})}),"\n",(0,n.jsx)(e.p,{children:"\u8fd9\u4e2aactor\u6709\u81ea\u5df1\u7684\u72b6\u6001\u548c\u4e0a\u4e0b\u6587\uff0c\u5e76\u4e14\u5b83\u53ef\u4ee5\u5728\u63a5\u6536\u5230\u4e8b\u4ef6\u65f6\u66f4\u65b0\u3002\u5f53\u7136\uff0c\u4e3a\u4e86\u66f4\u65b0actor\u7684\u5185\u90e8\u72b6\u6001\uff0c\u4e8b\u4ef6\u5fc5\u987b\u662f\u673a\u5668\u5b9a\u4e49\u7684\u5408\u6cd5\u8f6c\u6362\u3002"}),"\n",(0,n.jsx)(e.h3,{id:"\u751f\u6210actors",children:"\u751f\u6210Actors"}),"\n",(0,n.jsx)(e.p,{children:"XState\u8fd8\u53ef\u4ee5\u7528\u4e8e\u751f\u6210\u5176\u4ed6actors\u5e76\u76f8\u4e92\u901a\u4fe1\uff1a"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-typescript",children:"import { createMachine, spawn } from 'xstate';\nimport { todoMachine } from './todoMachine';\n\nconst todosMachine = createMachine({\n  // ...\n  on: {\n    'NEW_TODO.ADD': {\n      actions: assign({\n        todos: ({ context, event }) => [\n          ...context.todos,\n          {\n            todo: event.todo,\n            // \u6dfb\u52a0\u4e00\u4e2a\u5177\u6709\u552f\u4e00\u540d\u79f0\u7684\u65b0todoMachine actor\n            ref: spawn(todoMachine, `todo-${event.id}`),\n          },\n        ],\n      }),\n    },\n    // ...\n  },\n});\n"})}),"\n",(0,n.jsxs)(e.p,{children:["\u901a\u8fc7\u4f7f\u7528",(0,n.jsx)(e.code,{children:"spawn()"}),"\u548c",(0,n.jsx)(e.code,{children:"assign()"}),"\uff0c\u6211\u4eec\u5728\u63d0\u4f9b\u673a\u5668\u903b\u8f91\u548c\u552f\u4e00\u6807\u8bc6\u7b26\u65f6\u521b\u5efa\u4e00\u4e2a\u65b0\u7684actor\u5b9e\u4f8b\u3002\u7531\u4e8e\u5176\u672c\u8d28\uff0c\u52a8\u4f5c\u662f",(0,n.jsx)(e.a,{href:"../docs/xstate-v4/xstate/actions",children:'"fire and forget"\u6548\u679c'}),"\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u4eec\u5728\u6267\u884c\u65f6\u4e0d\u671f\u671b\u63a5\u6536\u5230\u8fd4\u56de\u7ed9actor\u7684\u4e8b\u4ef6\u3002\u8fd9\u5bf9\u4e8e\u521b\u5efa\u4e00\u4e2a\u65b0\u7684actor\u662f\u6709\u610f\u4e49\u7684\uff0c\u4f46\u6211\u4eec\u53ef\u80fd\u4ecd\u7136\u5e0c\u671b\u7236actor\u6709\u4e00\u4e2a\u5bf9\u5176\u5b50actor\u7684\u5f15\u7528\uff0c\u56e0\u6b64\u6211\u4eec\u4f7f\u7528",(0,n.jsx)(e.code,{children:"assign()"}),"\u5c06\u5176\u4fdd\u5b58\u5728\u4e0a\u4e0b\u6587\u4e2d\u3002",(0,n.jsx)(e.code,{children:"spawn()"}),"\u662f\u5b9e\u9645\u521b\u5efa\u65b0actor\u7684\u51fd\u6570\u3002\u7236actor\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528\u5bf9\u5b50actor\u7684\u5f15\u7528\u4e0a\u7684",(0,n.jsx)(e.code,{children:"getSnapshot()"}),"\u8f7b\u677e\u8bbf\u95ee\u6b64\u72b6\u6001\u3002"]}),"\n",(0,n.jsxs)(e.p,{children:["\u6709\u5173\u5728XState\u4e2d\u4f7f\u7528actors\u7684\u66f4\u8be6\u7ec6\u793a\u4f8b\uff0c\u4f8b\u5982\u57fa\u4e8e\u56de\u8c03\u6216\u627f\u8bfa\u7684actor\u751f\u6210\u3001\u53d1\u9001\u66f4\u65b0\u4ee5\u53caactors\u4e4b\u95f4\u7684\u901a\u4fe1\uff0c\u8bf7",(0,n.jsx)(e.a,{href:"../docs/xstate-v4/actions-and-actors/actors",children:"\u67e5\u770b\u6211\u4eec\u5173\u4e8eactors\u7684\u6587\u6863"}),"\u3002"]})]})}function h(t={}){const{wrapper:e}={...(0,o.a)(),...t.components};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(d,{...t})}):d(t)}},11151:(t,e,a)=>{a.d(e,{Z:()=>s,a:()=>c});var n=a(67294);const o={},r=n.createContext(o);function c(t){const e=n.useContext(r);return n.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function s(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(o):t.components||o:c(t.components),n.createElement(r.Provider,{value:e},t.children)}}}]);
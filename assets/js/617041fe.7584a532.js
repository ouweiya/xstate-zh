"use strict";(self.webpackChunkstately_docs=self.webpackChunkstately_docs||[]).push([[1501],{55505:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>l});var c=t(85893),s=t(11151);const i={title:"Setup"},r=void 0,d={id:"setup",title:"Setup",description:"\u5728 XState \u7248\u672c 5 \u4e2d\uff0c\u60a8\u73b0\u5728\u53ef\u4ee5\u4f7f\u7528 setup({ ... }) \u51fd\u6570\u6765\u8bbe\u7f6e\u673a\u5668\u7684\u7c7b\u578b\u548c\u6e90\u3002\u8fd9\u6709\u5f88\u591a\u597d\u5904\uff1a",source:"@site/docs/setup.mdx",sourceDirName:".",slug:"/setup",permalink:"/xstate-zh/docs/setup",draft:!1,unlisted:!1,editUrl:"https://github.com/statelyai/docs/tree/main/docs/setup.mdx",tags:[],version:"current",frontMatter:{title:"Setup"},sidebar:"tutorialSidebar",previous:{title:"\u72b6\u6001\u673a",permalink:"/xstate-zh/docs/machines"},next:{title:"State",permalink:"/xstate-zh/docs/states"}},o={},l=[{value:"\u8bbe\u7f6e\u7c7b\u578b",id:"\u8bbe\u7f6e\u7c7b\u578b",level:2},{value:"\u4ece <code>createMachine</code> \u8fc1\u79fb",id:"\u4ece-createmachine-\u8fc1\u79fb",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(n.p,{children:["\u5728 XState \u7248\u672c 5 \u4e2d\uff0c\u60a8\u73b0\u5728\u53ef\u4ee5\u4f7f\u7528 ",(0,c.jsx)(n.code,{children:"setup({ ... })"})," \u51fd\u6570\u6765\u8bbe\u7f6e\u673a\u5668\u7684\u7c7b\u578b\u548c\u6e90\u3002\u8fd9\u6709\u5f88\u591a\u597d\u5904\uff1a"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u51cf\u5c11\u5f3a\u7c7b\u578b\u548c\u63d0\u4f9b\u547d\u540d\u6e90\u7684\u6837\u677f\u4ee3\u7801"}),"\n",(0,c.jsx)(n.li,{children:"\u66f4\u5065\u58ee\u7684\u673a\u5668\u903b\u8f91\uff0c\u56e0\u4e3a\u547d\u540d\u6e90\u4fdd\u8bc1\u5b58\u5728"}),"\n",(0,c.jsx)(n.li,{children:"\u66f4\u597d\u7684\u7c7b\u578b\u63a8\u65ad\uff0c\u7528\u4e8e\u52a8\u4f5c\u3001\u6f14\u5458\u3001\u5b88\u536b\u3001\u5ef6\u8fdf\u3001\u4e0a\u4e0b\u6587\u3001\u4e8b\u4ef6\u7b49"}),"\n",(0,c.jsx)(n.li,{children:"\u5f3a\u7c7b\u578b\u7684\u6f14\u5458\u5feb\u7167\u548c\u5b8c\u6210\u4e8b\u4ef6"}),"\n",(0,c.jsx)(n.li,{children:"\u5f3a\u7c7b\u578b\u7684\u72b6\u6001\u503c"}),"\n",(0,c.jsx)(n.li,{children:"\u6e90\u903b\u8f91\u7684\u53ef\u91cd\u7528\u6027"}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"\u793a\u4f8b\u7528\u6cd5\uff1a"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-ts",children:"import { setup, assign } from 'xstate';\n\nconst machine = setup({\n  types: {\n    context: {} as { count: number },\n    events: {} as\n      | { type: 'inc' }\n      | { type: 'dec' }\n  },\n  actions: {\n    increment: assign({\n      count: ({ context }) => context.count + 1\n    }),\n    decrement: assign({\n      count: ({ context }) => context.count - 1\n    })\n  }\n}).createMachine({\n  context: { count: 0 },\n  on: {\n    inc: { actions: 'increment' },\n    dec: { actions: 'decrement' }\n  }\n})\n"})}),"\n",(0,c.jsx)(n.admonition,{type:"warning",children:(0,c.jsxs)(n.p,{children:["\u786e\u4fdd\u60a8\u4f7f\u7528\u7684\u662f\u6700\u65b0\u7248\u672c\u7684 TypeScript\uff085.0 \u6216\u66f4\u9ad8\u7248\u672c\uff09\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 ",(0,c.jsx)(n.a,{href:"/xstate-zh/docs/typescript",children:"TypeScript \u4e0e XState \u7684\u4f7f\u7528"})," \u6587\u6863\u3002"]})}),"\n",(0,c.jsx)(n.h2,{id:"\u8bbe\u7f6e\u7c7b\u578b",children:"\u8bbe\u7f6e\u7c7b\u578b"}),"\n",(0,c.jsxs)(n.p,{children:["\u673a\u5668\u7c7b\u578b\u5e94\u5728 ",(0,c.jsx)(n.code,{children:"setup({ types })"})," \u7684 ",(0,c.jsx)(n.code,{children:"types"})," \u5c5e\u6027\u4e2d\u8bbe\u7f6e\u3002\u5728\u8fd9\u91cc\uff0c\u60a8\u53ef\u4ee5\u8bbe\u7f6e\u673a\u5668\u7684\u7c7b\u578b\uff0c\u5305\u62ec\uff1a"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"context"})," \u7684\u7c7b\u578b"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"events"})," \u7684\u7c7b\u578b\uff0c\u5305\u62ec\u4e8b\u4ef6\u8d1f\u8f7d"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"input"})," \u7684\u7c7b\u578b"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"actions"})," \u7684\u7c7b\u578b\uff0c\u5305\u62ec\u52a8\u4f5c ",(0,c.jsx)(n.code,{children:"params"})]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"guards"})," \u7684\u7c7b\u578b\uff0c\u5305\u62ec\u5b88\u536b ",(0,c.jsx)(n.code,{children:"params"})]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"actors"})," \u7684\u7c7b\u578b"]}),"\n"]}),"\n",(0,c.jsxs)(n.h2,{id:"\u4ece-createmachine-\u8fc1\u79fb",children:["\u4ece ",(0,c.jsx)(n.code,{children:"createMachine"})," \u8fc1\u79fb"]}),"\n",(0,c.jsxs)(n.p,{children:["\u4ece\u88f8 ",(0,c.jsx)(n.code,{children:"createMachine({ ... })"})," \u8fc1\u79fb\u5230 ",(0,c.jsx)(n.code,{children:"setup({ ... }).createMachine({ ... })"})," \u6765\u521b\u5efa\u673a\u5668\u975e\u5e38\u7b80\u5355\u3002"]}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\u4ece ",(0,c.jsx)(n.code,{children:"'xstate'"})," \u5bfc\u5165 ",(0,c.jsx)(n.code,{children:"setup"})," \u800c\u4e0d\u662f ",(0,c.jsx)(n.code,{children:"createMachine"})]}),"\n",(0,c.jsxs)(n.li,{children:["\u5c06 ",(0,c.jsx)(n.code,{children:"types"})," \u4ece ",(0,c.jsx)(n.code,{children:"createMachine(...)"})," \u79fb\u52a8\u5230 ",(0,c.jsx)(n.code,{children:"setup(...)"})]}),"\n",(0,c.jsxs)(n.li,{children:["\u5c06\u52a8\u4f5c\u3001\u6f14\u5458\u3001\u5b88\u536b\u7b49\u6e90\u4ece ",(0,c.jsx)(n.code,{children:"createMachine(config, sources)"})," \u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u79fb\u52a8\u5230 ",(0,c.jsx)(n.code,{children:"setup({ ... })"})]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-ts",children:"import {\n// createMachine\n  setup\n} from 'xstate';\n\nconst machine =\n  setup({\n    types: { ... },\n    actions: { ... },\n    guards: { ... }\n  })\n  .createMachine({\n    // types: { ... }\n  }, /* { actions, guards, ... } */);\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},11151:(e,n,t)=>{t.d(n,{Z:()=>d,a:()=>r});var c=t(67294);const s={},i=c.createContext(s);function r(e){const n=c.useContext(i);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),c.createElement(i.Provider,{value:n},e.children)}}}]);
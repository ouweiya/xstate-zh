"use strict";(self.webpackChunkstately_docs=self.webpackChunkstately_docs||[]).push([[606],{67390:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var s=n(85893),o=n(11151);const i={title:"Inspector"},r="Stately Inspector",c={id:"inspector",title:"Inspector",description:"Stately Inspector is a tool that allows you to inspect your application\u2019s state visually. It primarily works with frontend applications using XState but can also work with backend code and code that uses any state management solution.",source:"@site/docs/inspector.mdx",sourceDirName:".",slug:"/inspector",permalink:"/xstate-zh/docs/inspector",draft:!1,unlisted:!1,editUrl:"https://github.com/statelyai/docs/tree/main/docs/inspector.mdx",tags:[],version:"current",frontMatter:{title:"Inspector"},sidebar:"tutorialSidebar",previous:{title:"Visualizer",permalink:"/xstate-zh/docs/visualizer"},next:{title:"Developer tools",permalink:"/xstate-zh/docs/developer-tools"}},a={},l=[{value:"Install Stately Inspector",id:"install-stately-inspector",level:2},{value:"Inspector options",id:"inspector-options",level:2},{value:"Sending inspection events",id:"sending-inspection-events",level:2}];function p(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"stately-inspector",children:"Stately Inspector"}),"\n",(0,s.jsx)(t.p,{children:"Stately Inspector is a tool that allows you to inspect your application\u2019s state visually. It primarily works with frontend applications using XState but can also work with backend code and code that uses any state management solution."}),"\n",(0,s.jsx)(t.admonition,{type:"new",children:(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.a,{href:"/blog/2024-01-15-stately-inspector/",children:"Read about our recent release of Stately Inspector on our blog"}),"."]})}),"\n",(0,s.jsx)(t.h2,{id:"install-stately-inspector",children:"Install Stately Inspector"}),"\n",(0,s.jsxs)(t.p,{children:["To inspect applications with Stately Inspector, install ",(0,s.jsx)(t.a,{href:"https://github.com/statelyai/inspect",children:"Stately Inspect"})," from npm via ",(0,s.jsx)(t.code,{children:"@statelyai/inspect"}),":"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"npm install @statelyai/inspect\n"})}),"\n",(0,s.jsx)(t.p,{children:"Then import the relevant inspector creator into your app. The creator is used to create an inspector (e.g., a browser or WebSocket inspector) that you can use to either connect to XState actors and/or manually send inspection events to Stately Inspector:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"import { createActor } from 'xstate';\n// highlight-next-line\nimport { createBrowserInspector } from '@statelyai/inspect';\nimport { machine } from './machine';\n\n// highlight-next-line\nconst { inspect } = createBrowserInspector();\n\n// ...\n\nconst actor = createActor(machine, {\n  // highlight-next-line\n  inspect,\n  // ... other actor options\n});\n\nactor.start();\n"})}),"\n",(0,s.jsx)(t.p,{children:"When you run your app, a new tab or popup window will open with the Inspector."}),"\n",(0,s.jsx)(t.admonition,{type:"tip",children:(0,s.jsx)(t.p,{children:"When using the browser inspector, ensure that the popup window is not blocked by your browser\u2019s popup blocker."})}),"\n",(0,s.jsx)(t.h2,{id:"inspector-options",children:"Inspector options"}),"\n",(0,s.jsx)(t.p,{children:"You can pass the following options to the browser inspector:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"filter"})," - a function that takes an inspection event and returns ",(0,s.jsx)(t.code,{children:"true"})," if the event should be sent to the Stately Inspector."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"serialize"})," - a function that takes an inspection event and allows you to serialize it before sending it to the Stately Inspector."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"autoStart"})," - whether to automatically start the inspector. Defaults to ",(0,s.jsx)(t.code,{children:"true"}),".","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["If ",(0,s.jsx)(t.code,{children:"autoStart: false"}),", you can start the inspector by calling ",(0,s.jsx)(t.code,{children:"inspector.start()"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"url"})," - the URL of the Stately Inspector to open. Defaults to ",(0,s.jsx)(t.code,{children:"https://stately.ai/inspector"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"iframe"})," - the ",(0,s.jsx)(t.code,{children:"<iframe>"})," element to use for the inspector. Defaults to ",(0,s.jsx)(t.code,{children:"null"}),"."]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Example usage:"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"import { createBrowserInspector } from '@statelyai/inspect';\n\nconst inspector = createBrowserInspector({\n  filter: (inspEvent) => {\n    if (inspEvent.type === '@xstate.event') {\n      // Skip mouse drag events\n      return inspEvent.event.type !== 'mouse.drag';\n    }\n    return true;\n  },\n  iframe: document.getElementById('inspector-iframe')\n})\n"})}),"\n",(0,s.jsx)(t.h2,{id:"sending-inspection-events",children:"Sending inspection events"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"@statelyai/inspect"})," package will send inspection events to the connected Stately Inspector. There are currently three kinds of events sent:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Actor creation events"}),"\n",(0,s.jsx)(t.li,{children:"Actor-to-actor communication events"}),"\n",(0,s.jsx)(t.li,{children:"Actor snapshot changes"}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["When you pass in the ",(0,s.jsx)(t.code,{children:"inspect"})," option to the actor options in XState\u2019s ",(0,s.jsx)(t.code,{children:"createActor(machine, options)"})," function, it will automatically send all of these inspection events."]}),"\n",(0,s.jsx)(t.p,{children:"For usage with other state management solutions, you can manually send inspection events using the following methods:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"inspector.actor(actor, snapshot, info)"})," - send actor creation events"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"inspector.event(actor, event, info)"})," - send actor-to-actor communication events"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"inspector.snapshot(actor, snapshot, info)"})," - send actor snapshot changes"]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"import { createBrowserInspector } from '@statelyai/inspect';\n\nconst inspector = createBrowserInspector();\n\n// Imagine a todo app...\ninspector.actor('todos');\n\n// When a todo is created\ninspector.actor('todo-1', {\n  context: { status: 'active' }\n});\n\n// When a user completes a todo\ninspector.event('todo-1', { type: 'todo.complete' });\n\n// When a todo changes\ninspector.snapshot('todo-1', {\n  context: { status: 'completed' }\n});\n\n// When the todos actor (not the user) sends an event to a todo\ninspector.event('todo-1', { type: 'todo.update' }, {\n  source: 'todos'\n});\n\n// ... etc.\n\n"})}),"\n",(0,s.jsx)(t.p,{children:"The three types of inspection events contain everything that Stately Inspector needs to generate two kinds of real-time diagrams automatically:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"State machine diagrams"})," (if a state machine definition is provided)"]}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.strong,{children:"Sequence diagrams"})}),"\n"]})]})}function d(e={}){const{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},11151:(e,t,n)=>{n.d(t,{Z:()=>c,a:()=>r});var s=n(67294);const o={},i=s.createContext(o);function r(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);
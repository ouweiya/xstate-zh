"use strict";(self.webpackChunkstately_docs=self.webpackChunkstately_docs||[]).push([[4205],{91171:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>l,metadata:()=>r,toc:()=>o});var n=s(85893),a=s(11151);const l={title:"@xstate/svelte"},i=void 0,r={id:"xstate-svelte",title:"@xstate/svelte",description:"The @xstate/svelte package contains utilities for using XState with Svelte.",source:"@site/docs/xstate-svelte.mdx",sourceDirName:".",slug:"/xstate-svelte",permalink:"/xstate-zh/docs/xstate-svelte",draft:!1,unlisted:!1,editUrl:"https://github.com/statelyai/docs/tree/main/docs/xstate-svelte.mdx",tags:[],version:"current",frontMatter:{title:"@xstate/svelte"},sidebar:"tutorialSidebar",previous:{title:"@xstate/vue",permalink:"/xstate-zh/docs/xstate-vue"},next:{title:"@xstate/graph",permalink:"/xstate-zh/docs/xstate-graph"}},c={},o=[{value:"Templates",id:"templates",level:2},{value:"Installation",id:"installation",level:2},{value:"API",id:"api",level:2},{value:"<code>useMachine(machine, options?)</code>",id:"usemachinemachine-options",level:3},{value:"<code>useSelector(actorRef, selector, compare?, getSnapshot?)</code>",id:"useselectoractorref-selector-compare-getsnapshot",level:3},{value:"Examples",id:"examples",level:4},{value:"Matching States",id:"matching-states",level:2},{value:"Persisted and Rehydrated State",id:"persisted-and-rehydrated-state",level:2}];function h(e){const t={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components},{TabItem:s,Tabs:l}=t;return s||x("TabItem",!0),l||x("Tabs",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.a,{href:"https://github.com/statelyai/xstate/tree/main/packages/xstate-svelte",children:"@xstate/svelte package"})," contains utilities for using ",(0,n.jsx)(t.a,{href:"https://github.com/statelyai/xstate",children:"XState"})," with ",(0,n.jsx)(t.a,{href:"https://github.com/sveltejs/svelte",children:"Svelte"}),"."]}),"\n",(0,n.jsx)(t.h2,{id:"templates",children:"Templates"}),"\n",(0,n.jsx)(t.p,{children:"Use the following templates to get started quickly with XState and Svelte:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"https://codesandbox.io/p/devbox/github/statelyai/xstate/tree/main/templates/svelte-ts",children:"XState Svelte template (CodeSandbox)"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"https://stackblitz.com/github/statelyai/xstate/tree/main/templates/svelte-ts?file=%2Fsrc%2FfeedbackMachine.ts",children:"XState Svelte template (StackBlitz)"})}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"installation",children:"Installation"}),"\n",(0,n.jsxs)(t.p,{children:["Install the latest versions of both ",(0,n.jsx)(t.code,{children:"xstate"})," and ",(0,n.jsx)(t.code,{children:"@xstate/svelte"}),". ",(0,n.jsx)(t.code,{children:"xstate"})," is a peer dependency of ",(0,n.jsx)(t.code,{children:"@xstate/svelte"}),"."]}),"\n",(0,n.jsxs)(l,{children:[(0,n.jsx)(s,{value:"npm",label:"npm",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"npm install xstate @xstate/svelte\n"})})}),(0,n.jsx)(s,{value:"pnpm",label:"pnpm",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"pnpm install xstate @xstate/svelte\n"})})}),(0,n.jsx)(s,{value:"yarn",label:"yarn",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"yarn add xstate @xstate/svelte\n"})})})]}),"\n",(0,n.jsx)(t.h2,{id:"api",children:"API"}),"\n",(0,n.jsx)(t.h3,{id:"usemachinemachine-options",children:(0,n.jsx)(t.code,{children:"useMachine(machine, options?)"})}),"\n",(0,n.jsxs)(t.p,{children:["A function that creates an actor from the given ",(0,n.jsx)(t.code,{children:"machine"})," and starts an actor that runs for the lifetime of the component."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Arguments"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"machine"})," - An ",(0,n.jsx)(t.a,{href:"/xstate-zh/docs/machines",children:"XState machine"}),"."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"options"})," (optional) - Actor options"]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Returns"})," ",(0,n.jsx)(t.code,{children:"{ snapshot, send, actorRef}"}),":"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"snapshot"})," - A ",(0,n.jsx)(t.a,{href:"https://svelte.dev/docs#svelte_store",children:"Svelte store"})," representing the current state of the machine"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"send"})," - A function that sends events to the running actor ref."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"actorRef"})," - The created actor ref."]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"useselectoractorref-selector-compare-getsnapshot",children:(0,n.jsx)(t.code,{children:"useSelector(actorRef, selector, compare?, getSnapshot?)"})}),"\n",(0,n.jsxs)(t.p,{children:["A function that returns ",(0,n.jsx)(t.a,{href:"https://svelte.dev/docs#svelte_store",children:"Svelte store"})," representing the selected value from the snapshot of an ",(0,n.jsx)(t.code,{children:"actorRef"}),", such as an actor. The store will only be updated when the selected value changes, as determined by the optional ",(0,n.jsx)(t.code,{children:"compare"})," function."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Arguments"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"actorRef"})," - An actor ref"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"selector"})," - a function that takes in an actor\u2019s current state (",(0,n.jsx)(t.code,{children:"snapshot"}),") as an argument and returns the desired selected value."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"compare"})," (optional) - a function that determines if the current selected value is the same as the previous selected value."]}),"\n"]}),"\n",(0,n.jsx)(t.h4,{id:"examples",children:"Examples"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.em,{children:"Coming soon"})}),"\n",(0,n.jsx)(t.h2,{id:"matching-states",children:"Matching States"}),"\n",(0,n.jsxs)(t.p,{children:["When using ",(0,n.jsx)(t.a,{href:"https://xstate.js.org/docs/guides/hierarchical.html",children:"hierarchical"})," and ",(0,n.jsx)(t.a,{href:"https://xstate.js.org/docs/guides/parallel.html",children:"parallel"})," machines, the state values will be objects, not strings. In this case, it is best to use ",(0,n.jsx)(t.a,{href:"https://xstate.js.org/docs/guides/states.html#state-methods-and-properties",children:(0,n.jsx)(t.code,{children:"state.matches(...)"})}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-svelte",children:"{#if $state.matches('idle')}\n  //\n{:else if $state.matches({ loading: 'user' })}\n  //\n{:else if $state.matches({ loading: 'friends' })}\n  //\n{/if}\n"})}),"\n",(0,n.jsx)(t.h2,{id:"persisted-and-rehydrated-state",children:"Persisted and Rehydrated State"}),"\n",(0,n.jsxs)(t.p,{children:["You can persist and rehydrate state with ",(0,n.jsx)(t.code,{children:"useMachine(...)"})," via ",(0,n.jsx)(t.code,{children:"options.snapshot"}),":"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"// Get the persisted state config object from somewhere, e.g. localStorage\n// highlight-start\nconst persistedState = JSON.parse(\n  localStorage.getItem('some-persisted-state-key'),\n);\n// highlight-end\n\nconst { snapshot, send } = useMachine(someMachine, {\n  // highlight-next-line\n  snapshot: persistedState,\n});\n\n// state will initially be that persisted state, not the machine\u2019s initialState\n"})})]})}function d(e={}){const{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}function x(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},11151:(e,t,s)=>{s.d(t,{Z:()=>r,a:()=>i});var n=s(67294);const a={},l=n.createContext(a);function i(e){const t=n.useContext(l);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),n.createElement(l.Provider,{value:t},e.children)}}}]);
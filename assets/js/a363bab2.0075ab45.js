"use strict";(self.webpackChunkstately_docs=self.webpackChunkstately_docs||[]).push([[6142],{75932:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>o,contentTitle:()=>a,default:()=>d,frontMatter:()=>c,metadata:()=>r,toc:()=>h});var s=t(85893),i=t(11151);const c={title:"Actions"},a=void 0,r={id:"actions",title:"Actions",description:"\u52a8\u4f5c\u662f\u4e00\u6b21\u6027\u6267\u884c\u7684\u6548\u679c\u3002\u5f53\u72b6\u6001\u673a\u8f6c\u6362\u65f6\uff0c\u5b83\u53ef\u80fd\u4f1a\u6267\u884c\u52a8\u4f5c\u3002\u52a8\u4f5c\u54cd\u5e94\u4e8b\u4ef6\u53d1\u751f\uff0c\u901a\u5e38\u5728\u8f6c\u6362\u4e2d\u7684 actions [...] \u5c5e\u6027\u4e2d\uff0c\u6216\u8005\u5728\u9000\u51fa\u72b6\u6001\u7684\u4efb\u4f55\u8f6c\u6362\u4e2d\u5b9a\u4e49\u5728\u72b6\u6001\u7684 exit: [...] \u5c5e\u6027\u4e2d\u3002",source:"@site/docs/actions.mdx",sourceDirName:".",slug:"/actions",permalink:"/xstate-zh/docs/actions",draft:!1,unlisted:!1,editUrl:"https://github.com/ouweiya/xstate-zh/tree/main/docs/actions.mdx",tags:[],version:"current",frontMatter:{title:"Actions"},sidebar:"tutorialSidebar",previous:{title:"\u5ef6\u8fdf\uff08after\uff09\u8f6c\u6362",permalink:"/xstate-zh/docs/delayed-transitions"},next:{title:"\u5b88\u536b",permalink:"/xstate-zh/docs/guards"}},o={},h=[{value:"\u8fdb\u5165\u548c\u9000\u51fa\u52a8\u4f5c",id:"\u8fdb\u5165\u548c\u9000\u51fa\u52a8\u4f5c",level:2},{value:"\u52a8\u4f5c\u5bf9\u8c61",id:"\u52a8\u4f5c\u5bf9\u8c61",level:2},{value:"\u52a8\u6001\u52a8\u4f5c\u53c2\u6570",id:"\u52a8\u6001\u52a8\u4f5c\u53c2\u6570",level:2},{value:"\u5185\u8054\u52a8\u4f5c",id:"\u5185\u8054\u52a8\u4f5c",level:2},{value:"\u5b9e\u73b0\u52a8\u4f5c",id:"\u5b9e\u73b0\u52a8\u4f5c",level:2},{value:"\u5185\u7f6e\u52a8\u4f5c",id:"\u5185\u7f6e\u52a8\u4f5c",level:2},{value:"Assign \u52a8\u4f5c",id:"assign-\u52a8\u4f5c",level:2},{value:"Raise \u52a8\u4f5c",id:"raise-\u52a8\u4f5c",level:2},{value:"Send-to \u52a8\u4f5c",id:"send-to-\u52a8\u4f5c",level:2},{value:"Send-parent \u52a8\u4f5c",id:"send-parent-\u52a8\u4f5c",level:2},{value:"\u6392\u961f\u52a8\u4f5c",id:"\u6392\u961f\u52a8\u4f5c",level:2},{value:"\u65e5\u5fd7\u52a8\u4f5c",id:"\u65e5\u5fd7\u52a8\u4f5c",level:2},{value:"\u53d6\u6d88\u52a8\u4f5c",id:"\u53d6\u6d88\u52a8\u4f5c",level:2},{value:"\u505c\u6b62\u5b50 actor \u52a8\u4f5c",id:"\u505c\u6b62\u5b50-actor-\u52a8\u4f5c",level:2},{value:"\u5efa\u6a21",id:"\u5efa\u6a21",level:2},{value:"\u7b80\u5199",id:"\u7b80\u5199",level:2},{value:"\u52a8\u4f5c\u548c TypeScript",id:"\u52a8\u4f5c\u548c-typescript",level:2},{value:"\u52a8\u4f5c\u901f\u67e5\u8868",id:"\u52a8\u4f5c\u901f\u67e5\u8868",level:2},{value:"\u901f\u67e5\u8868\uff1a\u8fdb\u5165\u548c\u9000\u51fa\u52a8\u4f5c",id:"\u901f\u67e5\u8868\u8fdb\u5165\u548c\u9000\u51fa\u52a8\u4f5c",level:3},{value:"\u901f\u67e5\u8868\uff1a\u8f6c\u6362\u52a8\u4f5c",id:"\u901f\u67e5\u8868\u8f6c\u6362\u52a8\u4f5c",level:3},{value:"\u901f\u67e5\u8868\uff1a\u5185\u8054\u52a8\u4f5c\u51fd\u6570",id:"\u901f\u67e5\u8868\u5185\u8054\u52a8\u4f5c\u51fd\u6570",level:3},{value:"\u901f\u67e5\u8868\uff1a\u8bbe\u7f6e\u52a8\u4f5c",id:"\u901f\u67e5\u8868\u8bbe\u7f6e\u52a8\u4f5c",level:3},{value:"\u901f\u67e5\u8868\uff1a\u63d0\u4f9b\u52a8\u4f5c",id:"\u901f\u67e5\u8868\u63d0\u4f9b\u52a8\u4f5c",level:3},{value:"\u901f\u67e5\u8868\uff1aassign \u52a8\u4f5c",id:"\u901f\u67e5\u8868assign-\u52a8\u4f5c",level:3},{value:"\u4f7f\u7528\u5c5e\u6027\u5206\u914d\u5668",id:"\u4f7f\u7528\u5c5e\u6027\u5206\u914d\u5668",level:4},{value:"\u4f7f\u7528\u51fd\u6570\u5206\u914d\u5668",id:"\u4f7f\u7528\u51fd\u6570\u5206\u914d\u5668",level:4},{value:"\u901f\u67e5\u8868\uff1araise \u52a8\u4f5c",id:"\u901f\u67e5\u8868raise-\u52a8\u4f5c",level:3},{value:"\u901f\u67e5\u8868\uff1asend-to \u52a8\u4f5c",id:"\u901f\u67e5\u8868send-to-\u52a8\u4f5c",level:3},{value:"\u901f\u67e5\u8868\uff1a\u6392\u961f\u52a8\u4f5c",id:"\u901f\u67e5\u8868\u6392\u961f\u52a8\u4f5c",level:3}];function l(n){const e={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...n.components},{Details:t,EmbedMachine:c}=e;return t||x("Details",!0),c||x("EmbedMachine",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.p,{children:["\u52a8\u4f5c\u662f\u4e00\u6b21\u6027\u6267\u884c\u7684\u6548\u679c\u3002\u5f53\u72b6\u6001\u673a\u8f6c\u6362\u65f6\uff0c\u5b83\u53ef\u80fd\u4f1a\u6267\u884c\u52a8\u4f5c\u3002\u52a8\u4f5c\u54cd\u5e94\u4e8b\u4ef6\u53d1\u751f\uff0c\u901a\u5e38\u5728\u8f6c\u6362\u4e2d\u7684 ",(0,s.jsx)(e.code,{children:"actions: [...]"})," \u5c5e\u6027\u4e2d\u5b9a\u4e49\u3002\u52a8\u4f5c\u4e5f\u53ef\u4ee5\u5728\u8fdb\u5165\u72b6\u6001\u7684\u4efb\u4f55\u8f6c\u6362\u4e2d\u5b9a\u4e49\u5728\u72b6\u6001\u7684 ",(0,s.jsx)(e.code,{children:"entry: [...]"})," \u5c5e\u6027\u4e2d\uff0c\u6216\u8005\u5728\u9000\u51fa\u72b6\u6001\u7684\u4efb\u4f55\u8f6c\u6362\u4e2d\u5b9a\u4e49\u5728\u72b6\u6001\u7684 ",(0,s.jsx)(e.code,{children:"exit: [...]"})," \u5c5e\u6027\u4e2d\u3002"]}),"\n",(0,s.jsx)(e.admonition,{type:"studio",children:(0,s.jsxs)(e.p,{children:["\u60a8\u53ef\u4ee5\u5728\u6211\u4eec\u7684\u62d6\u653e\u5f0f Stately \u7f16\u8f91\u5668\u4e2d\u53ef\u89c6\u5316\u60a8\u7684\u72b6\u6001\u673a\u5e76\u8f7b\u677e\u6dfb\u52a0\u52a8\u4f5c\u3002 ",(0,s.jsx)(e.a,{href:"/xstate-zh/docs/editor-actions-and-actors",children:"\u9605\u8bfb\u66f4\u591a\u5173\u4e8e Stately \u7f16\u8f91\u5668\u4e2d\u7684\u52a8\u4f5c"}),"\u3002"]})}),"\n",(0,s.jsxs)(e.p,{children:["\u52a8\u4f5c\u4e5f\u53ef\u4ee5\u5728\u72b6\u6001\u7684 ",(0,s.jsx)(e.code,{children:"entry"})," \u6216 ",(0,s.jsx)(e.code,{children:"exit"})," \u4e0a\u5b9a\u4e49\uff0c\u53ef\u4ee5\u662f\u5355\u4e2a\u52a8\u4f5c\u6216\u6570\u7ec4\u3002"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { setup } from 'xstate';\n\nfunction trackResponse(response: string) {\n  // ...\n}\n\nconst feedbackMachine = setup({\n  actions: {\n    track: (_, params: { response: string }) => {\n      trackResponse(params.response);\n      // \u8bb0\u5f55 { response: 'good' }\n    },\n    showConfetti: () => {\n      // ...\n    }\n  }\n}).createMachine({\n  // ...\n  states: {\n    // ...\n    question: {\n      on: {\n        'feedback.good': {\n          actions: [\n            { type: 'track', params: { response: 'good' } }\n          ]\n        }\n      },\n      exit: [\n        { type: 'exitAction' }\n      ]\n    }\n    thanks: {\n      entry: [\n        { type: 'showConfetti' }\n      ],\n    }\n  }\n});\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u52a8\u4f5c\u793a\u4f8b\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u8bb0\u5f55\u6d88\u606f"}),"\n",(0,s.jsxs)(e.li,{children:["\u53d1\u9001\u6d88\u606f\u5230\u53e6\u4e00\u4e2a",(0,s.jsx)(e.a,{href:"/xstate-zh/docs/actors",children:"actor"})]}),"\n",(0,s.jsx)(e.li,{children:"\u66f4\u65b0\u4e0a\u4e0b\u6587"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u8fdb\u5165\u548c\u9000\u51fa\u52a8\u4f5c",children:"\u8fdb\u5165\u548c\u9000\u51fa\u52a8\u4f5c"}),"\n",(0,s.jsx)(e.p,{children:"\u8fdb\u5165\u52a8\u4f5c\u662f\u5728\u4efb\u4f55\u8fdb\u5165\u72b6\u6001\u8282\u70b9\u7684\u8f6c\u6362\u4e0a\u53d1\u751f\u7684\u52a8\u4f5c\u3002\u9000\u51fa\u52a8\u4f5c\u662f\u5728\u4efb\u4f55\u9000\u51fa\u72b6\u6001\u8282\u70b9\u7684\u8f6c\u6362\u4e0a\u53d1\u751f\u7684\u52a8\u4f5c\u3002"}),"\n",(0,s.jsxs)(e.p,{children:["\u8fdb\u5165\u548c\u9000\u51fa\u52a8\u4f5c\u4f7f\u7528\u72b6\u6001\u8282\u70b9\u4e0a\u7684 ",(0,s.jsx)(e.code,{children:"entry: [...]"})," \u548c ",(0,s.jsx)(e.code,{children:"exit: [...]"})," \u5c5e\u6027\u5b9a\u4e49\u3002\u60a8\u53ef\u4ee5\u5728\u4e00\u4e2a\u72b6\u6001\u4e0a\u89e6\u53d1\u591a\u4e2a\u8fdb\u5165\u548c\u9000\u51fa\u52a8\u4f5c\u3002\u9876\u7ea7\u6700\u7ec8\u72b6\u6001\u4e0d\u80fd\u6709\u9000\u51fa\u52a8\u4f5c\uff0c\u56e0\u4e3a\u673a\u5668\u5df2\u505c\u6b62\u4e14\u65e0\u6cd5\u518d\u8fdb\u884c\u8f6c\u6362\u3002"]}),"\n",(0,s.jsx)(c,{embedURL:"https://stately.ai/registry/editor/embed/c447d996-cef1-421d-a422-8be695668764?mode=design&machineId=f46674a5-4da3-4aca-9900-17c6ef471f50",title:"\u53cd\u9988\u8868\u5355"}),"\n",(0,s.jsx)(e.h2,{id:"\u52a8\u4f5c\u5bf9\u8c61",children:"\u52a8\u4f5c\u5bf9\u8c61"}),"\n",(0,s.jsxs)(e.p,{children:["\u52a8\u4f5c\u5bf9\u8c61\u6709\u4e00\u4e2a\u52a8\u4f5c ",(0,s.jsx)(e.code,{children:"type"})," \u548c\u4e00\u4e2a\u53ef\u9009\u7684 ",(0,s.jsx)(e.code,{children:"params"})," \u5bf9\u8c61\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u52a8\u4f5c\u7684 ",(0,s.jsx)(e.code,{children:"type"})," \u5c5e\u6027\u63cf\u8ff0\u52a8\u4f5c\u3002\u5177\u6709\u76f8\u540c\u7c7b\u578b\u7684\u52a8\u4f5c\u5177\u6709\u76f8\u540c\u7684\u5b9e\u73b0\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:["\u52a8\u4f5c\u7684 ",(0,s.jsx)(e.code,{children:"params"})," \u5c5e\u6027\u5305\u542b\u4e0e\u52a8\u4f5c\u76f8\u5173\u7684\u53c2\u6570\u5316\u503c\u3002"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { setup } from 'xstate';\n\nconst feedbackMachine = setup({\n  actions: {\n    track: (_, params: { response: string }) => {\n      /* ... */\n    },\n  },\n}).createMachine({\n  // ...\n  states: {\n    // ...\n    question: {\n      on: {\n        'feedback.good': {\n          actions: [\n            // highlight-start\n            {\n                // \u52a8\u4f5c\u7c7b\u578b\n                type: 'track',\n                // \u52a8\u4f5c\u53c2\u6570\n              params: { response: 'good' },\n            },\n            // highlight-end\n          ],\n        },\n      },\n    },\n  },\n});\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u52a8\u6001\u52a8\u4f5c\u53c2\u6570",children:"\u52a8\u6001\u52a8\u4f5c\u53c2\u6570"}),"\n",(0,s.jsxs)(e.p,{children:["\u60a8\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u8fd4\u56de\u53c2\u6570\u7684\u51fd\u6570\u5728 ",(0,s.jsx)(e.code,{children:"params"})," \u5c5e\u6027\u4e2d\u52a8\u6001\u4f20\u9012\u53c2\u6570\u3002\u8be5\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u5305\u542b\u5f53\u524d ",(0,s.jsx)(e.code,{children:"context"})," \u548c ",(0,s.jsx)(e.code,{children:"event"})," \u7684\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\u3002"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { setup } from 'xstate';\n\nconst feedbackMachine = setup({\n  actions: {\n    logInitialRating: (_, params: { initialRating: number }) => {\n      // ...\n    },\n  },\n}).createMachine({\n  context: {\n    initialRating: 3,\n  },\n  entry: [\n    {\n      type: 'logInitialRating',\n      // highlight-start\n      params: ({ context }) => ({\n        initialRating: context.initialRating,\n      }),\n      // highlight-end\n    },\n  ],\n});\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u8fd9\u662f\u4f7f\u52a8\u4f5c\u66f4\u5177\u53ef\u91cd\u7528\u6027\u7684\u63a8\u8350\u65b9\u6cd5\uff0c\u56e0\u4e3a\u60a8\u53ef\u4ee5\u5b9a\u4e49\u4e0d\u4f9d\u8d56\u4e8e\u673a\u5668\u7684 ",(0,s.jsx)(e.code,{children:"context"})," \u6216 ",(0,s.jsx)(e.code,{children:"event"})," \u7c7b\u578b\u7684\u52a8\u4f5c\u3002"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { setup } from 'xstate';\n\n// highlight-start\nfunction logInitialRating(_, params: { initialRating: number }) {\n  console.log(`Initial rating: ${params.initialRating}`);\n}\n// highlight-end\n\nconst feedbackMachine = setup({\n  actions: { logInitialRating },\n}).createMachine({\n  context: { initialRating: 3 },\n  entry: [\n    {\n      type: 'logInitialRating',\n      // highlight-start\n      params: ({ context }) => ({\n        initialRating: context.initialRating,\n      }),\n      // highlight-end\n    },\n  ],\n});\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u5185\u8054\u52a8\u4f5c",children:"\u5185\u8054\u52a8\u4f5c"}),"\n",(0,s.jsx)(e.p,{children:"\u60a8\u53ef\u4ee5\u5c06\u52a8\u4f5c\u58f0\u660e\u4e3a\u5185\u8054\u51fd\u6570\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { createMachine } from 'xstate';\n\nconst feedbackMachine = createMachine({\n  entry: [\n    // highlight-start\n    // \u5185\u8054\u52a8\u4f5c\n    ({ context, event }) => {\n      console.log(/* ... */);\n    },\n    // highlight-end\n  ],\n});\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5185\u8054\u52a8\u4f5c\u5bf9\u4e8e\u539f\u578b\u8bbe\u8ba1\u548c\u7b80\u5355\u60c5\u51b5\u975e\u5e38\u6709\u7528\uff0c\u4f46\u6211\u4eec\u901a\u5e38\u5efa\u8bae\u4f7f\u7528\u52a8\u4f5c\u5bf9\u8c61\u3002"}),"\n",(0,s.jsx)(e.h2,{id:"\u5b9e\u73b0\u52a8\u4f5c",children:"\u5b9e\u73b0\u52a8\u4f5c"}),"\n",(0,s.jsxs)(e.p,{children:["\u60a8\u53ef\u4ee5\u5728 ",(0,s.jsx)(e.code,{children:"setup(...)"})," \u51fd\u6570\u7684 ",(0,s.jsx)(e.code,{children:"actions"})," \u5c5e\u6027\u4e2d\u8bbe\u7f6e\u547d\u540d\u52a8\u4f5c\u7684\u5b9e\u73b0"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { setup } from 'xstate';\n\nconst feedbackMachine = setup({\n  // highlight-start\n  actions: {\n    track: (_, params: { msg: string }) => {\n      // \u52a8\u4f5c\u5b9e\u73b0\n      // ...\n    },\n  },\n  // highlight-end\n}).createMachine({\n  // \u673a\u5668\u914d\u7f6e\n  entry: [{ type: 'track', params: { msg: 'entered' } }],\n});\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u60a8\u8fd8\u53ef\u4ee5\u5728 ",(0,s.jsx)(e.code,{children:"machine.provide(...)"})," \u65b9\u6cd5\u4e2d\u63d0\u4f9b\u52a8\u4f5c\u5b9e\u73b0\uff0c\u4ee5\u8986\u76d6\u73b0\u6709\u7684\u52a8\u4f5c\u5b9e\u73b0\u3002\u8be5\u65b9\u6cd5\u4f1a\u521b\u5efa\u4e00\u4e2a\u5177\u6709\u76f8\u540c\u914d\u7f6e\u4f46\u4f7f\u7528\u63d0\u4f9b\u7684\u5b9e\u73b0\u7684\u65b0\u673a\u5668\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"const feedbackActor = createActor(\n  // highlight-start\n  feedbackMachine.provide({\n    actions: {\n      track: ({ context, event }, params) => {\n        // \u4e0d\u540c\u7684\u52a8\u4f5c\u5b9e\u73b0\n        // \uff08\u8986\u76d6\u4e4b\u524d\u7684\u5b9e\u73b0\uff09\n        // ...\n      },\n    },\n  }),\n  // highlight-end\n);\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u5185\u7f6e\u52a8\u4f5c",children:"\u5185\u7f6e\u52a8\u4f5c"}),"\n",(0,s.jsx)(e.p,{children:"XState \u63d0\u4f9b\u4e86\u8bb8\u591a\u6709\u7528\u7684\u5185\u7f6e\u52a8\u4f5c\uff0c\u5b83\u4eec\u662f\u60a8\u7684\u72b6\u6001\u673a\u903b\u8f91\u7684\u6838\u5fc3\u90e8\u5206\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u526f\u4f5c\u7528\u3002"}),"\n",(0,s.jsxs)(e.admonition,{type:"warning",children:[(0,s.jsxs)(e.p,{children:["\u5185\u7f6e\u52a8\u4f5c\uff0c\u4f8b\u5982 ",(0,s.jsx)(e.code,{children:"assign(\u2026)"}),"\u3001",(0,s.jsx)(e.code,{children:"sendTo(\u2026)"})," \u548c ",(0,s.jsx)(e.code,{children:"raise(\u2026)"}),"\uff0c",(0,s.jsx)(e.strong,{children:"\u4e0d\u662f\u547d\u4ee4\u5f0f\u7684"}),"\uff1b\u5b83\u4eec\u8fd4\u56de\u4e00\u4e2a\u7279\u6b8a\u7684",(0,s.jsx)(e.a,{href:"#action-objects",children:"\u52a8\u4f5c\u5bf9\u8c61"}),"\uff08\u4f8b\u5982 ",(0,s.jsx)(e.code,{children:"{ type: 'xstate.assign', \u2026 }"}),"\uff09\uff0c\u7531\u72b6\u6001\u673a\u89e3\u91ca\u3002\u4e0d\u8981\u5728\u81ea\u5b9a\u4e49\u52a8\u4f5c\u51fd\u6570\u4e2d\u8c03\u7528\u5185\u7f6e\u52a8\u4f5c\u3002"]}),(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"// \u274c \u8fd9\u5c06\u4e0d\u4f1a\u6709\u4efb\u4f55\u6548\u679c\nconst machine = createMachine({\n  context: { count: 0 },\n  // highlight-start\n  entry: ({ context }) => {\n    // \u8fd9\u4e2a\u52a8\u4f5c\u521b\u5efa\u5668\u53ea\u8fd4\u56de\u4e00\u4e2a\u52a8\u4f5c\u5bf9\u8c61\n    // \u7c7b\u4f3c\u4e8e { type: 'xstate.assign', ... }\n    assign({ count: context.count + 1 });\n  },\n  // highlight-end\n});\n\n// \u2705 \u8fd9\u5c06\u6309\u9884\u671f\u5de5\u4f5c\nconst machine = createMachine({\n  context: { count: 0 },\n  // highlight-start\n  entry: assign({\n    count: ({ context }) => context.count + 1,\n  }),\n  // highlight-end\n});\n\n// \u2705 \u547d\u4ee4\u5f0f\u5185\u7f6e\u52a8\u4f5c\u5728 `enqueueActions(\u2026)` \u4e2d\u53ef\u7528\nconst machine = createMachine({\n  context: { count: 0 },\n  // highlight-start\n  entry: enqueueActions(({ context, enqueue }) => {\n    enqueue.assign({\n      count: context.count + 1,\n    });\n  }),\n  // highlight-end\n});\n"})})]}),"\n",(0,s.jsx)(e.h2,{id:"assign-\u52a8\u4f5c",children:"Assign \u52a8\u4f5c"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"assign(...)"})," \u52a8\u4f5c\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u52a8\u4f5c\uff0c\u7528\u4e8e\u5c06\u6570\u636e\u5206\u914d\u5230\u72b6\u6001\u4e0a\u4e0b\u6587\u4e2d\u3002\u5728 ",(0,s.jsx)(e.code,{children:"assign(assignments)"})," \u4e2d\u7684 ",(0,s.jsx)(e.code,{children:"assignments"})," \u53c2\u6570\u662f\u6307\u5b9a\u4e0a\u4e0b\u6587\u5206\u914d\u7684\u5730\u65b9\u3002"]}),"\n",(0,s.jsxs)(e.p,{children:["\u5206\u914d\u53ef\u4ee5\u662f\u952e\u503c\u5bf9\u7684\u5bf9\u8c61\uff0c\u5176\u4e2d\u952e\u662f ",(0,s.jsx)(e.code,{children:"context"})," \u952e\uff0c\u503c\u53ef\u4ee5\u662f\u9759\u6001\u503c\u6216\u8fd4\u56de\u65b0\u503c\u7684\u8868\u8fbe\u5f0f\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { setup } from 'xstate';\n\nconst countMachine = setup({\n  types: {\n    events: {} as { type: 'increment'; value: number },\n  },\n}).createMachine({\n  context: {\n    count: 0,\n  },\n  on: {\n    increment: {\n      // highlight-start\n      actions: assign({\n        count: ({ context, event }) => context.count + event.value,\n      }),\n      // highlight-end\n    },\n  },\n});\n\nconst countActor = createActor(countMachine);\ncountActor.subscribe((state) => {\n  console.log(state.context.count);\n});\ncountActor.start();\n// logs 0\n\ncountActor.send({ type: 'increment', value: 3 });\n// logs 3\n\ncountActor.send({ type: 'increment', value: 2 });\n// logs 5\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u5bf9\u4e8e\u66f4\u52a8\u6001\u7684\u5206\u914d\uff0c\u4f20\u9012\u7ed9 ",(0,s.jsx)(e.code,{children:"assign(...)"})," \u7684\u53c2\u6570\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u8fd4\u56de\u90e8\u5206\u6216\u5168\u90e8 ",(0,s.jsx)(e.code,{children:"context"})," \u503c\u7684\u51fd\u6570\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { setup } from 'xstate';\n\nconst countMachine = setup({\n  types: {\n    events: {} as { type: 'increment'; value: number },\n  },\n}).createMachine({\n  context: {\n    count: 0,\n  },\n  on: {\n    increment: {\n      // highlight-start\n      actions: assign(({ context, event }) => {\n        return {\n          count: context.count + event.value,\n        };\n      }),\n      // highlight-end\n    },\n  },\n});\n"})}),"\n",(0,s.jsx)(e.admonition,{type:"warningxstate",children:(0,s.jsxs)(e.p,{children:["\u4e0d\u8981\u76f4\u63a5\u4fee\u6539 ",(0,s.jsx)(e.code,{children:"context"})," \u5bf9\u8c61\u3002\u76f8\u53cd\uff0c\u60a8\u5e94\u8be5\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"assign(...)"})," \u52a8\u4f5c\u6765\u4e0d\u53ef\u53d8\u5730\u66f4\u65b0 ",(0,s.jsx)(e.code,{children:"context"}),"\u3002\u5982\u679c\u60a8\u4fee\u6539 ",(0,s.jsx)(e.code,{children:"context"})," \u5bf9\u8c61\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u610f\u5916\u884c\u4e3a\uff0c\u4f8b\u5982\u4fee\u6539\u5176\u4ed6 actor \u7684 ",(0,s.jsx)(e.code,{children:"context"}),"\u3002"]})}),"\n",(0,s.jsx)(e.admonition,{type:"studio",children:(0,s.jsxs)(e.p,{children:["\u60a8\u53ef\u4ee5\u5728\u6211\u4eec\u7684\u62d6\u653e\u5f0f Stately \u7f16\u8f91\u5668\u4e2d\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"assign(...)"})," \u52a8\u4f5c\u521b\u5efa\u72b6\u6001\u673a\u3002 ",(0,s.jsx)(e.a,{href:"https://stately.ai/docs/editor-actions-and-actors/#xstate-built-in-actions",children:"\u9605\u8bfb\u66f4\u591a\u5173\u4e8e Stately \u7f16\u8f91\u5668\u4e2d\u7684\u5185\u7f6e assign \u52a8\u4f5c"}),"\u3002"]})}),"\n",(0,s.jsx)(e.h2,{id:"raise-\u52a8\u4f5c",children:"Raise \u52a8\u4f5c"}),"\n",(0,s.jsx)(e.p,{children:"Raise \u52a8\u4f5c\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u52a8\u4f5c\uff0c\u7528\u4e8e\u201c\u89e6\u53d1\u201d\u4e00\u4e2a\u4e8b\u4ef6\uff0c\u8be5\u4e8b\u4ef6\u7531\u540c\u4e00\u4e2a\u72b6\u6001\u673a\u63a5\u6536\u3002\u89e6\u53d1\u4e8b\u4ef6\u662f\u72b6\u6001\u673a\u5411\u81ea\u8eab\u201c\u53d1\u9001\u201d\u4e8b\u4ef6\u7684\u65b9\u5f0f\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { createMachine, raise } from 'xstate';\n\nconst machine = createMachine({\n  // ...\n  // highlight-next-line\n  entry: raise({ type: 'someEvent', data: 'someData' });\n});\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u5185\u90e8\uff0c\u5f53\u4e00\u4e2a\u4e8b\u4ef6\u88ab\u89e6\u53d1\u65f6\uff0c\u5b83\u4f1a\u88ab\u653e\u5165\u4e00\u4e2a\u201c\u5185\u90e8\u4e8b\u4ef6\u961f\u5217\u201d\u3002\u5728\u5f53\u524d\u8f6c\u6362\u5b8c\u6210\u540e\uff0c\u8fd9\u4e9b\u4e8b\u4ef6\u5c06\u6309\u63d2\u5165\u987a\u5e8f\uff08",(0,s.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/FIFO_(computing_and_electronics)",children:"\u5148\u8fdb\u5148\u51fa\uff0c\u6216 FIFO"}),")\u8fdb\u884c\u5904\u7406\u3002\u53ea\u6709\u5728\u5185\u90e8\u4e8b\u4ef6\u961f\u5217\u4e2d\u7684\u6240\u6709\u4e8b\u4ef6\u90fd\u88ab\u5904\u7406\u5b8c\u540e\uff0c\u5916\u90e8\u4e8b\u4ef6\u624d\u4f1a\u88ab\u5904\u7406\u3002"]}),"\n",(0,s.jsx)(e.p,{children:"\u89e6\u53d1\u7684\u4e8b\u4ef6\u53ef\u4ee5\u662f\u52a8\u6001\u7684\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { createMachine, raise } from 'xstate';\n\nconst machine = createMachine({\n  // ...\n  // highlight-start\n  entry: raise(({ context, event }) => ({\n    type: 'dynamicEvent',\n    data: context.someValue,\n  })),\n  // highlight-end\n});\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u4e8b\u4ef6\u4e5f\u53ef\u4ee5\u5728\u5ef6\u8fdf\u540e\u89e6\u53d1\uff0c\u8fd9\u6837\u5b83\u4eec\u4e0d\u4f1a\u88ab\u653e\u5165\u5185\u90e8\u4e8b\u4ef6\u961f\u5217\uff0c\u56e0\u4e3a\u5b83\u4eec\u4e0d\u4f1a\u7acb\u5373\u88ab\u5904\u7406\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { createMachine, raise } from 'xstate';\n\nconst machine = createMachine({\n  // ...\n  entry: raise(\n    { type: 'someEvent' },\n    // highlight-next-line\n    { delay: 1000 }\n  );\n});\n"})}),"\n",(0,s.jsx)(e.admonition,{type:"studio",children:(0,s.jsxs)(e.p,{children:["\u60a8\u53ef\u4ee5\u5728\u6211\u4eec\u7684\u62d6\u653e\u5f0f Stately \u7f16\u8f91\u5668\u4e2d\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"raise(...)"})," \u52a8\u4f5c\u521b\u5efa\u72b6\u6001\u673a\u3002 ",(0,s.jsx)(e.a,{href:"https://stately.ai/docs/editor-actions-and-actors/#xstate-built-in-actions",children:"\u9605\u8bfb\u66f4\u591a\u5173\u4e8e Stately \u7f16\u8f91\u5668\u4e2d\u7684\u5185\u7f6e raise \u52a8\u4f5c"}),"\u3002"]})}),"\n",(0,s.jsx)(e.h2,{id:"send-to-\u52a8\u4f5c",children:"Send-to \u52a8\u4f5c"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"sendTo(...)"})," \u52a8\u4f5c\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u52a8\u4f5c\uff0c\u7528\u4e8e\u5411\u7279\u5b9a\u7684 actor \u53d1\u9001\u4e8b\u4ef6\u3002"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"const machine = createMachine({\n  on: {\n    transmit: {\n      // highlight-start\n      actions: sendTo('someActor', { type: 'someEvent' }),\n      // highlight-end\n    },\n  },\n});\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u4e8b\u4ef6\u53ef\u4ee5\u662f\u52a8\u6001\u7684\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"const machine = createMachine({\n  on: {\n    transmit: {\n      // highlight-start\n      actions: sendTo('someActor', ({ context, event }) => {\n        return { type: 'someEvent', data: context.someData };\n      }),\n      // highlight-end\n    },\n  },\n});\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u76ee\u6807 actor \u53ef\u4ee5\u662f actor \u7684 ID \u6216 actor \u5f15\u7528\u672c\u8eab\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"const machine = createMachine({\n  context: ({ spawn }) => ({\n    someActorRef: spawn(fromPromise(/* ... */)),\n  }),\n  on: {\n    transmit: {\n      // highlight-start\n      actions: sendTo(({ context }) => context.someActorRef, {\n        type: 'someEvent',\n      }),\n      // highlight-end\n    },\n  },\n});\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u5176\u4ed6\u9009\u9879\uff0c\u4f8b\u5982 ",(0,s.jsx)(e.code,{children:"delay"})," \u548c ",(0,s.jsx)(e.code,{children:"id"}),"\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u7b2c\u4e09\u4e2a\u53c2\u6570\u4f20\u9012\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"const machine = createMachine({\n  on: {\n    transmit: {\n      actions: sendTo(\n        'someActor',\n        { type: 'someEvent' },\n        // highlight-start\n        {\n          id: 'transmission',\n          delay: 1000,\n        },\n        // highlight-end\n      ),\n    },\n  },\n});\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u5ef6\u8fdf\u52a8\u4f5c\u53ef\u4ee5\u901a\u8fc7\u5b83\u4eec\u7684 ",(0,s.jsx)(e.code,{children:"id"})," \u53d6\u6d88\u3002\u8bf7\u53c2\u9605 ",(0,s.jsx)(e.a,{href:"https://stately.ai/docs/actions#cancel-action",children:(0,s.jsx)(e.code,{children:"cancel(...)"})}),"\u3002"]}),"\n",(0,s.jsx)(e.admonition,{type:"studio",children:(0,s.jsxs)(e.p,{children:["\u60a8\u53ef\u4ee5\u5728\u6211\u4eec\u7684\u62d6\u653e\u5f0f Stately \u7f16\u8f91\u5668\u4e2d\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"sendTo(...)"})," \u52a8\u4f5c\u521b\u5efa\u72b6\u6001\u673a\u3002 ",(0,s.jsx)(e.a,{href:"https://stately.ai/docs/editor-actions-and-actors/#xstate-built-in-actions",children:"\u9605\u8bfb\u66f4\u591a\u5173\u4e8e Stately \u7f16\u8f91\u5668\u4e2d\u7684\u5185\u7f6e sendTo \u52a8\u4f5c"}),"\u3002"]})}),"\n",(0,s.jsx)(e.h2,{id:"send-parent-\u52a8\u4f5c",children:"Send-parent \u52a8\u4f5c"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"sendParent(...)"})," \u52a8\u4f5c\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u52a8\u4f5c\uff0c\u7528\u4e8e\u5411\u7236 actor \u53d1\u9001\u4e8b\u4ef6\uff08\u5982\u679c\u5b58\u5728\u7236 actor\uff09\u3002"]}),"\n",(0,s.jsxs)(e.admonition,{type:"tip",children:[(0,s.jsxs)(e.p,{children:["\u5efa\u8bae\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"sendTo(...)"})," \u901a\u8fc7 ",(0,s.jsx)(e.a,{href:"./input.ts",children:"input"})," \u6216\u4e8b\u4ef6\u5c06 actor \u5f15\u7528\uff08\u4f8b\u5982\u7236 actor \u5f15\u7528\uff09\u4f20\u9012\u7ed9\u5176\u4ed6 actor\uff0c\u5e76\u5c06\u8fd9\u4e9b actor \u5f15\u7528\u5b58\u50a8\u5728 ",(0,s.jsx)(e.code,{children:"context"})," \u4e2d\uff0c\u800c\u4e0d\u662f\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"sendParent(...)"}),"\u3002\u8fd9\u53ef\u4ee5\u907f\u514d actor \u4e4b\u95f4\u7684\u7d27\u5bc6\u8026\u5408\uff0c\u5e76\u4e14\u53ef\u4ee5\u66f4\u5b89\u5168\u5730\u8fdb\u884c\u7c7b\u578b\u68c0\u67e5\u3002"]}),(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"\u4f7f\u7528 input \u7684\u793a\u4f8b\uff1a"}),(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { createMachine, sendTo } from 'xstate';\n\nconst childMachine = createMachine({\n  context: ({ input }) => ({\n    parentRef: input.parentRef,\n  }),\n  on: {\n    someEvent: {\n      // highlight-start\n      actions: sendTo(({ context }) => context.parentRef, {\n        type: 'tellParentSomething',\n      }),\n      // highlight-end\n    },\n  },\n});\n\nconst parentMachine = createMachine({\n  // ...\n  invoke: {\n    id: 'child',\n    src: childMachine,\n    // highlight-start\n    input: ({ self }) => ({\n      parentRef: self,\n    }),\n    // highlight-end\n  },\n  on: {\n    tellParentSomething: {\n      actions: () => {\n        console.log('\u5b50 actor \u544a\u8bc9\u7236 actor \u4e00\u4e9b\u4e8b\u60c5');\n      },\n    },\n  },\n});\n\nconst parentActor = createActor(parentMachine);\n\nparentActor.start();\n"})})]}),(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"\u4f7f\u7528 input \u7684\u793a\u4f8b\uff08TypeScript\uff09\uff1a"}),(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { ActorRef, createActor, log, sendTo, setup, Snapshot } from 'xstate';\n\n// highlight-start\ntype ChildEvent = {\n  type: 'tellParentSomething';\n  data?: string;\n};\ntype ParentActor = ActorRef<Snapshot<unknown>, ChildEvent>;\n// highlight-end\n\nconst childMachine = setup({\n  types: {\n    context: {} as {\n      parentRef: ParentActor\n    },\n    input: {} as {\n      parentRef: ParentActor;\n    },\n  },\n}).createMachine({\n  context: ({ input: { parentRef } }) => ({parentRef}),\n// highlight-start\n  entry: sendTo(({ context }) => context.parentRef, {\n    type: 'tellParentSomething',\n    data: 'Hi parent!',\n  }),\n// highlight-end\n});\n\nexport const parent = setup({\n  actors: { child: childMachine },\n}).createMachine({\n// highlight-start\n  invoke: {\n    src: 'child',\n    input: ({ self }) => ({\n      parentRef: self,\n    }),\n  },\n// highlight-end\n  on: {\n    tellParentSomething: {\n      actions: log( ({event:{data}})=> `Child actor says \"${data}\"`),\n    },\n  },\n});\n\ncreateActor(parent).start();\n"})})]})]}),"\n",(0,s.jsx)(e.h2,{id:"\u6392\u961f\u52a8\u4f5c",children:"\u6392\u961f\u52a8\u4f5c"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"enqueueActions(...)"})," \u52a8\u4f5c\u521b\u5efa\u5668\u662f\u4e00\u4e2a\u9ad8\u7ea7\u52a8\u4f5c\uff0c\u5b83\u5c06\u52a8\u4f5c\u6309\u987a\u5e8f\u6392\u961f\u6267\u884c\uff0c\u800c\u4e0d\u5b9e\u9645\u6267\u884c\u4efb\u4f55\u52a8\u4f5c\u3002\u5b83\u63a5\u53d7\u4e00\u4e2a\u56de\u8c03\uff0c\u8be5\u56de\u8c03\u63a5\u6536 ",(0,s.jsx)(e.code,{children:"context"}),"\u3001",(0,s.jsx)(e.code,{children:"event"})," \u4ee5\u53ca ",(0,s.jsx)(e.code,{children:"enqueue"})," \u548c ",(0,s.jsx)(e.code,{children:"check"})," \u51fd\u6570\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"enqueue(...)"})," \u51fd\u6570\u7528\u4e8e\u6392\u961f\u4e00\u4e2a\u52a8\u4f5c\u3002\u5b83\u63a5\u53d7\u4e00\u4e2a\u52a8\u4f5c\u5bf9\u8c61\u6216\u52a8\u4f5c\u51fd\u6570\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"actions: enqueueActions(({ enqueue }) => {\n  // \u6392\u961f\u4e00\u4e2a\u52a8\u4f5c\u5bf9\u8c61\n  enqueue({ type: 'greet', params: { message: 'hi' } });\n\n  // \u6392\u961f\u4e00\u4e2a\u52a8\u4f5c\u51fd\u6570\n  enqueue(() => console.log('Hello'));\n\n  // \u6392\u961f\u4e00\u4e2a\u6ca1\u6709\u53c2\u6570\u7684\u7b80\u5355\u52a8\u4f5c\n  enqueue('doSomething');\n});\n"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"check(...)"})," \u51fd\u6570\u7528\u4e8e\u6709\u6761\u4ef6\u5730\u6392\u961f\u4e00\u4e2a\u52a8\u4f5c\u3002\u5b83\u63a5\u53d7\u4e00\u4e2a\u5b88\u536b\u5bf9\u8c61\u6216\u5b88\u536b\u51fd\u6570\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u8868\u793a\u5b88\u536b\u662f\u5426\u8bc4\u4f30\u4e3a ",(0,s.jsx)(e.code,{children:"true"})," \u7684\u5e03\u5c14\u503c\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"actions: enqueueActions(({ enqueue, check }) => {\n  if (check({ type: 'everythingLooksGood' })) {\n    enqueue('doSomething');\n  }\n});\n"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"enqueue"})," \u4e0a\u8fd8\u6709\u4e00\u4e9b\u8f85\u52a9\u65b9\u6cd5\u7528\u4e8e\u6392\u961f\u5185\u7f6e\u52a8\u4f5c\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"enqueue.assign(...)"}),"\uff1a\u6392\u961f\u4e00\u4e2a ",(0,s.jsx)(e.code,{children:"assign(...)"})," \u52a8\u4f5c"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"enqueue.sendTo(...)"}),"\uff1a\u6392\u961f\u4e00\u4e2a ",(0,s.jsx)(e.code,{children:"sendTo(...)"})," \u52a8\u4f5c"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"enqueue.raise(...)"}),"\uff1a\u6392\u961f\u4e00\u4e2a ",(0,s.jsx)(e.code,{children:"raise(...)"})," \u52a8\u4f5c"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"enqueue.spawnChild(...)"}),"\uff1a\u6392\u961f\u4e00\u4e2a ",(0,s.jsx)(e.code,{children:"spawnChild(...)"})," \u52a8\u4f5c"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"enqueue.stopChild(...)"}),"\uff1a\u6392\u961f\u4e00\u4e2a ",(0,s.jsx)(e.code,{children:"stopChild(...)"})," \u52a8\u4f5c"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"enqueue.cancel(...)"}),"\uff1a\u6392\u961f\u4e00\u4e2a ",(0,s.jsx)(e.code,{children:"cancel(...)"})," \u52a8\u4f5c"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u6392\u961f\u7684\u52a8\u4f5c\u53ef\u4ee5\u6709\u6761\u4ef6\u5730\u8c03\u7528\uff0c\u4f46\u4e0d\u80fd\u5f02\u6b65\u6392\u961f\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"const machine = createMachine({\n  // ...\n  entry: enqueueActions(({ context, event, enqueue, check }) => {\n    // assign \u52a8\u4f5c\n    enqueue.assign({\n      count: context.count + 1,\n    });\n\n    // \u6761\u4ef6\u52a8\u4f5c\uff08\u66ff\u4ee3 choose(...)\uff09\n    if (event.someOption) {\n      enqueue.sendTo('someActor', { type: 'blah', thing: context.thing });\n\n      // \u5176\u4ed6\u52a8\u4f5c\n      enqueue('namedAction');\n      // \u5e26\u53c2\u6570\n      enqueue({ type: 'greet', params: { message: 'hello' } });\n    } else {\n      // \u5185\u8054\n      enqueue(() => console.log('hello'));\n\n      // \u751a\u81f3\u5185\u7f6e\u52a8\u4f5c\n    }\n\n    // \u4f7f\u7528 check(...) \u57fa\u4e8e\u5b88\u536b\u6761\u4ef6\u6027\u5730\u6392\u961f\u52a8\u4f5c\n    if (check({ type: 'someGuard' })) {\n      // ...\n    }\n\n    // \u65e0\u8fd4\u56de\u503c\n  }),\n});\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u60a8\u53ef\u4ee5\u4f7f\u7528\u5e26\u6709\u5f15\u7528\u7684\u6392\u961f\u52a8\u4f5c\u7684\u53c2\u6570\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { setup, enqueueActions } from 'xstate';\n\nconst machine = setup({\n  actions: {\n    // highlight-start\n    doThings: enqueueActions(({ enqueue }, params: { name: string }) => {\n      enqueue({ type: 'greet', params: { name } });\n      // ...\n    }),\n    // highlight-end\n    greet: (_, params: { name: string }) => {\n      console.log(`Hello ${params.name}!`);\n    },\n  },\n}).createMachine({\n  // ...\n  // highlight-start\n  entry: {\n    type: 'doThings',\n    params: { name: 'World' },\n  },\n  // highlight-end\n});\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u65e5\u5fd7\u52a8\u4f5c",children:"\u65e5\u5fd7\u52a8\u4f5c"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"log(...)"})," \u52a8\u4f5c\u662f\u4e00\u79cd\u7b80\u5355\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5c06\u6d88\u606f\u8bb0\u5f55\u5230\u63a7\u5236\u53f0\u3002"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { createMachine, log } from 'xstate';\n\nconst machine = createMachine({\n  on: {\n    someEvent: {\n      // highlight-start\n      actions: log('some message'),\n      // highlight-end\n    },\n  },\n});\n"})}),"\n",(0,s.jsx)(e.admonition,{type:"studio",children:(0,s.jsxs)(e.p,{children:["\u60a8\u53ef\u4ee5\u5728\u6211\u4eec\u7684\u62d6\u653e\u5f0f Stately \u7f16\u8f91\u5668\u4e2d\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"log(...)"})," \u52a8\u4f5c\u521b\u5efa\u72b6\u6001\u673a\u3002 ",(0,s.jsx)(e.a,{href:"https://stately.ai/docs/editor-actions-and-actors/#xstate-built-in-actions",children:"\u9605\u8bfb\u66f4\u591a\u5173\u4e8e Stately \u7f16\u8f91\u5668\u4e2d\u7684\u5185\u7f6e log \u52a8\u4f5c"}),"\u3002"]})}),"\n",(0,s.jsx)(e.h2,{id:"\u53d6\u6d88\u52a8\u4f5c",children:"\u53d6\u6d88\u52a8\u4f5c"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"cancel(...)"})," \u52a8\u4f5c\u901a\u8fc7\u5176 ID \u53d6\u6d88\u5ef6\u8fdf\u7684 ",(0,s.jsx)(e.code,{children:"sendTo(...)"})," \u6216 ",(0,s.jsx)(e.code,{children:"raise(...)"})," \u52a8\u4f5c\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { createMachine, sendTo, cancel } from 'xstate';\n\nconst machine = createMachine({\n  on: {\n    event: {\n      actions: sendTo(\n        'someActor',\n        { type: 'someEvent' },\n        {\n          // highlight-next-line\n          id: 'someId',\n          delay: 1000,\n        },\n      ),\n    },\n    cancelEvent: {\n      // highlight-next-line\n      actions: cancel('someId'),\n    },\n  },\n});\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u505c\u6b62\u5b50-actor-\u52a8\u4f5c",children:"\u505c\u6b62\u5b50 actor \u52a8\u4f5c"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"stopChild(...)"})," \u52a8\u4f5c\u7528\u4e8e\u505c\u6b62\u5b50 actor\u3002actor \u53ea\u80fd\u4ece\u5176\u7236 actor \u505c\u6b62\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { createMachine, stopChild } from 'xstate';\n\nconst machine = createMachine({\n  context: ({ spawn }) => ({\n    spawnedRef: spawn(fromPromise(/* ... */), { id: 'spawnedId' }),\n  }),\n  on: {\n    stopById: {\n      // highlight-next-line\n      actions: stopChild('spawnedId'),\n    },\n    stopByRef: {\n      // highlight-next-line\n      actions: stopChild(({ context }) => context.spawnedRef),\n    },\n  },\n});\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u5efa\u6a21",children:"\u5efa\u6a21"}),"\n",(0,s.jsxs)(e.p,{children:["\u5982\u679c\u60a8\u53ea\u9700\u8981\u5728\u54cd\u5e94\u4e8b\u4ef6\u65f6\u6267\u884c\u52a8\u4f5c\uff0c\u60a8\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u4ec5\u5b9a\u4e49\u4e86 ",(0,s.jsx)(e.code,{children:"actions: [ ... ]"})," \u7684",(0,s.jsx)(e.a,{href:"/docs/transitions#self-transitions",children:"\u81ea\u8f6c\u6362"}),"\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u53ea\u9700\u8981\u5728\u8f6c\u6362\u4e2d\u5206\u914d\u7ed9 ",(0,s.jsx)(e.code,{children:"context"})," \u7684\u673a\u5668\u53ef\u80fd\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { createMachine } from 'xstate';\n\nconst countMachine = createMachine({\n  context: {\n    count: 0,\n  },\n  // highlight-start\n  on: {\n    increment: {\n      actions: assign({\n        count: ({ context, event }) => context.count + event.value,\n      }),\n    },\n    decrement: {\n      actions: assign({\n        count: ({ context, event }) => context.count - event.value,\n      }),\n    },\n  },\n  // highlight-end\n});\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u7b80\u5199",children:"\u7b80\u5199"}),"\n",(0,s.jsx)(e.p,{children:"\u5bf9\u4e8e\u7b80\u5355\u7684\u52a8\u4f5c\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u52a8\u4f5c\u5b57\u7b26\u4e32\u800c\u4e0d\u662f\u52a8\u4f5c\u5bf9\u8c61\u3002\u5c3d\u7ba1\u6211\u4eec\u66f4\u559c\u6b22\u4e3a\u4e86\u4fdd\u6301\u4e00\u81f4\u6027\u4f7f\u7528\u5bf9\u8c61\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { createMachine } from 'xstate';\n\nconst feedbackMachine = createMachine({\n  // ...\n  states: {\n    // ...\n    question: {\n      on: {\n        'feedback.good': {\n          // highlight-start\n          actions: ['track'],\n          // highlight-end\n        },\n      },\n    },\n  },\n});\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u52a8\u4f5c\u548c-typescript",children:"\u52a8\u4f5c\u548c TypeScript"}),"\n",(0,s.jsxs)(e.admonition,{type:"typescript",children:[(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"XState v5 \u9700\u8981 TypeScript \u7248\u672c 5.0 \u6216\u66f4\u9ad8\u7248\u672c\u3002"})}),(0,s.jsxs)(e.p,{children:["\u4e3a\u4e86\u83b7\u5f97\u6700\u4f73\u6548\u679c\uff0c\u8bf7\u4f7f\u7528\u6700\u65b0\u7684 TypeScript \u7248\u672c\u3002 ",(0,s.jsx)(e.a,{href:"/xstate-zh/docs/typescript",children:"\u9605\u8bfb\u66f4\u591a\u5173\u4e8e XState \u548c TypeScript \u7684\u4fe1\u606f"})]})]}),"\n",(0,s.jsxs)(e.p,{children:["\u8981\u5f3a\u7c7b\u578b\u8bbe\u7f6e\u52a8\u4f5c\u7c7b\u578b\uff0c\u8bf7\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"setup({ ... })"})," \u51fd\u6570\uff0c\u5e76\u5c06\u52a8\u4f5c\u5b9e\u73b0\u653e\u5728 ",(0,s.jsx)(e.code,{children:"actions: { ... }"})," \u5bf9\u8c61\u4e2d\u3002\u952e\u662f\u52a8\u4f5c\u7c7b\u578b\uff0c\u503c\u662f\u52a8\u4f5c\u51fd\u6570\u5b9e\u73b0\u3002"]}),"\n",(0,s.jsx)(e.p,{children:"\u60a8\u8fd8\u5e94\u8be5\u5f3a\u7c7b\u578b\u5316\u52a8\u4f5c\u51fd\u6570\u7684\u53c2\u6570\uff0c\u8fd9\u4e9b\u53c2\u6570\u4f5c\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4f20\u9012\u7ed9\u52a8\u4f5c\u51fd\u6570\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { setup } from 'xstate';\n\nconst machine = setup({\n  // highlight-start\n  actions: {\n    track: (_, params: { response: string }) => {\n      // ...\n    },\n    increment: (_, params: { value: number }) => {\n      // ...\n    },\n  },\n  // highlight-end\n}).createMachine({\n  // ...\n  entry: [\n    { type: 'track', params: { response: 'good' } },\n    { type: 'increment', params: { value: 1 } },\n  ],\n});\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u5982\u679c\u60a8\u6ca1\u6709\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"setup({ ... })"}),"\uff08\u5f3a\u70c8\u63a8\u8350\uff09\uff0c\u60a8\u53ef\u4ee5\u5728\u673a\u5668\u914d\u7f6e\u7684 ",(0,s.jsx)(e.code,{children:"types.actions"})," \u5c5e\u6027\u4e2d\u5f3a\u7c7b\u578b\u5316\u60a8\u7684 ",(0,s.jsx)(e.code,{children:"actions"}),"\u3002"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"const machine = createMachine({\n  types: {} as {\n    // highlight-start\n    actions:\n      | {\n          type: 'track';\n          params: {\n            response: string;\n          };\n        }\n      | { type: 'increment'; params: { value: number } };\n    // highlight-end\n  },\n  // ...\n  entry: [\n    { type: 'track', params: { response: 'good' } },\n    { type: 'increment', params: { value: 1 } },\n  ],\n});\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u52a8\u4f5c\u901f\u67e5\u8868",children:"\u52a8\u4f5c\u901f\u67e5\u8868"}),"\n",(0,s.jsx)(e.h3,{id:"\u901f\u67e5\u8868\u8fdb\u5165\u548c\u9000\u51fa\u52a8\u4f5c",children:"\u901f\u67e5\u8868\uff1a\u8fdb\u5165\u548c\u9000\u51fa\u52a8\u4f5c"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { createMachine } from 'xstate';\n\nconst machine = createMachine({\n  // highlight-start\n  // \u6839\u4e0a\u7684\u8fdb\u5165\u52a8\u4f5c\n  entry: [{ type: 'entryAction' }],\n  exit: [{ type: 'exitAction' }],\n  // highlight-end\n  initial: 'start',\n  states: {\n    start: {\n      // highlight-start\n      entry: [{ type: 'startEntryAction' }],\n      exit: [{ type: 'startExitAction' }],\n      // highlight-end\n    },\n  },\n});\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u901f\u67e5\u8868\u8f6c\u6362\u52a8\u4f5c",children:"\u901f\u67e5\u8868\uff1a\u8f6c\u6362\u52a8\u4f5c"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { createMachine } from 'xstate';\n\nconst machine = createMachine({\n  on: {\n    someEvent: {\n      actions: [\n        // highlight-start\n        { type: 'doSomething' },\n        { type: 'doSomethingElse' },\n        // highlight-end\n      ],\n    },\n  },\n});\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u901f\u67e5\u8868\u5185\u8054\u52a8\u4f5c\u51fd\u6570",children:"\u901f\u67e5\u8868\uff1a\u5185\u8054\u52a8\u4f5c\u51fd\u6570"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { createMachine } from 'xstate';\n\nconst machine = createMachine({\n  on: {\n    someEvent: {\n      actions: [\n        // highlight-start\n        ({ context, event }) => {\n          console.log(context, event);\n        },\n        // highlight-end\n      ],\n    },\n  },\n});\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u901f\u67e5\u8868\u8bbe\u7f6e\u52a8\u4f5c",children:"\u901f\u67e5\u8868\uff1a\u8bbe\u7f6e\u52a8\u4f5c"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { setup } from 'xstate';\n\nconst someAction = () => {\n  //...\n};\n\nconst machine = setup({\n  actions: {\n    someAction,\n  },\n}).createMachine({\n  entry: [\n    // highlight-start\n    { type: 'someAction' },\n    // highlight-end\n  ],\n  // ...\n});\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u901f\u67e5\u8868\u63d0\u4f9b\u52a8\u4f5c",children:"\u901f\u67e5\u8868\uff1a\u63d0\u4f9b\u52a8\u4f5c"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { setup } from 'xstate';\n\nconst someAction = () => {\n  //...\n};\n\nconst machine = setup({\n  actions: {\n    someAction,\n  },\n}).createMachine({\n  // ...\n});\n\nconst modifiedMachine = machine.provide({\n  someAction: () => {\n    // \u8986\u76d6\u7684\u52a8\u4f5c\u5b9e\u73b0\n  },\n});\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u901f\u67e5\u8868assign-\u52a8\u4f5c",children:"\u901f\u67e5\u8868\uff1aassign \u52a8\u4f5c"}),"\n",(0,s.jsx)(e.h4,{id:"\u4f7f\u7528\u5c5e\u6027\u5206\u914d\u5668",children:"\u4f7f\u7528\u5c5e\u6027\u5206\u914d\u5668"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { createMachine } from 'xstate';\n\nconst countMachine = createMachine({\n  context: {\n    count: 0,\n  },\n  on: {\n    increment: {\n      // highlight-start\n      actions: assign({\n        count: ({ context, event }) => {\n          return context.count + event.value;\n        },\n      }),\n      // highlight-end\n    },\n  },\n});\n"})}),"\n",(0,s.jsx)(e.h4,{id:"\u4f7f\u7528\u51fd\u6570\u5206\u914d\u5668",children:"\u4f7f\u7528\u51fd\u6570\u5206\u914d\u5668"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { createMachine } from 'xstate';\n\nconst countMachine = createMachine({\n  context: {\n    count: 0,\n  },\n  on: {\n    increment: {\n      // highlight-start\n      actions: assign(({ context, event }) => {\n        return {\n          count: context.count + event.value,\n        };\n      }),\n      // highlight-end\n    },\n  },\n});\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u901f\u67e5\u8868raise-\u52a8\u4f5c",children:"\u901f\u67e5\u8868\uff1araise \u52a8\u4f5c"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { createMachine, raise } from 'xstate';\n\nconst machine = createMachine({\n  on: {\n    someEvent: {\n      // highlight-start\n      actions: raise({ type: 'anotherEvent' }),\n      // highlight-end\n    },\n  },\n});\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u901f\u67e5\u8868send-to-\u52a8\u4f5c",children:"\u901f\u67e5\u8868\uff1asend-to \u52a8\u4f5c"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"const machine = createMachine({\n  on: {\n    transmit: {\n      // highlight-start\n      actions: sendTo('someActor', { type: 'someEvent' }),\n      // highlight-end\n    },\n  },\n});\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u901f\u67e5\u8868\u6392\u961f\u52a8\u4f5c",children:"\u901f\u67e5\u8868\uff1a\u6392\u961f\u52a8\u4f5c"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { createMachine, enqueueActions } from 'xstate';\n\nconst machine = createMachine({\n  // highlight-start\n  entry: enqueueActions(({ enqueue, check }) => {\n    enqueue({ type: 'someAction' });\n\n    if (check({ type: 'someGuard' })) {\n      enqueue({ type: 'anotherAction' });\n    }\n\n    enqueue.assign({\n      count: 0,\n    });\n\n    enqueue.sendTo('someActor', { type: 'someEvent' });\n\n    enqueue.raise({ type: 'anEvent' });\n  }),\n  // highlight-end\n});\n"})})]})}function d(n={}){const{wrapper:e}={...(0,i.a)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(l,{...n})}):l(n)}function x(n,e){throw new Error("Expected "+(e?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}},11151:(n,e,t)=>{t.d(e,{Z:()=>r,a:()=>a});var s=t(67294);const i={},c=s.createContext(i);function a(n){const e=s.useContext(c);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:a(n.components),s.createElement(c.Provider,{value:e},n.children)}}}]);